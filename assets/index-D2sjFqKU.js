var yw=Object.defineProperty;var gw=(u,t,a)=>t in u?yw(u,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[t]=a;var da=(u,t,a)=>gw(u,typeof t!="symbol"?t+"":t,a);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}})();function ss(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Tc={exports:{}},Pi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function _w(){if(my)return Pi;my=1;var u=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(r,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var f in s)f!=="key"&&(o[f]=s[f])}else o=s;return s=o.ref,{$$typeof:u,type:r,key:c,ref:s!==void 0?s:null,props:o}}return Pi.Fragment=t,Pi.jsx=a,Pi.jsxs=a,Pi}var py;function bw(){return py||(py=1,Tc.exports=_w()),Tc.exports}var Pe=bw(),Oc={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function vw(){if(yy)return ye;yy=1;var u=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function b(E){return E===null||typeof E!="object"?null:(E=_&&E[_]||E["@@iterator"],typeof E=="function"?E:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function R(E,M,H){this.props=E,this.context=M,this.refs=T,this.updater=H||w}R.prototype.isReactComponent={},R.prototype.setState=function(E,M){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,M,"setState")},R.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function k(){}k.prototype=R.prototype;function q(E,M,H){this.props=E,this.context=M,this.refs=T,this.updater=H||w}var N=q.prototype=new k;N.constructor=q,S(N,R.prototype),N.isPureReactComponent=!0;var Y=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},K=Object.prototype.hasOwnProperty;function re(E,M,H,Z,ee,oe){return H=oe.ref,{$$typeof:u,type:E,key:M,ref:H!==void 0?H:null,props:oe}}function J(E,M){return re(E.type,M,void 0,void 0,void 0,E.props)}function Me(E){return typeof E=="object"&&E!==null&&E.$$typeof===u}function Be(E){var M={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(H){return M[H]})}var Qe=/\/+/g;function He(E,M){return typeof E=="object"&&E!==null&&E.key!=null?Be(""+E.key):M.toString(36)}function Et(){}function W(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(Et,Et):(E.status="pending",E.then(function(M){E.status==="pending"&&(E.status="fulfilled",E.value=M)},function(M){E.status==="pending"&&(E.status="rejected",E.reason=M)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function V(E,M,H,Z,ee){var oe=typeof E;(oe==="undefined"||oe==="boolean")&&(E=null);var ce=!1;if(E===null)ce=!0;else switch(oe){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(E.$$typeof){case u:case t:ce=!0;break;case y:return ce=E._init,V(ce(E._payload),M,H,Z,ee)}}if(ce)return ee=ee(E),ce=Z===""?"."+He(E,0):Z,Y(ee)?(H="",ce!=null&&(H=ce.replace(Qe,"$&/")+"/"),V(ee,M,H,"",function(Ht){return Ht})):ee!=null&&(Me(ee)&&(ee=J(ee,H+(ee.key==null||E&&E.key===ee.key?"":(""+ee.key).replace(Qe,"$&/")+"/")+ce)),M.push(ee)),1;ce=0;var Fe=Z===""?".":Z+":";if(Y(E))for(var Ue=0;Ue<E.length;Ue++)Z=E[Ue],oe=Fe+He(Z,Ue),ce+=V(Z,M,H,oe,ee);else if(Ue=b(E),typeof Ue=="function")for(E=Ue.call(E),Ue=0;!(Z=E.next()).done;)Z=Z.value,oe=Fe+He(Z,Ue++),ce+=V(Z,M,H,oe,ee);else if(oe==="object"){if(typeof E.then=="function")return V(W(E),M,H,Z,ee);throw M=String(E),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return ce}function C(E,M,H){if(E==null)return E;var Z=[],ee=0;return V(E,Z,"","",function(oe){return M.call(H,oe,ee++)}),Z}function U(E){if(E._status===-1){var M=E._result;M=M(),M.then(function(H){(E._status===0||E._status===-1)&&(E._status=1,E._result=H)},function(H){(E._status===0||E._status===-1)&&(E._status=2,E._result=H)}),E._status===-1&&(E._status=0,E._result=M)}if(E._status===1)return E._result.default;throw E._result}var G=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)};function Q(){}return ye.Children={map:C,forEach:function(E,M,H){C(E,function(){M.apply(this,arguments)},H)},count:function(E){var M=0;return C(E,function(){M++}),M},toArray:function(E){return C(E,function(M){return M})||[]},only:function(E){if(!Me(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},ye.Component=R,ye.Fragment=a,ye.Profiler=s,ye.PureComponent=q,ye.StrictMode=r,ye.Suspense=p,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,ye.__COMPILER_RUNTIME={__proto__:null,c:function(E){return I.H.useMemoCache(E)}},ye.cache=function(E){return function(){return E.apply(null,arguments)}},ye.cloneElement=function(E,M,H){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var Z=S({},E.props),ee=E.key,oe=void 0;if(M!=null)for(ce in M.ref!==void 0&&(oe=void 0),M.key!==void 0&&(ee=""+M.key),M)!K.call(M,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&M.ref===void 0||(Z[ce]=M[ce]);var ce=arguments.length-2;if(ce===1)Z.children=H;else if(1<ce){for(var Fe=Array(ce),Ue=0;Ue<ce;Ue++)Fe[Ue]=arguments[Ue+2];Z.children=Fe}return re(E.type,ee,void 0,void 0,oe,Z)},ye.createContext=function(E){return E={$$typeof:c,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:o,_context:E},E},ye.createElement=function(E,M,H){var Z,ee={},oe=null;if(M!=null)for(Z in M.key!==void 0&&(oe=""+M.key),M)K.call(M,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ee[Z]=M[Z]);var ce=arguments.length-2;if(ce===1)ee.children=H;else if(1<ce){for(var Fe=Array(ce),Ue=0;Ue<ce;Ue++)Fe[Ue]=arguments[Ue+2];ee.children=Fe}if(E&&E.defaultProps)for(Z in ce=E.defaultProps,ce)ee[Z]===void 0&&(ee[Z]=ce[Z]);return re(E,oe,void 0,void 0,null,ee)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(E){return{$$typeof:f,render:E}},ye.isValidElement=Me,ye.lazy=function(E){return{$$typeof:y,_payload:{_status:-1,_result:E},_init:U}},ye.memo=function(E,M){return{$$typeof:h,type:E,compare:M===void 0?null:M}},ye.startTransition=function(E){var M=I.T,H={};I.T=H;try{var Z=E(),ee=I.S;ee!==null&&ee(H,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(Q,G)}catch(oe){G(oe)}finally{I.T=M}},ye.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},ye.use=function(E){return I.H.use(E)},ye.useActionState=function(E,M,H){return I.H.useActionState(E,M,H)},ye.useCallback=function(E,M){return I.H.useCallback(E,M)},ye.useContext=function(E){return I.H.useContext(E)},ye.useDebugValue=function(){},ye.useDeferredValue=function(E,M){return I.H.useDeferredValue(E,M)},ye.useEffect=function(E,M,H){var Z=I.H;if(typeof H=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(E,M)},ye.useId=function(){return I.H.useId()},ye.useImperativeHandle=function(E,M,H){return I.H.useImperativeHandle(E,M,H)},ye.useInsertionEffect=function(E,M){return I.H.useInsertionEffect(E,M)},ye.useLayoutEffect=function(E,M){return I.H.useLayoutEffect(E,M)},ye.useMemo=function(E,M){return I.H.useMemo(E,M)},ye.useOptimistic=function(E,M){return I.H.useOptimistic(E,M)},ye.useReducer=function(E,M,H){return I.H.useReducer(E,M,H)},ye.useRef=function(E){return I.H.useRef(E)},ye.useState=function(E){return I.H.useState(E)},ye.useSyncExternalStore=function(E,M,H){return I.H.useSyncExternalStore(E,M,H)},ye.useTransition=function(){return I.H.useTransition()},ye.version="19.1.0",ye}var gy;function sf(){return gy||(gy=1,Oc.exports=vw()),Oc.exports}var un=sf(),Ac={exports:{}},qi={},Rc={exports:{}},xc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y;function ww(){return _y||(_y=1,function(u){function t(C,U){var G=C.length;C.push(U);e:for(;0<G;){var Q=G-1>>>1,E=C[Q];if(0<s(E,U))C[Q]=U,C[G]=E,G=Q;else break e}}function a(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var U=C[0],G=C.pop();if(G!==U){C[0]=G;e:for(var Q=0,E=C.length,M=E>>>1;Q<M;){var H=2*(Q+1)-1,Z=C[H],ee=H+1,oe=C[ee];if(0>s(Z,G))ee<E&&0>s(oe,Z)?(C[Q]=oe,C[ee]=G,Q=ee):(C[Q]=Z,C[H]=G,Q=H);else if(ee<E&&0>s(oe,G))C[Q]=oe,C[ee]=G,Q=ee;else break e}}return U}function s(C,U){var G=C.sortIndex-U.sortIndex;return G!==0?G:C.id-U.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;u.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();u.unstable_now=function(){return c.now()-f}}var p=[],h=[],y=1,_=null,b=3,w=!1,S=!1,T=!1,R=!1,k=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function Y(C){for(var U=a(h);U!==null;){if(U.callback===null)r(h);else if(U.startTime<=C)r(h),U.sortIndex=U.expirationTime,t(p,U);else break;U=a(h)}}function I(C){if(T=!1,Y(C),!S)if(a(p)!==null)S=!0,K||(K=!0,He());else{var U=a(h);U!==null&&V(I,U.startTime-C)}}var K=!1,re=-1,J=5,Me=-1;function Be(){return R?!0:!(u.unstable_now()-Me<J)}function Qe(){if(R=!1,K){var C=u.unstable_now();Me=C;var U=!0;try{e:{S=!1,T&&(T=!1,q(re),re=-1),w=!0;var G=b;try{t:{for(Y(C),_=a(p);_!==null&&!(_.expirationTime>C&&Be());){var Q=_.callback;if(typeof Q=="function"){_.callback=null,b=_.priorityLevel;var E=Q(_.expirationTime<=C);if(C=u.unstable_now(),typeof E=="function"){_.callback=E,Y(C),U=!0;break t}_===a(p)&&r(p),Y(C)}else r(p);_=a(p)}if(_!==null)U=!0;else{var M=a(h);M!==null&&V(I,M.startTime-C),U=!1}}break e}finally{_=null,b=G,w=!1}U=void 0}}finally{U?He():K=!1}}}var He;if(typeof N=="function")He=function(){N(Qe)};else if(typeof MessageChannel<"u"){var Et=new MessageChannel,W=Et.port2;Et.port1.onmessage=Qe,He=function(){W.postMessage(null)}}else He=function(){k(Qe,0)};function V(C,U){re=k(function(){C(u.unstable_now())},U)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(C){C.callback=null},u.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<C?Math.floor(1e3/C):5},u.unstable_getCurrentPriorityLevel=function(){return b},u.unstable_next=function(C){switch(b){case 1:case 2:case 3:var U=3;break;default:U=b}var G=b;b=U;try{return C()}finally{b=G}},u.unstable_requestPaint=function(){R=!0},u.unstable_runWithPriority=function(C,U){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var G=b;b=C;try{return U()}finally{b=G}},u.unstable_scheduleCallback=function(C,U,G){var Q=u.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Q+G:Q):G=Q,C){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=G+E,C={id:y++,callback:U,priorityLevel:C,startTime:G,expirationTime:E,sortIndex:-1},G>Q?(C.sortIndex=G,t(h,C),a(p)===null&&C===a(h)&&(T?(q(re),re=-1):T=!0,V(I,G-Q))):(C.sortIndex=E,t(p,C),S||w||(S=!0,K||(K=!0,He()))),C},u.unstable_shouldYield=Be,u.unstable_wrapCallback=function(C){var U=b;return function(){var G=b;b=U;try{return C.apply(this,arguments)}finally{b=G}}}}(xc)),xc}var by;function Sw(){return by||(by=1,Rc.exports=ww()),Rc.exports}var Cc={exports:{}},pt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function Ew(){if(vy)return pt;vy=1;var u=sf();function t(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(p,h,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:_==null?null:""+_,children:p,containerInfo:h,implementation:y}}var c=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return pt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,pt.createPortal=function(p,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(p,h,null,y)},pt.flushSync=function(p){var h=c.T,y=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=h,r.p=y,r.d.f()}},pt.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(p,h))},pt.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},pt.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var y=h.as,_=f(y,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?r.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:w}):y==="script"&&r.d.X(p,{crossOrigin:_,integrity:b,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},pt.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=f(h.as,h.crossOrigin);r.d.M(p,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(p)},pt.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,_=f(y,h.crossOrigin);r.d.L(p,y,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},pt.preloadModule=function(p,h){if(typeof p=="string")if(h){var y=f(h.as,h.crossOrigin);r.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(p)},pt.requestFormReset=function(p){r.d.r(p)},pt.unstable_batchedUpdates=function(p,h){return p(h)},pt.useFormState=function(p,h,y){return c.H.useFormState(p,h,y)},pt.useFormStatus=function(){return c.H.useHostTransitionStatus()},pt.version="19.1.0",pt}var wy;function Tw(){if(wy)return Cc.exports;wy=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(t){console.error(t)}}return u(),Cc.exports=Ew(),Cc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy;function Ow(){if(Sy)return qi;Sy=1;var u=Sw(),t=sf(),a=Tw();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function c(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function f(e){if(o(e)!==e)throw Error(r(188))}function p(e){var n=e.alternate;if(!n){if(n=o(e),n===null)throw Error(r(188));return n!==e?null:e}for(var i=e,l=n;;){var d=i.return;if(d===null)break;var m=d.alternate;if(m===null){if(l=d.return,l!==null){i=l;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===i)return f(d),e;if(m===l)return f(d),n;m=m.sibling}throw Error(r(188))}if(i.return!==l.return)i=d,l=m;else{for(var g=!1,v=d.child;v;){if(v===i){g=!0,i=d,l=m;break}if(v===l){g=!0,l=d,i=m;break}v=v.sibling}if(!g){for(v=m.child;v;){if(v===i){g=!0,i=m,l=d;break}if(v===l){g=!0,l=m,i=d;break}v=v.sibling}if(!g)throw Error(r(189))}}if(i.alternate!==l)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:n}function h(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=h(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),N=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),Me=Symbol.for("react.activity"),Be=Symbol.for("react.memo_cache_sentinel"),Qe=Symbol.iterator;function He(e){return e===null||typeof e!="object"?null:(e=Qe&&e[Qe]||e["@@iterator"],typeof e=="function"?e:null)}var Et=Symbol.for("react.client.reference");function W(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Et?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case R:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case K:return"SuspenseList";case Me:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case N:return(e.displayName||"Context")+".Provider";case q:return(e._context.displayName||"Context")+".Consumer";case Y:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return n=e.displayName||null,n!==null?n:W(e.type)||"Memo";case J:n=e._payload,e=e._init;try{return W(e(n))}catch{}}return null}var V=Array.isArray,C=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},Q=[],E=-1;function M(e){return{current:e}}function H(e){0>E||(e.current=Q[E],Q[E]=null,E--)}function Z(e,n){E++,Q[E]=e.current,e.current=n}var ee=M(null),oe=M(null),ce=M(null),Fe=M(null);function Ue(e,n){switch(Z(ce,n),Z(oe,e),Z(ee,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Bp(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Bp(n),e=Hp(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(ee),Z(ee,e)}function Ht(){H(ee),H(oe),H(ce)}function Sa(e){e.memoizedState!==null&&Z(Fe,e);var n=ee.current,i=Hp(n,e.type);n!==i&&(Z(oe,e),Z(ee,i))}function Za(e){oe.current===e&&(H(ee),H(oe)),Fe.current===e&&(H(Fe),Di._currentValue=G)}var ol=Object.prototype.hasOwnProperty,cl=u.unstable_scheduleCallback,dl=u.unstable_cancelCallback,X_=u.unstable_shouldYield,Q_=u.unstable_requestPaint,fn=u.unstable_now,F_=u.unstable_getCurrentPriorityLevel,Sf=u.unstable_ImmediatePriority,Ef=u.unstable_UserBlockingPriority,ds=u.unstable_NormalPriority,J_=u.unstable_LowPriority,Tf=u.unstable_IdlePriority,K_=u.log,W_=u.unstable_setDisableYieldValue,Hr=null,Nt=null;function qn(e){if(typeof K_=="function"&&W_(e),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(Hr,e)}catch{}}var jt=Math.clz32?Math.clz32:nb,eb=Math.log,tb=Math.LN2;function nb(e){return e>>>=0,e===0?32:31-(eb(e)/tb|0)|0}var fs=256,hs=4194304;function Ea(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ms(e,n,i){var l=e.pendingLanes;if(l===0)return 0;var d=0,m=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var v=l&134217727;return v!==0?(l=v&~m,l!==0?d=Ea(l):(g&=v,g!==0?d=Ea(g):i||(i=v&~e,i!==0&&(d=Ea(i))))):(v=l&~m,v!==0?d=Ea(v):g!==0?d=Ea(g):i||(i=l&~e,i!==0&&(d=Ea(i)))),d===0?0:n!==0&&n!==d&&(n&m)===0&&(m=d&-d,i=n&-n,m>=i||m===32&&(i&4194048)!==0)?n:d}function Gr(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function ab(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Of(){var e=fs;return fs<<=1,(fs&4194048)===0&&(fs=256),e}function Af(){var e=hs;return hs<<=1,(hs&62914560)===0&&(hs=4194304),e}function fl(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function Zr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function rb(e,n,i,l,d,m){var g=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var v=e.entanglements,O=e.expirationTimes,L=e.hiddenUpdates;for(i=g&~i;0<i;){var z=31-jt(i),B=1<<z;v[z]=0,O[z]=-1;var $=L[z];if($!==null)for(L[z]=null,z=0;z<$.length;z++){var D=$[z];D!==null&&(D.lane&=-536870913)}i&=~B}l!==0&&Rf(e,l,0),m!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=m&~(g&~n))}function Rf(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-jt(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|i&4194090}function xf(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var l=31-jt(i),d=1<<l;d&n|e[l]&n&&(e[l]|=n),i&=~d}}function hl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ml(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Cf(){var e=U.p;return e!==0?e:(e=window.event,e===void 0?32:ly(e.type))}function ib(e,n){var i=U.p;try{return U.p=e,n()}finally{U.p=i}}var Bn=Math.random().toString(36).slice(2),ht="__reactFiber$"+Bn,Tt="__reactProps$"+Bn,Va="__reactContainer$"+Bn,pl="__reactEvents$"+Bn,sb="__reactListeners$"+Bn,ub="__reactHandles$"+Bn,Nf="__reactResources$"+Bn,Vr="__reactMarker$"+Bn;function yl(e){delete e[ht],delete e[Tt],delete e[pl],delete e[sb],delete e[ub]}function Ya(e){var n=e[ht];if(n)return n;for(var i=e.parentNode;i;){if(n=i[Va]||i[ht]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=Yp(e);e!==null;){if(i=e[ht])return i;e=Yp(e)}return n}e=i,i=e.parentNode}return null}function Xa(e){if(e=e[ht]||e[Va]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function Yr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function Qa(e){var n=e[Nf];return n||(n=e[Nf]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function rt(e){e[Vr]=!0}var jf=new Set,Lf={};function Ta(e,n){Fa(e,n),Fa(e+"Capture",n)}function Fa(e,n){for(Lf[e]=n,e=0;e<n.length;e++)jf.add(n[e])}var lb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kf={},$f={};function ob(e){return ol.call($f,e)?!0:ol.call(kf,e)?!1:lb.test(e)?$f[e]=!0:(kf[e]=!0,!1)}function ps(e,n,i){if(ob(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function ys(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function vn(e,n,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+l)}}var gl,Df;function Ja(e){if(gl===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);gl=n&&n[1]||"",Df=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gl+e+Df}var _l=!1;function bl(e,n){if(!e||_l)return"";_l=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var B=function(){throw Error()};if(Object.defineProperty(B.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(B,[])}catch(D){var $=D}Reflect.construct(e,[],B)}else{try{B.call()}catch(D){$=D}e.call(B.prototype)}}else{try{throw Error()}catch(D){$=D}(B=e())&&typeof B.catch=="function"&&B.catch(function(){})}}catch(D){if(D&&$&&typeof D.stack=="string")return[D.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),g=m[0],v=m[1];if(g&&v){var O=g.split(`
`),L=v.split(`
`);for(d=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;d<L.length&&!L[d].includes("DetermineComponentFrameRoot");)d++;if(l===O.length||d===L.length)for(l=O.length-1,d=L.length-1;1<=l&&0<=d&&O[l]!==L[d];)d--;for(;1<=l&&0<=d;l--,d--)if(O[l]!==L[d]){if(l!==1||d!==1)do if(l--,d--,0>d||O[l]!==L[d]){var z=`
`+O[l].replace(" at new "," at ");return e.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",e.displayName)),z}while(1<=l&&0<=d);break}}}finally{_l=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ja(i):""}function cb(e){switch(e.tag){case 26:case 27:case 5:return Ja(e.type);case 16:return Ja("Lazy");case 13:return Ja("Suspense");case 19:return Ja("SuspenseList");case 0:case 15:return bl(e.type,!1);case 11:return bl(e.type.render,!1);case 1:return bl(e.type,!0);case 31:return Ja("Activity");default:return""}}function Mf(e){try{var n="";do n+=cb(e),e=e.return;while(e);return n}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function Gt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Uf(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function db(e){var n=Uf(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,m=i.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(g){l=""+g,m.call(this,g)}}),Object.defineProperty(e,n,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function gs(e){e._valueTracker||(e._valueTracker=db(e))}function If(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return e&&(l=Uf(e)?e.checked?"true":"false":e.value),e=l,e!==i?(n.setValue(e),!0):!1}function _s(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var fb=/[\n"\\]/g;function Zt(e){return e.replace(fb,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function vl(e,n,i,l,d,m,g,v){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),n!=null?g==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Gt(n)):e.value!==""+Gt(n)&&(e.value=""+Gt(n)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),n!=null?wl(e,g,Gt(n)):i!=null?wl(e,g,Gt(i)):l!=null&&e.removeAttribute("value"),d==null&&m!=null&&(e.defaultChecked=!!m),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Gt(v):e.removeAttribute("name")}function zf(e,n,i,l,d,m,g,v){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||n!=null))return;i=i!=null?""+Gt(i):"",n=n!=null?""+Gt(n):i,v||n===e.value||(e.value=n),e.defaultValue=n}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=v?e.checked:!!l,e.defaultChecked=!!l,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g)}function wl(e,n,i){n==="number"&&_s(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Ka(e,n,i,l){if(e=e.options,n){n={};for(var d=0;d<i.length;d++)n["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=n.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Gt(i),n=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function Pf(e,n,i){if(n!=null&&(n=""+Gt(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+Gt(i):""}function qf(e,n,i,l){if(n==null){if(l!=null){if(i!=null)throw Error(r(92));if(V(l)){if(1<l.length)throw Error(r(93));l=l[0]}i=l}i==null&&(i=""),n=i}i=Gt(n),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l)}function Wa(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var hb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bf(e,n,i){var l=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,i):typeof i!="number"||i===0||hb.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function Hf(e,n,i){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in n)l=n[d],n.hasOwnProperty(d)&&i[d]!==l&&Bf(e,d,l)}else for(var m in n)n.hasOwnProperty(m)&&Bf(e,m,n[m])}function Sl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bs(e){return pb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var El=null;function Tl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var er=null,tr=null;function Gf(e){var n=Xa(e);if(n&&(e=n.stateNode)){var i=e[Tt]||null;e:switch(e=n.stateNode,n.type){case"input":if(vl(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Zt(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==e&&l.form===e.form){var d=l[Tt]||null;if(!d)throw Error(r(90));vl(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<i.length;n++)l=i[n],l.form===e.form&&If(l)}break e;case"textarea":Pf(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&Ka(e,!!i.multiple,n,!1)}}}var Ol=!1;function Zf(e,n,i){if(Ol)return e(n,i);Ol=!0;try{var l=e(n);return l}finally{if(Ol=!1,(er!==null||tr!==null)&&(ru(),er&&(n=er,e=tr,tr=er=null,Gf(n),e)))for(n=0;n<e.length;n++)Gf(e[n])}}function Xr(e,n){var i=e.stateNode;if(i===null)return null;var l=i[Tt]||null;if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,n,typeof i));return i}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Al=!1;if(wn)try{var Qr={};Object.defineProperty(Qr,"passive",{get:function(){Al=!0}}),window.addEventListener("test",Qr,Qr),window.removeEventListener("test",Qr,Qr)}catch{Al=!1}var Hn=null,Rl=null,vs=null;function Vf(){if(vs)return vs;var e,n=Rl,i=n.length,l,d="value"in Hn?Hn.value:Hn.textContent,m=d.length;for(e=0;e<i&&n[e]===d[e];e++);var g=i-e;for(l=1;l<=g&&n[i-l]===d[m-l];l++);return vs=d.slice(e,1<l?1-l:void 0)}function ws(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ss(){return!0}function Yf(){return!1}function Ot(e){function n(i,l,d,m,g){this._reactName=i,this._targetInst=d,this.type=l,this.nativeEvent=m,this.target=g,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(i=e[v],this[v]=i?i(m):m[v]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ss:Yf,this.isPropagationStopped=Yf,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ss)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ss)},persist:function(){},isPersistent:Ss}),n}var Oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Es=Ot(Oa),Fr=y({},Oa,{view:0,detail:0}),yb=Ot(Fr),xl,Cl,Jr,Ts=y({},Fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jr&&(Jr&&e.type==="mousemove"?(xl=e.screenX-Jr.screenX,Cl=e.screenY-Jr.screenY):Cl=xl=0,Jr=e),xl)},movementY:function(e){return"movementY"in e?e.movementY:Cl}}),Xf=Ot(Ts),gb=y({},Ts,{dataTransfer:0}),_b=Ot(gb),bb=y({},Fr,{relatedTarget:0}),Nl=Ot(bb),vb=y({},Oa,{animationName:0,elapsedTime:0,pseudoElement:0}),wb=Ot(vb),Sb=y({},Oa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Eb=Ot(Sb),Tb=y({},Oa,{data:0}),Qf=Ot(Tb),Ob={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ab={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xb(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Rb[e])?!!n[e]:!1}function jl(){return xb}var Cb=y({},Fr,{key:function(e){if(e.key){var n=Ob[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ws(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ab[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jl,charCode:function(e){return e.type==="keypress"?ws(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ws(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nb=Ot(Cb),jb=y({},Ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ff=Ot(jb),Lb=y({},Fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jl}),kb=Ot(Lb),$b=y({},Oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Db=Ot($b),Mb=y({},Ts,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ub=Ot(Mb),Ib=y({},Oa,{newState:0,oldState:0}),zb=Ot(Ib),Pb=[9,13,27,32],Ll=wn&&"CompositionEvent"in window,Kr=null;wn&&"documentMode"in document&&(Kr=document.documentMode);var qb=wn&&"TextEvent"in window&&!Kr,Jf=wn&&(!Ll||Kr&&8<Kr&&11>=Kr),Kf=" ",Wf=!1;function eh(e,n){switch(e){case"keyup":return Pb.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function th(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nr=!1;function Bb(e,n){switch(e){case"compositionend":return th(n);case"keypress":return n.which!==32?null:(Wf=!0,Kf);case"textInput":return e=n.data,e===Kf&&Wf?null:e;default:return null}}function Hb(e,n){if(nr)return e==="compositionend"||!Ll&&eh(e,n)?(e=Vf(),vs=Rl=Hn=null,nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Jf&&n.locale!=="ko"?null:n.data;default:return null}}var Gb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Gb[e.type]:n==="textarea"}function ah(e,n,i,l){er?tr?tr.push(l):tr=[l]:er=l,n=cu(n,"onChange"),0<n.length&&(i=new Es("onChange","change",null,i,l),e.push({event:i,listeners:n}))}var Wr=null,ei=null;function Zb(e){Up(e,0)}function Os(e){var n=Yr(e);if(If(n))return e}function rh(e,n){if(e==="change")return n}var ih=!1;if(wn){var kl;if(wn){var $l="oninput"in document;if(!$l){var sh=document.createElement("div");sh.setAttribute("oninput","return;"),$l=typeof sh.oninput=="function"}kl=$l}else kl=!1;ih=kl&&(!document.documentMode||9<document.documentMode)}function uh(){Wr&&(Wr.detachEvent("onpropertychange",lh),ei=Wr=null)}function lh(e){if(e.propertyName==="value"&&Os(ei)){var n=[];ah(n,ei,e,Tl(e)),Zf(Zb,n)}}function Vb(e,n,i){e==="focusin"?(uh(),Wr=n,ei=i,Wr.attachEvent("onpropertychange",lh)):e==="focusout"&&uh()}function Yb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Os(ei)}function Xb(e,n){if(e==="click")return Os(n)}function Qb(e,n){if(e==="input"||e==="change")return Os(n)}function Fb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Lt=typeof Object.is=="function"?Object.is:Fb;function ti(e,n){if(Lt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var d=i[l];if(!ol.call(n,d)||!Lt(e[d],n[d]))return!1}return!0}function oh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ch(e,n){var i=oh(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=n&&l>=n)return{node:i,offset:n-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=oh(i)}}function dh(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?dh(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function fh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=_s(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=_s(e.document)}return n}function Dl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Jb=wn&&"documentMode"in document&&11>=document.documentMode,ar=null,Ml=null,ni=null,Ul=!1;function hh(e,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ul||ar==null||ar!==_s(l)||(l=ar,"selectionStart"in l&&Dl(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ni&&ti(ni,l)||(ni=l,l=cu(Ml,"onSelect"),0<l.length&&(n=new Es("onSelect","select",null,n,i),e.push({event:n,listeners:l}),n.target=ar)))}function Aa(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var rr={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionrun:Aa("Transition","TransitionRun"),transitionstart:Aa("Transition","TransitionStart"),transitioncancel:Aa("Transition","TransitionCancel"),transitionend:Aa("Transition","TransitionEnd")},Il={},mh={};wn&&(mh=document.createElement("div").style,"AnimationEvent"in window||(delete rr.animationend.animation,delete rr.animationiteration.animation,delete rr.animationstart.animation),"TransitionEvent"in window||delete rr.transitionend.transition);function Ra(e){if(Il[e])return Il[e];if(!rr[e])return e;var n=rr[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in mh)return Il[e]=n[i];return e}var ph=Ra("animationend"),yh=Ra("animationiteration"),gh=Ra("animationstart"),Kb=Ra("transitionrun"),Wb=Ra("transitionstart"),ev=Ra("transitioncancel"),_h=Ra("transitionend"),bh=new Map,zl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zl.push("scrollEnd");function tn(e,n){bh.set(e,n),Ta(n,[e])}var vh=new WeakMap;function Vt(e,n){if(typeof e=="object"&&e!==null){var i=vh.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Mf(n)},vh.set(e,n),n)}return{value:e,source:n,stack:Mf(n)}}var Yt=[],ir=0,Pl=0;function As(){for(var e=ir,n=Pl=ir=0;n<e;){var i=Yt[n];Yt[n++]=null;var l=Yt[n];Yt[n++]=null;var d=Yt[n];Yt[n++]=null;var m=Yt[n];if(Yt[n++]=null,l!==null&&d!==null){var g=l.pending;g===null?d.next=d:(d.next=g.next,g.next=d),l.pending=d}m!==0&&wh(i,d,m)}}function Rs(e,n,i,l){Yt[ir++]=e,Yt[ir++]=n,Yt[ir++]=i,Yt[ir++]=l,Pl|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function ql(e,n,i,l){return Rs(e,n,i,l),xs(e)}function sr(e,n){return Rs(e,null,null,n),xs(e)}function wh(e,n,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var d=!1,m=e.return;m!==null;)m.childLanes|=i,l=m.alternate,l!==null&&(l.childLanes|=i),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(d=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,d&&n!==null&&(d=31-jt(i),e=m.hiddenUpdates,l=e[d],l===null?e[d]=[n]:l.push(n),n.lane=i|536870912),m):null}function xs(e){if(50<Ri)throw Ri=0,Xo=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ur={};function tv(e,n,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,n,i,l){return new tv(e,n,i,l)}function Bl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Sn(e,n){var i=e.alternate;return i===null?(i=kt(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Sh(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Cs(e,n,i,l,d,m){var g=0;if(l=e,typeof e=="function")Bl(e)&&(g=1);else if(typeof e=="string")g=aw(e,i,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Me:return e=kt(31,i,n,d),e.elementType=Me,e.lanes=m,e;case S:return xa(i.children,d,m,n);case T:g=8,d|=24;break;case R:return e=kt(12,i,n,d|2),e.elementType=R,e.lanes=m,e;case I:return e=kt(13,i,n,d),e.elementType=I,e.lanes=m,e;case K:return e=kt(19,i,n,d),e.elementType=K,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k:case N:g=10;break e;case q:g=9;break e;case Y:g=11;break e;case re:g=14;break e;case J:g=16,l=null;break e}g=29,i=Error(r(130,e===null?"null":typeof e,"")),l=null}return n=kt(g,i,n,d),n.elementType=e,n.type=l,n.lanes=m,n}function xa(e,n,i,l){return e=kt(7,e,l,n),e.lanes=i,e}function Hl(e,n,i){return e=kt(6,e,null,n),e.lanes=i,e}function Gl(e,n,i){return n=kt(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var lr=[],or=0,Ns=null,js=0,Xt=[],Qt=0,Ca=null,En=1,Tn="";function Na(e,n){lr[or++]=js,lr[or++]=Ns,Ns=e,js=n}function Eh(e,n,i){Xt[Qt++]=En,Xt[Qt++]=Tn,Xt[Qt++]=Ca,Ca=e;var l=En;e=Tn;var d=32-jt(l)-1;l&=~(1<<d),i+=1;var m=32-jt(n)+d;if(30<m){var g=d-d%5;m=(l&(1<<g)-1).toString(32),l>>=g,d-=g,En=1<<32-jt(n)+d|i<<d|l,Tn=m+e}else En=1<<m|i<<d|l,Tn=e}function Zl(e){e.return!==null&&(Na(e,1),Eh(e,1,0))}function Vl(e){for(;e===Ns;)Ns=lr[--or],lr[or]=null,js=lr[--or],lr[or]=null;for(;e===Ca;)Ca=Xt[--Qt],Xt[Qt]=null,Tn=Xt[--Qt],Xt[Qt]=null,En=Xt[--Qt],Xt[Qt]=null}var gt=null,Ze=null,Re=!1,ja=null,hn=!1,Yl=Error(r(519));function La(e){var n=Error(r(418,""));throw ii(Vt(n,e)),Yl}function Th(e){var n=e.stateNode,i=e.type,l=e.memoizedProps;switch(n[ht]=e,n[Tt]=l,i){case"dialog":Se("cancel",n),Se("close",n);break;case"iframe":case"object":case"embed":Se("load",n);break;case"video":case"audio":for(i=0;i<Ci.length;i++)Se(Ci[i],n);break;case"source":Se("error",n);break;case"img":case"image":case"link":Se("error",n),Se("load",n);break;case"details":Se("toggle",n);break;case"input":Se("invalid",n),zf(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),gs(n);break;case"select":Se("invalid",n);break;case"textarea":Se("invalid",n),qf(n,l.value,l.defaultValue,l.children),gs(n)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||l.suppressHydrationWarning===!0||qp(n.textContent,i)?(l.popover!=null&&(Se("beforetoggle",n),Se("toggle",n)),l.onScroll!=null&&Se("scroll",n),l.onScrollEnd!=null&&Se("scrollend",n),l.onClick!=null&&(n.onclick=du),n=!0):n=!1,n||La(e)}function Oh(e){for(gt=e.return;gt;)switch(gt.tag){case 5:case 13:hn=!1;return;case 27:case 3:hn=!0;return;default:gt=gt.return}}function ai(e){if(e!==gt)return!1;if(!Re)return Oh(e),Re=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||cc(e.type,e.memoizedProps)),i=!i),i&&Ze&&La(e),Oh(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(n===0){Ze=an(e.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++;e=e.nextSibling}Ze=null}}else n===27?(n=Ze,ia(e.type)?(e=mc,mc=null,Ze=e):Ze=n):Ze=gt?an(e.stateNode.nextSibling):null;return!0}function ri(){Ze=gt=null,Re=!1}function Ah(){var e=ja;return e!==null&&(xt===null?xt=e:xt.push.apply(xt,e),ja=null),e}function ii(e){ja===null?ja=[e]:ja.push(e)}var Xl=M(null),ka=null,On=null;function Gn(e,n,i){Z(Xl,n._currentValue),n._currentValue=i}function An(e){e._currentValue=Xl.current,H(Xl)}function Ql(e,n,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===i)break;e=e.return}}function Fl(e,n,i,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var m=d.dependencies;if(m!==null){var g=d.child;m=m.firstContext;e:for(;m!==null;){var v=m;m=d;for(var O=0;O<n.length;O++)if(v.context===n[O]){m.lanes|=i,v=m.alternate,v!==null&&(v.lanes|=i),Ql(m.return,i,e),l||(g=null);break e}m=v.next}}else if(d.tag===18){if(g=d.return,g===null)throw Error(r(341));g.lanes|=i,m=g.alternate,m!==null&&(m.lanes|=i),Ql(g,i,e),g=null}else g=d.child;if(g!==null)g.return=d;else for(g=d;g!==null;){if(g===e){g=null;break}if(d=g.sibling,d!==null){d.return=g.return,g=d;break}g=g.return}d=g}}function si(e,n,i,l){e=null;for(var d=n,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var g=d.alternate;if(g===null)throw Error(r(387));if(g=g.memoizedProps,g!==null){var v=d.type;Lt(d.pendingProps.value,g.value)||(e!==null?e.push(v):e=[v])}}else if(d===Fe.current){if(g=d.alternate,g===null)throw Error(r(387));g.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Di):e=[Di])}d=d.return}e!==null&&Fl(n,e,i,l),n.flags|=262144}function Ls(e){for(e=e.firstContext;e!==null;){if(!Lt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $a(e){ka=e,On=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function mt(e){return Rh(ka,e)}function ks(e,n){return ka===null&&$a(e),Rh(e,n)}function Rh(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},On===null){if(e===null)throw Error(r(308));On=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else On=On.next=n;return i}var nv=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},av=u.unstable_scheduleCallback,rv=u.unstable_NormalPriority,tt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jl(){return{controller:new nv,data:new Map,refCount:0}}function ui(e){e.refCount--,e.refCount===0&&av(rv,function(){e.controller.abort()})}var li=null,Kl=0,cr=0,dr=null;function iv(e,n){if(li===null){var i=li=[];Kl=0,cr=tc(),dr={status:"pending",value:void 0,then:function(l){i.push(l)}}}return Kl++,n.then(xh,xh),n}function xh(){if(--Kl===0&&li!==null){dr!==null&&(dr.status="fulfilled");var e=li;li=null,cr=0,dr=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function sv(e,n){var i=[],l={status:"pending",value:null,reason:null,then:function(d){i.push(d)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var d=0;d<i.length;d++)(0,i[d])(n)},function(d){for(l.status="rejected",l.reason=d,d=0;d<i.length;d++)(0,i[d])(void 0)}),l}var Ch=C.S;C.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&iv(e,n),Ch!==null&&Ch(e,n)};var Da=M(null);function Wl(){var e=Da.current;return e!==null?e:ze.pooledCache}function $s(e,n){n===null?Z(Da,Da.current):Z(Da,n.pool)}function Nh(){var e=Wl();return e===null?null:{parent:tt._currentValue,pool:e}}var oi=Error(r(460)),jh=Error(r(474)),Ds=Error(r(542)),eo={then:function(){}};function Lh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ms(){}function kh(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(Ms,Ms),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Dh(e),e;default:if(typeof n.status=="string")n.then(Ms,Ms);else{if(e=ze,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=l}},function(l){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Dh(e),e}throw ci=n,oi}}var ci=null;function $h(){if(ci===null)throw Error(r(459));var e=ci;return ci=null,e}function Dh(e){if(e===oi||e===Ds)throw Error(r(483))}var Zn=!1;function to(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function no(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Vn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Yn(e,n,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ce&2)!==0){var d=l.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),l.pending=n,n=xs(e),wh(e,null,i),n}return Rs(e,l,n,i),xs(e)}function di(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,xf(e,i)}}function ao(e,n){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var d=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?d=m=g:m=m.next=g,i=i.next}while(i!==null);m===null?d=m=n:m=m.next=n}else d=m=n;i={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var ro=!1;function fi(){if(ro){var e=dr;if(e!==null)throw e}}function hi(e,n,i,l){ro=!1;var d=e.updateQueue;Zn=!1;var m=d.firstBaseUpdate,g=d.lastBaseUpdate,v=d.shared.pending;if(v!==null){d.shared.pending=null;var O=v,L=O.next;O.next=null,g===null?m=L:g.next=L,g=O;var z=e.alternate;z!==null&&(z=z.updateQueue,v=z.lastBaseUpdate,v!==g&&(v===null?z.firstBaseUpdate=L:v.next=L,z.lastBaseUpdate=O))}if(m!==null){var B=d.baseState;g=0,z=L=O=null,v=m;do{var $=v.lane&-536870913,D=$!==v.lane;if(D?(Ee&$)===$:(l&$)===$){$!==0&&$===cr&&(ro=!0),z!==null&&(z=z.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var he=e,de=v;$=n;var $e=i;switch(de.tag){case 1:if(he=de.payload,typeof he=="function"){B=he.call($e,B,$);break e}B=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=de.payload,$=typeof he=="function"?he.call($e,B,$):he,$==null)break e;B=y({},B,$);break e;case 2:Zn=!0}}$=v.callback,$!==null&&(e.flags|=64,D&&(e.flags|=8192),D=d.callbacks,D===null?d.callbacks=[$]:D.push($))}else D={lane:$,tag:v.tag,payload:v.payload,callback:v.callback,next:null},z===null?(L=z=D,O=B):z=z.next=D,g|=$;if(v=v.next,v===null){if(v=d.shared.pending,v===null)break;D=v,v=D.next,D.next=null,d.lastBaseUpdate=D,d.shared.pending=null}}while(!0);z===null&&(O=B),d.baseState=O,d.firstBaseUpdate=L,d.lastBaseUpdate=z,m===null&&(d.shared.lanes=0),ta|=g,e.lanes=g,e.memoizedState=B}}function Mh(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function Uh(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Mh(i[e],n)}var fr=M(null),Us=M(0);function Ih(e,n){e=kn,Z(Us,e),Z(fr,n),kn=e|n.baseLanes}function io(){Z(Us,kn),Z(fr,fr.current)}function so(){kn=Us.current,H(fr),H(Us)}var Xn=0,_e=null,Le=null,Je=null,Is=!1,hr=!1,Ma=!1,zs=0,mi=0,mr=null,uv=0;function Ye(){throw Error(r(321))}function uo(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!Lt(e[i],n[i]))return!1;return!0}function lo(e,n,i,l,d,m){return Xn=m,_e=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,C.H=e===null||e.memoizedState===null?wm:Sm,Ma=!1,m=i(l,d),Ma=!1,hr&&(m=Ph(n,i,l,d)),zh(e),m}function zh(e){C.H=Zs;var n=Le!==null&&Le.next!==null;if(Xn=0,Je=Le=_e=null,Is=!1,mi=0,mr=null,n)throw Error(r(300));e===null||it||(e=e.dependencies,e!==null&&Ls(e)&&(it=!0))}function Ph(e,n,i,l){_e=e;var d=0;do{if(hr&&(mr=null),mi=0,hr=!1,25<=d)throw Error(r(301));if(d+=1,Je=Le=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}C.H=mv,m=n(i,l)}while(hr);return m}function lv(){var e=C.H,n=e.useState()[0];return n=typeof n.then=="function"?pi(n):n,e=e.useState()[0],(Le!==null?Le.memoizedState:null)!==e&&(_e.flags|=1024),n}function oo(){var e=zs!==0;return zs=0,e}function co(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function fo(e){if(Is){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Is=!1}Xn=0,Je=Le=_e=null,hr=!1,mi=zs=0,mr=null}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?_e.memoizedState=Je=e:Je=Je.next=e,Je}function Ke(){if(Le===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var n=Je===null?_e.memoizedState:Je.next;if(n!==null)Je=n,Le=e;else{if(e===null)throw _e.alternate===null?Error(r(467)):Error(r(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Je===null?_e.memoizedState=Je=e:Je=Je.next=e}return Je}function ho(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pi(e){var n=mi;return mi+=1,mr===null&&(mr=[]),e=kh(mr,e,n),n=_e,(Je===null?n.memoizedState:Je.next)===null&&(n=n.alternate,C.H=n===null||n.memoizedState===null?wm:Sm),e}function Ps(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return pi(e);if(e.$$typeof===N)return mt(e)}throw Error(r(438,String(e)))}function mo(e){var n=null,i=_e.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var l=_e.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=ho(),_e.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),l=0;l<e;l++)i[l]=Be;return n.index++,i}function Rn(e,n){return typeof n=="function"?n(e):n}function qs(e){var n=Ke();return po(n,Le,e)}function po(e,n,i){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var d=e.baseQueue,m=l.pending;if(m!==null){if(d!==null){var g=d.next;d.next=m.next,m.next=g}n.baseQueue=d=m,l.pending=null}if(m=e.baseState,d===null)e.memoizedState=m;else{n=d.next;var v=g=null,O=null,L=n,z=!1;do{var B=L.lane&-536870913;if(B!==L.lane?(Ee&B)===B:(Xn&B)===B){var $=L.revertLane;if($===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),B===cr&&(z=!0);else if((Xn&$)===$){L=L.next,$===cr&&(z=!0);continue}else B={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},O===null?(v=O=B,g=m):O=O.next=B,_e.lanes|=$,ta|=$;B=L.action,Ma&&i(m,B),m=L.hasEagerState?L.eagerState:i(m,B)}else $={lane:B,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},O===null?(v=O=$,g=m):O=O.next=$,_e.lanes|=B,ta|=B;L=L.next}while(L!==null&&L!==n);if(O===null?g=m:O.next=v,!Lt(m,e.memoizedState)&&(it=!0,z&&(i=dr,i!==null)))throw i;e.memoizedState=m,e.baseState=g,e.baseQueue=O,l.lastRenderedState=m}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function yo(e){var n=Ke(),i=n.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var l=i.dispatch,d=i.pending,m=n.memoizedState;if(d!==null){i.pending=null;var g=d=d.next;do m=e(m,g.action),g=g.next;while(g!==d);Lt(m,n.memoizedState)||(it=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),i.lastRenderedState=m}return[m,l]}function qh(e,n,i){var l=_e,d=Ke(),m=Re;if(m){if(i===void 0)throw Error(r(407));i=i()}else i=n();var g=!Lt((Le||d).memoizedState,i);g&&(d.memoizedState=i,it=!0),d=d.queue;var v=Gh.bind(null,l,d,e);if(yi(2048,8,v,[e]),d.getSnapshot!==n||g||Je!==null&&Je.memoizedState.tag&1){if(l.flags|=2048,pr(9,Bs(),Hh.bind(null,l,d,i,n),null),ze===null)throw Error(r(349));m||(Xn&124)!==0||Bh(l,n,i)}return i}function Bh(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=_e.updateQueue,n===null?(n=ho(),_e.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function Hh(e,n,i,l){n.value=i,n.getSnapshot=l,Zh(n)&&Vh(e)}function Gh(e,n,i){return i(function(){Zh(n)&&Vh(e)})}function Zh(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!Lt(e,i)}catch{return!0}}function Vh(e){var n=sr(e,2);n!==null&&It(n,e,2)}function go(e){var n=At();if(typeof e=="function"){var i=e;if(e=i(),Ma){qn(!0);try{i()}finally{qn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:e},n}function Yh(e,n,i,l){return e.baseState=i,po(e,Le,typeof l=="function"?l:Rn)}function ov(e,n,i,l,d){if(Gs(e))throw Error(r(485));if(e=n.action,e!==null){var m={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){m.listeners.push(g)}};C.T!==null?i(!0):m.isTransition=!1,l(m),i=n.pending,i===null?(m.next=n.pending=m,Xh(n,m)):(m.next=i.next,n.pending=i.next=m)}}function Xh(e,n){var i=n.action,l=n.payload,d=e.state;if(n.isTransition){var m=C.T,g={};C.T=g;try{var v=i(d,l),O=C.S;O!==null&&O(g,v),Qh(e,n,v)}catch(L){_o(e,n,L)}finally{C.T=m}}else try{m=i(d,l),Qh(e,n,m)}catch(L){_o(e,n,L)}}function Qh(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){Fh(e,n,l)},function(l){return _o(e,n,l)}):Fh(e,n,i)}function Fh(e,n,i){n.status="fulfilled",n.value=i,Jh(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,Xh(e,i)))}function _o(e,n,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=i,Jh(n),n=n.next;while(n!==l)}e.action=null}function Jh(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Kh(e,n){return n}function Wh(e,n){if(Re){var i=ze.formState;if(i!==null){e:{var l=_e;if(Re){if(Ze){t:{for(var d=Ze,m=hn;d.nodeType!==8;){if(!m){d=null;break t}if(d=an(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){Ze=an(d.nextSibling),l=d.data==="F!";break e}}La(l)}l=!1}l&&(n=i[0])}}return i=At(),i.memoizedState=i.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kh,lastRenderedState:n},i.queue=l,i=_m.bind(null,_e,l),l.dispatch=i,l=go(!1),m=Eo.bind(null,_e,!1,l.queue),l=At(),d={state:n,dispatch:null,action:e,pending:null},l.queue=d,i=ov.bind(null,_e,d,m,i),d.dispatch=i,l.memoizedState=e,[n,i,!1]}function em(e){var n=Ke();return tm(n,Le,e)}function tm(e,n,i){if(n=po(e,n,Kh)[0],e=qs(Rn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=pi(n)}catch(g){throw g===oi?Ds:g}else l=n;n=Ke();var d=n.queue,m=d.dispatch;return i!==n.memoizedState&&(_e.flags|=2048,pr(9,Bs(),cv.bind(null,d,i),null)),[l,m,e]}function cv(e,n){e.action=n}function nm(e){var n=Ke(),i=Le;if(i!==null)return tm(n,i,e);Ke(),n=n.memoizedState,i=Ke();var l=i.queue.dispatch;return i.memoizedState=e,[n,l,!1]}function pr(e,n,i,l){return e={tag:e,create:i,deps:l,inst:n,next:null},n=_e.updateQueue,n===null&&(n=ho(),_e.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,n.lastEffect=e),e}function Bs(){return{destroy:void 0,resource:void 0}}function am(){return Ke().memoizedState}function Hs(e,n,i,l){var d=At();l=l===void 0?null:l,_e.flags|=e,d.memoizedState=pr(1|n,Bs(),i,l)}function yi(e,n,i,l){var d=Ke();l=l===void 0?null:l;var m=d.memoizedState.inst;Le!==null&&l!==null&&uo(l,Le.memoizedState.deps)?d.memoizedState=pr(n,m,i,l):(_e.flags|=e,d.memoizedState=pr(1|n,m,i,l))}function rm(e,n){Hs(8390656,8,e,n)}function im(e,n){yi(2048,8,e,n)}function sm(e,n){return yi(4,2,e,n)}function um(e,n){return yi(4,4,e,n)}function lm(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function om(e,n,i){i=i!=null?i.concat([e]):null,yi(4,4,lm.bind(null,n,e),i)}function bo(){}function cm(e,n){var i=Ke();n=n===void 0?null:n;var l=i.memoizedState;return n!==null&&uo(n,l[1])?l[0]:(i.memoizedState=[e,n],e)}function dm(e,n){var i=Ke();n=n===void 0?null:n;var l=i.memoizedState;if(n!==null&&uo(n,l[1]))return l[0];if(l=e(),Ma){qn(!0);try{e()}finally{qn(!1)}}return i.memoizedState=[l,n],l}function vo(e,n,i){return i===void 0||(Xn&1073741824)!==0?e.memoizedState=n:(e.memoizedState=i,e=mp(),_e.lanes|=e,ta|=e,i)}function fm(e,n,i,l){return Lt(i,n)?i:fr.current!==null?(e=vo(e,i,l),Lt(e,n)||(it=!0),e):(Xn&42)===0?(it=!0,e.memoizedState=i):(e=mp(),_e.lanes|=e,ta|=e,n)}function hm(e,n,i,l,d){var m=U.p;U.p=m!==0&&8>m?m:8;var g=C.T,v={};C.T=v,Eo(e,!1,n,i);try{var O=d(),L=C.S;if(L!==null&&L(v,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var z=sv(O,l);gi(e,n,z,Ut(e))}else gi(e,n,l,Ut(e))}catch(B){gi(e,n,{then:function(){},status:"rejected",reason:B},Ut())}finally{U.p=m,C.T=g}}function dv(){}function wo(e,n,i,l){if(e.tag!==5)throw Error(r(476));var d=mm(e).queue;hm(e,d,n,G,i===null?dv:function(){return pm(e),i(l)})}function mm(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:G},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function pm(e){var n=mm(e).next.queue;gi(e,n,{},Ut())}function So(){return mt(Di)}function ym(){return Ke().memoizedState}function gm(){return Ke().memoizedState}function fv(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=Ut();e=Vn(i);var l=Yn(n,e,i);l!==null&&(It(l,n,i),di(l,n,i)),n={cache:Jl()},e.payload=n;return}n=n.return}}function hv(e,n,i){var l=Ut();i={lane:l,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Gs(e)?bm(n,i):(i=ql(e,n,i,l),i!==null&&(It(i,e,l),vm(i,n,l)))}function _m(e,n,i){var l=Ut();gi(e,n,i,l)}function gi(e,n,i,l){var d={lane:l,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Gs(e))bm(n,d);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var g=n.lastRenderedState,v=m(g,i);if(d.hasEagerState=!0,d.eagerState=v,Lt(v,g))return Rs(e,n,d,0),ze===null&&As(),!1}catch{}finally{}if(i=ql(e,n,d,l),i!==null)return It(i,e,l),vm(i,n,l),!0}return!1}function Eo(e,n,i,l){if(l={lane:2,revertLane:tc(),action:l,hasEagerState:!1,eagerState:null,next:null},Gs(e)){if(n)throw Error(r(479))}else n=ql(e,i,l,2),n!==null&&It(n,e,2)}function Gs(e){var n=e.alternate;return e===_e||n!==null&&n===_e}function bm(e,n){hr=Is=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function vm(e,n,i){if((i&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,i|=l,n.lanes=i,xf(e,i)}}var Zs={readContext:mt,use:Ps,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useLayoutEffect:Ye,useInsertionEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useSyncExternalStore:Ye,useId:Ye,useHostTransitionStatus:Ye,useFormState:Ye,useActionState:Ye,useOptimistic:Ye,useMemoCache:Ye,useCacheRefresh:Ye},wm={readContext:mt,use:Ps,useCallback:function(e,n){return At().memoizedState=[e,n===void 0?null:n],e},useContext:mt,useEffect:rm,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,Hs(4194308,4,lm.bind(null,n,e),i)},useLayoutEffect:function(e,n){return Hs(4194308,4,e,n)},useInsertionEffect:function(e,n){Hs(4,2,e,n)},useMemo:function(e,n){var i=At();n=n===void 0?null:n;var l=e();if(Ma){qn(!0);try{e()}finally{qn(!1)}}return i.memoizedState=[l,n],l},useReducer:function(e,n,i){var l=At();if(i!==void 0){var d=i(n);if(Ma){qn(!0);try{i(n)}finally{qn(!1)}}}else d=n;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=hv.bind(null,_e,e),[l.memoizedState,e]},useRef:function(e){var n=At();return e={current:e},n.memoizedState=e},useState:function(e){e=go(e);var n=e.queue,i=_m.bind(null,_e,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:bo,useDeferredValue:function(e,n){var i=At();return vo(i,e,n)},useTransition:function(){var e=go(!1);return e=hm.bind(null,_e,e.queue,!0,!1),At().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var l=_e,d=At();if(Re){if(i===void 0)throw Error(r(407));i=i()}else{if(i=n(),ze===null)throw Error(r(349));(Ee&124)!==0||Bh(l,n,i)}d.memoizedState=i;var m={value:i,getSnapshot:n};return d.queue=m,rm(Gh.bind(null,l,m,e),[e]),l.flags|=2048,pr(9,Bs(),Hh.bind(null,l,m,i,n),null),i},useId:function(){var e=At(),n=ze.identifierPrefix;if(Re){var i=Tn,l=En;i=(l&~(1<<32-jt(l)-1)).toString(32)+i,n=""+n+"R"+i,i=zs++,0<i&&(n+="H"+i.toString(32)),n+=""}else i=uv++,n=""+n+"r"+i.toString(32)+"";return e.memoizedState=n},useHostTransitionStatus:So,useFormState:Wh,useActionState:Wh,useOptimistic:function(e){var n=At();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Eo.bind(null,_e,!0,i),i.dispatch=n,[e,n]},useMemoCache:mo,useCacheRefresh:function(){return At().memoizedState=fv.bind(null,_e)}},Sm={readContext:mt,use:Ps,useCallback:cm,useContext:mt,useEffect:im,useImperativeHandle:om,useInsertionEffect:sm,useLayoutEffect:um,useMemo:dm,useReducer:qs,useRef:am,useState:function(){return qs(Rn)},useDebugValue:bo,useDeferredValue:function(e,n){var i=Ke();return fm(i,Le.memoizedState,e,n)},useTransition:function(){var e=qs(Rn)[0],n=Ke().memoizedState;return[typeof e=="boolean"?e:pi(e),n]},useSyncExternalStore:qh,useId:ym,useHostTransitionStatus:So,useFormState:em,useActionState:em,useOptimistic:function(e,n){var i=Ke();return Yh(i,Le,e,n)},useMemoCache:mo,useCacheRefresh:gm},mv={readContext:mt,use:Ps,useCallback:cm,useContext:mt,useEffect:im,useImperativeHandle:om,useInsertionEffect:sm,useLayoutEffect:um,useMemo:dm,useReducer:yo,useRef:am,useState:function(){return yo(Rn)},useDebugValue:bo,useDeferredValue:function(e,n){var i=Ke();return Le===null?vo(i,e,n):fm(i,Le.memoizedState,e,n)},useTransition:function(){var e=yo(Rn)[0],n=Ke().memoizedState;return[typeof e=="boolean"?e:pi(e),n]},useSyncExternalStore:qh,useId:ym,useHostTransitionStatus:So,useFormState:nm,useActionState:nm,useOptimistic:function(e,n){var i=Ke();return Le!==null?Yh(i,Le,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:mo,useCacheRefresh:gm},yr=null,_i=0;function Vs(e){var n=_i;return _i+=1,yr===null&&(yr=[]),kh(yr,e,n)}function bi(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Ys(e,n){throw n.$$typeof===_?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Em(e){var n=e._init;return n(e._payload)}function Tm(e){function n(x,A){if(e){var j=x.deletions;j===null?(x.deletions=[A],x.flags|=16):j.push(A)}}function i(x,A){if(!e)return null;for(;A!==null;)n(x,A),A=A.sibling;return null}function l(x){for(var A=new Map;x!==null;)x.key!==null?A.set(x.key,x):A.set(x.index,x),x=x.sibling;return A}function d(x,A){return x=Sn(x,A),x.index=0,x.sibling=null,x}function m(x,A,j){return x.index=j,e?(j=x.alternate,j!==null?(j=j.index,j<A?(x.flags|=67108866,A):j):(x.flags|=67108866,A)):(x.flags|=1048576,A)}function g(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function v(x,A,j,P){return A===null||A.tag!==6?(A=Hl(j,x.mode,P),A.return=x,A):(A=d(A,j),A.return=x,A)}function O(x,A,j,P){var ne=j.type;return ne===S?z(x,A,j.props.children,P,j.key):A!==null&&(A.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===J&&Em(ne)===A.type)?(A=d(A,j.props),bi(A,j),A.return=x,A):(A=Cs(j.type,j.key,j.props,null,x.mode,P),bi(A,j),A.return=x,A)}function L(x,A,j,P){return A===null||A.tag!==4||A.stateNode.containerInfo!==j.containerInfo||A.stateNode.implementation!==j.implementation?(A=Gl(j,x.mode,P),A.return=x,A):(A=d(A,j.children||[]),A.return=x,A)}function z(x,A,j,P,ne){return A===null||A.tag!==7?(A=xa(j,x.mode,P,ne),A.return=x,A):(A=d(A,j),A.return=x,A)}function B(x,A,j){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=Hl(""+A,x.mode,j),A.return=x,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case b:return j=Cs(A.type,A.key,A.props,null,x.mode,j),bi(j,A),j.return=x,j;case w:return A=Gl(A,x.mode,j),A.return=x,A;case J:var P=A._init;return A=P(A._payload),B(x,A,j)}if(V(A)||He(A))return A=xa(A,x.mode,j,null),A.return=x,A;if(typeof A.then=="function")return B(x,Vs(A),j);if(A.$$typeof===N)return B(x,ks(x,A),j);Ys(x,A)}return null}function $(x,A,j,P){var ne=A!==null?A.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ne!==null?null:v(x,A,""+j,P);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case b:return j.key===ne?O(x,A,j,P):null;case w:return j.key===ne?L(x,A,j,P):null;case J:return ne=j._init,j=ne(j._payload),$(x,A,j,P)}if(V(j)||He(j))return ne!==null?null:z(x,A,j,P,null);if(typeof j.then=="function")return $(x,A,Vs(j),P);if(j.$$typeof===N)return $(x,A,ks(x,j),P);Ys(x,j)}return null}function D(x,A,j,P,ne){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return x=x.get(j)||null,v(A,x,""+P,ne);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case b:return x=x.get(P.key===null?j:P.key)||null,O(A,x,P,ne);case w:return x=x.get(P.key===null?j:P.key)||null,L(A,x,P,ne);case J:var be=P._init;return P=be(P._payload),D(x,A,j,P,ne)}if(V(P)||He(P))return x=x.get(j)||null,z(A,x,P,ne,null);if(typeof P.then=="function")return D(x,A,j,Vs(P),ne);if(P.$$typeof===N)return D(x,A,j,ks(A,P),ne);Ys(A,P)}return null}function he(x,A,j,P){for(var ne=null,be=null,ue=A,fe=A=0,ut=null;ue!==null&&fe<j.length;fe++){ue.index>fe?(ut=ue,ue=null):ut=ue.sibling;var Oe=$(x,ue,j[fe],P);if(Oe===null){ue===null&&(ue=ut);break}e&&ue&&Oe.alternate===null&&n(x,ue),A=m(Oe,A,fe),be===null?ne=Oe:be.sibling=Oe,be=Oe,ue=ut}if(fe===j.length)return i(x,ue),Re&&Na(x,fe),ne;if(ue===null){for(;fe<j.length;fe++)ue=B(x,j[fe],P),ue!==null&&(A=m(ue,A,fe),be===null?ne=ue:be.sibling=ue,be=ue);return Re&&Na(x,fe),ne}for(ue=l(ue);fe<j.length;fe++)ut=D(ue,x,fe,j[fe],P),ut!==null&&(e&&ut.alternate!==null&&ue.delete(ut.key===null?fe:ut.key),A=m(ut,A,fe),be===null?ne=ut:be.sibling=ut,be=ut);return e&&ue.forEach(function(ca){return n(x,ca)}),Re&&Na(x,fe),ne}function de(x,A,j,P){if(j==null)throw Error(r(151));for(var ne=null,be=null,ue=A,fe=A=0,ut=null,Oe=j.next();ue!==null&&!Oe.done;fe++,Oe=j.next()){ue.index>fe?(ut=ue,ue=null):ut=ue.sibling;var ca=$(x,ue,Oe.value,P);if(ca===null){ue===null&&(ue=ut);break}e&&ue&&ca.alternate===null&&n(x,ue),A=m(ca,A,fe),be===null?ne=ca:be.sibling=ca,be=ca,ue=ut}if(Oe.done)return i(x,ue),Re&&Na(x,fe),ne;if(ue===null){for(;!Oe.done;fe++,Oe=j.next())Oe=B(x,Oe.value,P),Oe!==null&&(A=m(Oe,A,fe),be===null?ne=Oe:be.sibling=Oe,be=Oe);return Re&&Na(x,fe),ne}for(ue=l(ue);!Oe.done;fe++,Oe=j.next())Oe=D(ue,x,fe,Oe.value,P),Oe!==null&&(e&&Oe.alternate!==null&&ue.delete(Oe.key===null?fe:Oe.key),A=m(Oe,A,fe),be===null?ne=Oe:be.sibling=Oe,be=Oe);return e&&ue.forEach(function(pw){return n(x,pw)}),Re&&Na(x,fe),ne}function $e(x,A,j,P){if(typeof j=="object"&&j!==null&&j.type===S&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case b:e:{for(var ne=j.key;A!==null;){if(A.key===ne){if(ne=j.type,ne===S){if(A.tag===7){i(x,A.sibling),P=d(A,j.props.children),P.return=x,x=P;break e}}else if(A.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===J&&Em(ne)===A.type){i(x,A.sibling),P=d(A,j.props),bi(P,j),P.return=x,x=P;break e}i(x,A);break}else n(x,A);A=A.sibling}j.type===S?(P=xa(j.props.children,x.mode,P,j.key),P.return=x,x=P):(P=Cs(j.type,j.key,j.props,null,x.mode,P),bi(P,j),P.return=x,x=P)}return g(x);case w:e:{for(ne=j.key;A!==null;){if(A.key===ne)if(A.tag===4&&A.stateNode.containerInfo===j.containerInfo&&A.stateNode.implementation===j.implementation){i(x,A.sibling),P=d(A,j.children||[]),P.return=x,x=P;break e}else{i(x,A);break}else n(x,A);A=A.sibling}P=Gl(j,x.mode,P),P.return=x,x=P}return g(x);case J:return ne=j._init,j=ne(j._payload),$e(x,A,j,P)}if(V(j))return he(x,A,j,P);if(He(j)){if(ne=He(j),typeof ne!="function")throw Error(r(150));return j=ne.call(j),de(x,A,j,P)}if(typeof j.then=="function")return $e(x,A,Vs(j),P);if(j.$$typeof===N)return $e(x,A,ks(x,j),P);Ys(x,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,A!==null&&A.tag===6?(i(x,A.sibling),P=d(A,j),P.return=x,x=P):(i(x,A),P=Hl(j,x.mode,P),P.return=x,x=P),g(x)):i(x,A)}return function(x,A,j,P){try{_i=0;var ne=$e(x,A,j,P);return yr=null,ne}catch(ue){if(ue===oi||ue===Ds)throw ue;var be=kt(29,ue,null,x.mode);return be.lanes=P,be.return=x,be}finally{}}}var gr=Tm(!0),Om=Tm(!1),Ft=M(null),mn=null;function Qn(e){var n=e.alternate;Z(nt,nt.current&1),Z(Ft,e),mn===null&&(n===null||fr.current!==null||n.memoizedState!==null)&&(mn=e)}function Am(e){if(e.tag===22){if(Z(nt,nt.current),Z(Ft,e),mn===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(mn=e)}}else Fn()}function Fn(){Z(nt,nt.current),Z(Ft,Ft.current)}function xn(e){H(Ft),mn===e&&(mn=null),H(nt)}var nt=M(0);function Xs(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||hc(i)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function To(e,n,i,l){n=e.memoizedState,i=i(l,n),i=i==null?n:y({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Oo={enqueueSetState:function(e,n,i){e=e._reactInternals;var l=Ut(),d=Vn(l);d.payload=n,i!=null&&(d.callback=i),n=Yn(e,d,l),n!==null&&(It(n,e,l),di(n,e,l))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var l=Ut(),d=Vn(l);d.tag=1,d.payload=n,i!=null&&(d.callback=i),n=Yn(e,d,l),n!==null&&(It(n,e,l),di(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=Ut(),l=Vn(i);l.tag=2,n!=null&&(l.callback=n),n=Yn(e,l,i),n!==null&&(It(n,e,i),di(n,e,i))}};function Rm(e,n,i,l,d,m,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,g):n.prototype&&n.prototype.isPureReactComponent?!ti(i,l)||!ti(d,m):!0}function xm(e,n,i,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==e&&Oo.enqueueReplaceState(n,n.state,null)}function Ua(e,n){var i=n;if("ref"in n){i={};for(var l in n)l!=="ref"&&(i[l]=n[l])}if(e=e.defaultProps){i===n&&(i=y({},i));for(var d in e)i[d]===void 0&&(i[d]=e[d])}return i}var Qs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Cm(e){Qs(e)}function Nm(e){console.error(e)}function jm(e){Qs(e)}function Fs(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Lm(e,n,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Ao(e,n,i){return i=Vn(i),i.tag=3,i.payload={element:null},i.callback=function(){Fs(e,n)},i}function km(e){return e=Vn(e),e.tag=3,e}function $m(e,n,i,l){var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var m=l.value;e.payload=function(){return d(m)},e.callback=function(){Lm(n,i,l)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Lm(n,i,l),typeof d!="function"&&(na===null?na=new Set([this]):na.add(this));var v=l.stack;this.componentDidCatch(l.value,{componentStack:v!==null?v:""})})}function pv(e,n,i,l,d){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=i.alternate,n!==null&&si(n,i,d,!0),i=Ft.current,i!==null){switch(i.tag){case 13:return mn===null?Fo():i.alternate===null&&Ve===0&&(Ve=3),i.flags&=-257,i.flags|=65536,i.lanes=d,l===eo?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([l]):n.add(l),Ko(e,l,d)),!1;case 22:return i.flags|=65536,l===eo?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([l]):i.add(l)),Ko(e,l,d)),!1}throw Error(r(435,i.tag))}return Ko(e,l,d),Fo(),!1}if(Re)return n=Ft.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,l!==Yl&&(e=Error(r(422),{cause:l}),ii(Vt(e,i)))):(l!==Yl&&(n=Error(r(423),{cause:l}),ii(Vt(n,i))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Vt(l,i),d=Ao(e.stateNode,l,d),ao(e,d),Ve!==4&&(Ve=2)),!1;var m=Error(r(520),{cause:l});if(m=Vt(m,i),Ai===null?Ai=[m]:Ai.push(m),Ve!==4&&(Ve=2),n===null)return!0;l=Vt(l,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=d&-d,i.lanes|=e,e=Ao(i.stateNode,l,e),ao(i,e),!1;case 1:if(n=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(na===null||!na.has(m))))return i.flags|=65536,d&=-d,i.lanes|=d,d=km(d),$m(d,e,i,l),ao(i,d),!1}i=i.return}while(i!==null);return!1}var Dm=Error(r(461)),it=!1;function ot(e,n,i,l){n.child=e===null?Om(n,null,i,l):gr(n,e.child,i,l)}function Mm(e,n,i,l,d){i=i.render;var m=n.ref;if("ref"in l){var g={};for(var v in l)v!=="ref"&&(g[v]=l[v])}else g=l;return $a(n),l=lo(e,n,i,g,m,d),v=oo(),e!==null&&!it?(co(e,n,d),Cn(e,n,d)):(Re&&v&&Zl(n),n.flags|=1,ot(e,n,l,d),n.child)}function Um(e,n,i,l,d){if(e===null){var m=i.type;return typeof m=="function"&&!Bl(m)&&m.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=m,Im(e,n,m,l,d)):(e=Cs(i.type,null,l,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!$o(e,d)){var g=m.memoizedProps;if(i=i.compare,i=i!==null?i:ti,i(g,l)&&e.ref===n.ref)return Cn(e,n,d)}return n.flags|=1,e=Sn(m,l),e.ref=n.ref,e.return=n,n.child=e}function Im(e,n,i,l,d){if(e!==null){var m=e.memoizedProps;if(ti(m,l)&&e.ref===n.ref)if(it=!1,n.pendingProps=l=m,$o(e,d))(e.flags&131072)!==0&&(it=!0);else return n.lanes=e.lanes,Cn(e,n,d)}return Ro(e,n,i,l,d)}function zm(e,n,i){var l=n.pendingProps,d=l.children,m=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=m!==null?m.baseLanes|i:i,e!==null){for(d=n.child=e.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;n.childLanes=m&~l}else n.childLanes=0,n.child=null;return Pm(e,n,l,i)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&$s(n,m!==null?m.cachePool:null),m!==null?Ih(n,m):io(),Am(n);else return n.lanes=n.childLanes=536870912,Pm(e,n,m!==null?m.baseLanes|i:i,i)}else m!==null?($s(n,m.cachePool),Ih(n,m),Fn(),n.memoizedState=null):(e!==null&&$s(n,null),io(),Fn());return ot(e,n,d,i),n.child}function Pm(e,n,i,l){var d=Wl();return d=d===null?null:{parent:tt._currentValue,pool:d},n.memoizedState={baseLanes:i,cachePool:d},e!==null&&$s(n,null),io(),Am(n),e!==null&&si(e,n,l,!0),null}function Js(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(r(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Ro(e,n,i,l,d){return $a(n),i=lo(e,n,i,l,void 0,d),l=oo(),e!==null&&!it?(co(e,n,d),Cn(e,n,d)):(Re&&l&&Zl(n),n.flags|=1,ot(e,n,i,d),n.child)}function qm(e,n,i,l,d,m){return $a(n),n.updateQueue=null,i=Ph(n,l,i,d),zh(e),l=oo(),e!==null&&!it?(co(e,n,m),Cn(e,n,m)):(Re&&l&&Zl(n),n.flags|=1,ot(e,n,i,m),n.child)}function Bm(e,n,i,l,d){if($a(n),n.stateNode===null){var m=ur,g=i.contextType;typeof g=="object"&&g!==null&&(m=mt(g)),m=new i(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Oo,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},to(n),g=i.contextType,m.context=typeof g=="object"&&g!==null?mt(g):ur,m.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(To(n,i,g,l),m.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(g=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),g!==m.state&&Oo.enqueueReplaceState(m,m.state,null),hi(n,l,m,d),fi(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){m=n.stateNode;var v=n.memoizedProps,O=Ua(i,v);m.props=O;var L=m.context,z=i.contextType;g=ur,typeof z=="object"&&z!==null&&(g=mt(z));var B=i.getDerivedStateFromProps;z=typeof B=="function"||typeof m.getSnapshotBeforeUpdate=="function",v=n.pendingProps!==v,z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v||L!==g)&&xm(n,m,l,g),Zn=!1;var $=n.memoizedState;m.state=$,hi(n,l,m,d),fi(),L=n.memoizedState,v||$!==L||Zn?(typeof B=="function"&&(To(n,i,B,l),L=n.memoizedState),(O=Zn||Rm(n,i,O,l,$,L,g))?(z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=L),m.props=l,m.state=L,m.context=g,l=O):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,no(e,n),g=n.memoizedProps,z=Ua(i,g),m.props=z,B=n.pendingProps,$=m.context,L=i.contextType,O=ur,typeof L=="object"&&L!==null&&(O=mt(L)),v=i.getDerivedStateFromProps,(L=typeof v=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(g!==B||$!==O)&&xm(n,m,l,O),Zn=!1,$=n.memoizedState,m.state=$,hi(n,l,m,d),fi();var D=n.memoizedState;g!==B||$!==D||Zn||e!==null&&e.dependencies!==null&&Ls(e.dependencies)?(typeof v=="function"&&(To(n,i,v,l),D=n.memoizedState),(z=Zn||Rm(n,i,z,l,$,D,O)||e!==null&&e.dependencies!==null&&Ls(e.dependencies))?(L||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,D,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,D,O)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||g===e.memoizedProps&&$===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&$===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=D),m.props=l,m.state=D,m.context=O,l=z):(typeof m.componentDidUpdate!="function"||g===e.memoizedProps&&$===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&$===e.memoizedState||(n.flags|=1024),l=!1)}return m=l,Js(e,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&l?(n.child=gr(n,e.child,null,d),n.child=gr(n,null,i,d)):ot(e,n,i,d),n.memoizedState=m.state,e=n.child):e=Cn(e,n,d),e}function Hm(e,n,i,l){return ri(),n.flags|=256,ot(e,n,i,l),n.child}var xo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Co(e){return{baseLanes:e,cachePool:Nh()}}function No(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=Jt),e}function Gm(e,n,i){var l=n.pendingProps,d=!1,m=(n.flags&128)!==0,g;if((g=m)||(g=e!==null&&e.memoizedState===null?!1:(nt.current&2)!==0),g&&(d=!0,n.flags&=-129),g=(n.flags&32)!==0,n.flags&=-33,e===null){if(Re){if(d?Qn(n):Fn(),Re){var v=Ze,O;if(O=v){e:{for(O=v,v=hn;O.nodeType!==8;){if(!v){v=null;break e}if(O=an(O.nextSibling),O===null){v=null;break e}}v=O}v!==null?(n.memoizedState={dehydrated:v,treeContext:Ca!==null?{id:En,overflow:Tn}:null,retryLane:536870912,hydrationErrors:null},O=kt(18,null,null,0),O.stateNode=v,O.return=n,n.child=O,gt=n,Ze=null,O=!0):O=!1}O||La(n)}if(v=n.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return hc(v)?n.lanes=32:n.lanes=536870912,null;xn(n)}return v=l.children,l=l.fallback,d?(Fn(),d=n.mode,v=Ks({mode:"hidden",children:v},d),l=xa(l,d,i,null),v.return=n,l.return=n,v.sibling=l,n.child=v,d=n.child,d.memoizedState=Co(i),d.childLanes=No(e,g,i),n.memoizedState=xo,l):(Qn(n),jo(n,v))}if(O=e.memoizedState,O!==null&&(v=O.dehydrated,v!==null)){if(m)n.flags&256?(Qn(n),n.flags&=-257,n=Lo(e,n,i)):n.memoizedState!==null?(Fn(),n.child=e.child,n.flags|=128,n=null):(Fn(),d=l.fallback,v=n.mode,l=Ks({mode:"visible",children:l.children},v),d=xa(d,v,i,null),d.flags|=2,l.return=n,d.return=n,l.sibling=d,n.child=l,gr(n,e.child,null,i),l=n.child,l.memoizedState=Co(i),l.childLanes=No(e,g,i),n.memoizedState=xo,n=d);else if(Qn(n),hc(v)){if(g=v.nextSibling&&v.nextSibling.dataset,g)var L=g.dgst;g=L,l=Error(r(419)),l.stack="",l.digest=g,ii({value:l,source:null,stack:null}),n=Lo(e,n,i)}else if(it||si(e,n,i,!1),g=(i&e.childLanes)!==0,it||g){if(g=ze,g!==null&&(l=i&-i,l=(l&42)!==0?1:hl(l),l=(l&(g.suspendedLanes|i))!==0?0:l,l!==0&&l!==O.retryLane))throw O.retryLane=l,sr(e,l),It(g,e,l),Dm;v.data==="$?"||Fo(),n=Lo(e,n,i)}else v.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=O.treeContext,Ze=an(v.nextSibling),gt=n,Re=!0,ja=null,hn=!1,e!==null&&(Xt[Qt++]=En,Xt[Qt++]=Tn,Xt[Qt++]=Ca,En=e.id,Tn=e.overflow,Ca=n),n=jo(n,l.children),n.flags|=4096);return n}return d?(Fn(),d=l.fallback,v=n.mode,O=e.child,L=O.sibling,l=Sn(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,L!==null?d=Sn(L,d):(d=xa(d,v,i,null),d.flags|=2),d.return=n,l.return=n,l.sibling=d,n.child=l,l=d,d=n.child,v=e.child.memoizedState,v===null?v=Co(i):(O=v.cachePool,O!==null?(L=tt._currentValue,O=O.parent!==L?{parent:L,pool:L}:O):O=Nh(),v={baseLanes:v.baseLanes|i,cachePool:O}),d.memoizedState=v,d.childLanes=No(e,g,i),n.memoizedState=xo,l):(Qn(n),i=e.child,e=i.sibling,i=Sn(i,{mode:"visible",children:l.children}),i.return=n,i.sibling=null,e!==null&&(g=n.deletions,g===null?(n.deletions=[e],n.flags|=16):g.push(e)),n.child=i,n.memoizedState=null,i)}function jo(e,n){return n=Ks({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Ks(e,n){return e=kt(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Lo(e,n,i){return gr(n,e.child,null,i),e=jo(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Zm(e,n,i){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),Ql(e.return,n,i)}function ko(e,n,i,l,d){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:d}:(m.isBackwards=n,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=i,m.tailMode=d)}function Vm(e,n,i){var l=n.pendingProps,d=l.revealOrder,m=l.tail;if(ot(e,n,l.children,i),l=nt.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zm(e,i,n);else if(e.tag===19)Zm(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(Z(nt,l),d){case"forwards":for(i=n.child,d=null;i!==null;)e=i.alternate,e!==null&&Xs(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=n.child,n.child=null):(d=i.sibling,i.sibling=null),ko(n,!1,d,i,m);break;case"backwards":for(i=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&Xs(e)===null){n.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}ko(n,!0,i,null,m);break;case"together":ko(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Cn(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),ta|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(si(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,i=Sn(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Sn(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function $o(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Ls(e)))}function yv(e,n,i){switch(n.tag){case 3:Ue(n,n.stateNode.containerInfo),Gn(n,tt,e.memoizedState.cache),ri();break;case 27:case 5:Sa(n);break;case 4:Ue(n,n.stateNode.containerInfo);break;case 10:Gn(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Qn(n),n.flags|=128,null):(i&n.child.childLanes)!==0?Gm(e,n,i):(Qn(n),e=Cn(e,n,i),e!==null?e.sibling:null);Qn(n);break;case 19:var d=(e.flags&128)!==0;if(l=(i&n.childLanes)!==0,l||(si(e,n,i,!1),l=(i&n.childLanes)!==0),d){if(l)return Vm(e,n,i);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Z(nt,nt.current),l)break;return null;case 22:case 23:return n.lanes=0,zm(e,n,i);case 24:Gn(n,tt,e.memoizedState.cache)}return Cn(e,n,i)}function Ym(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)it=!0;else{if(!$o(e,i)&&(n.flags&128)===0)return it=!1,yv(e,n,i);it=(e.flags&131072)!==0}else it=!1,Re&&(n.flags&1048576)!==0&&Eh(n,js,n.index);switch(n.lanes=0,n.tag){case 16:e:{e=n.pendingProps;var l=n.elementType,d=l._init;if(l=d(l._payload),n.type=l,typeof l=="function")Bl(l)?(e=Ua(l,e),n.tag=1,n=Bm(null,n,l,e,i)):(n.tag=0,n=Ro(null,n,l,e,i));else{if(l!=null){if(d=l.$$typeof,d===Y){n.tag=11,n=Mm(null,n,l,e,i);break e}else if(d===re){n.tag=14,n=Um(null,n,l,e,i);break e}}throw n=W(l)||l,Error(r(306,n,""))}}return n;case 0:return Ro(e,n,n.type,n.pendingProps,i);case 1:return l=n.type,d=Ua(l,n.pendingProps),Bm(e,n,l,d,i);case 3:e:{if(Ue(n,n.stateNode.containerInfo),e===null)throw Error(r(387));l=n.pendingProps;var m=n.memoizedState;d=m.element,no(e,n),hi(n,l,null,i);var g=n.memoizedState;if(l=g.cache,Gn(n,tt,l),l!==m.cache&&Fl(n,[tt],i,!0),fi(),l=g.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:g.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=Hm(e,n,l,i);break e}else if(l!==d){d=Vt(Error(r(424)),n),ii(d),n=Hm(e,n,l,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ze=an(e.firstChild),gt=n,Re=!0,ja=null,hn=!0,i=Om(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ri(),l===d){n=Cn(e,n,i);break e}ot(e,n,l,i)}n=n.child}return n;case 26:return Js(e,n),e===null?(i=Jp(n.type,null,n.pendingProps,null))?n.memoizedState=i:Re||(i=n.type,e=n.pendingProps,l=fu(ce.current).createElement(i),l[ht]=n,l[Tt]=e,dt(l,i,e),rt(l),n.stateNode=l):n.memoizedState=Jp(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Sa(n),e===null&&Re&&(l=n.stateNode=Xp(n.type,n.pendingProps,ce.current),gt=n,hn=!0,d=Ze,ia(n.type)?(mc=d,Ze=an(l.firstChild)):Ze=d),ot(e,n,n.pendingProps.children,i),Js(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Re&&((d=l=Ze)&&(l=Gv(l,n.type,n.pendingProps,hn),l!==null?(n.stateNode=l,gt=n,Ze=an(l.firstChild),hn=!1,d=!0):d=!1),d||La(n)),Sa(n),d=n.type,m=n.pendingProps,g=e!==null?e.memoizedProps:null,l=m.children,cc(d,m)?l=null:g!==null&&cc(d,g)&&(n.flags|=32),n.memoizedState!==null&&(d=lo(e,n,lv,null,null,i),Di._currentValue=d),Js(e,n),ot(e,n,l,i),n.child;case 6:return e===null&&Re&&((e=i=Ze)&&(i=Zv(i,n.pendingProps,hn),i!==null?(n.stateNode=i,gt=n,Ze=null,e=!0):e=!1),e||La(n)),null;case 13:return Gm(e,n,i);case 4:return Ue(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=gr(n,null,l,i):ot(e,n,l,i),n.child;case 11:return Mm(e,n,n.type,n.pendingProps,i);case 7:return ot(e,n,n.pendingProps,i),n.child;case 8:return ot(e,n,n.pendingProps.children,i),n.child;case 12:return ot(e,n,n.pendingProps.children,i),n.child;case 10:return l=n.pendingProps,Gn(n,n.type,l.value),ot(e,n,l.children,i),n.child;case 9:return d=n.type._context,l=n.pendingProps.children,$a(n),d=mt(d),l=l(d),n.flags|=1,ot(e,n,l,i),n.child;case 14:return Um(e,n,n.type,n.pendingProps,i);case 15:return Im(e,n,n.type,n.pendingProps,i);case 19:return Vm(e,n,i);case 31:return l=n.pendingProps,i=n.mode,l={mode:l.mode,children:l.children},e===null?(i=Ks(l,i),i.ref=n.ref,n.child=i,i.return=n,n=i):(i=Sn(e.child,l),i.ref=n.ref,n.child=i,i.return=n,n=i),n;case 22:return zm(e,n,i);case 24:return $a(n),l=mt(tt),e===null?(d=Wl(),d===null&&(d=ze,m=Jl(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=i),d=m),n.memoizedState={parent:l,cache:d},to(n),Gn(n,tt,d)):((e.lanes&i)!==0&&(no(e,n),hi(n,null,null,i),fi()),d=e.memoizedState,m=n.memoizedState,d.parent!==l?(d={parent:l,cache:l},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),Gn(n,tt,l)):(l=m.cache,Gn(n,tt,l),l!==d.cache&&Fl(n,[tt],i,!0))),ot(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function Nn(e){e.flags|=4}function Xm(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ny(n)){if(n=Ft.current,n!==null&&((Ee&4194048)===Ee?mn!==null:(Ee&62914560)!==Ee&&(Ee&536870912)===0||n!==mn))throw ci=eo,jh;e.flags|=8192}}function Ws(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Af():536870912,e.lanes|=n,wr|=n)}function vi(e,n){if(!Re)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ge(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(n)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=i,n}function gv(e,n,i){var l=n.pendingProps;switch(Vl(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(n),null;case 1:return Ge(n),null;case 3:return i=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),An(tt),Ht(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ai(n)?Nn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ah())),Ge(n),null;case 26:return i=n.memoizedState,e===null?(Nn(n),i!==null?(Ge(n),Xm(n,i)):(Ge(n),n.flags&=-16777217)):i?i!==e.memoizedState?(Nn(n),Ge(n),Xm(n,i)):(Ge(n),n.flags&=-16777217):(e.memoizedProps!==l&&Nn(n),Ge(n),n.flags&=-16777217),null;case 27:Za(n),i=ce.current;var d=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Nn(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return Ge(n),null}e=ee.current,ai(n)?Th(n):(e=Xp(d,l,i),n.stateNode=e,Nn(n))}return Ge(n),null;case 5:if(Za(n),i=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Nn(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return Ge(n),null}if(e=ee.current,ai(n))Th(n);else{switch(d=fu(ce.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?d.createElement(i,{is:l.is}):d.createElement(i)}}e[ht]=n,e[Tt]=l;e:for(d=n.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}n.stateNode=e;e:switch(dt(e,i,l),i){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Nn(n)}}return Ge(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&Nn(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(e=ce.current,ai(n)){if(e=n.stateNode,i=n.memoizedProps,l=null,d=gt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[ht]=n,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||qp(e.nodeValue,i)),e||La(n)}else e=fu(e).createTextNode(l),e[ht]=n,n.stateNode=e}return Ge(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=ai(n),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(r(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[ht]=n}else ri(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ge(n),d=!1}else d=Ah(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(xn(n),n):(xn(n),null)}if(xn(n),(n.flags&128)!==0)return n.lanes=i,n;if(i=l!==null,e=e!==null&&e.memoizedState!==null,i){l=n.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048)}return i!==e&&i&&(n.child.flags|=8192),Ws(n,n.updateQueue),Ge(n),null;case 4:return Ht(),e===null&&ic(n.stateNode.containerInfo),Ge(n),null;case 10:return An(n.type),Ge(n),null;case 19:if(H(nt),d=n.memoizedState,d===null)return Ge(n),null;if(l=(n.flags&128)!==0,m=d.rendering,m===null)if(l)vi(d,!1);else{if(Ve!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=Xs(e),m!==null){for(n.flags|=128,vi(d,!1),e=m.updateQueue,n.updateQueue=e,Ws(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Sh(i,e),i=i.sibling;return Z(nt,nt.current&1|2),n.child}e=e.sibling}d.tail!==null&&fn()>nu&&(n.flags|=128,l=!0,vi(d,!1),n.lanes=4194304)}else{if(!l)if(e=Xs(m),e!==null){if(n.flags|=128,l=!0,e=e.updateQueue,n.updateQueue=e,Ws(n,e),vi(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!Re)return Ge(n),null}else 2*fn()-d.renderingStartTime>nu&&i!==536870912&&(n.flags|=128,l=!0,vi(d,!1),n.lanes=4194304);d.isBackwards?(m.sibling=n.child,n.child=m):(e=d.last,e!==null?e.sibling=m:n.child=m,d.last=m)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=fn(),n.sibling=null,e=nt.current,Z(nt,l?e&1|2:e&1),n):(Ge(n),null);case 22:case 23:return xn(n),so(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(i&536870912)!==0&&(n.flags&128)===0&&(Ge(n),n.subtreeFlags&6&&(n.flags|=8192)):Ge(n),i=n.updateQueue,i!==null&&Ws(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==i&&(n.flags|=2048),e!==null&&H(Da),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),An(tt),Ge(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function _v(e,n){switch(Vl(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return An(tt),Ht(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Za(n),null;case 13:if(xn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));ri()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return H(nt),null;case 4:return Ht(),null;case 10:return An(n.type),null;case 22:case 23:return xn(n),so(),e!==null&&H(Da),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return An(tt),null;case 25:return null;default:return null}}function Qm(e,n){switch(Vl(n),n.tag){case 3:An(tt),Ht();break;case 26:case 27:case 5:Za(n);break;case 4:Ht();break;case 13:xn(n);break;case 19:H(nt);break;case 10:An(n.type);break;case 22:case 23:xn(n),so(),e!==null&&H(Da);break;case 24:An(tt)}}function wi(e,n){try{var i=n.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var d=l.next;i=d;do{if((i.tag&e)===e){l=void 0;var m=i.create,g=i.inst;l=m(),g.destroy=l}i=i.next}while(i!==d)}}catch(v){Ie(n,n.return,v)}}function Jn(e,n,i){try{var l=n.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&e)===e){var g=l.inst,v=g.destroy;if(v!==void 0){g.destroy=void 0,d=n;var O=i,L=v;try{L()}catch(z){Ie(d,O,z)}}}l=l.next}while(l!==m)}}catch(z){Ie(n,n.return,z)}}function Fm(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{Uh(n,i)}catch(l){Ie(e,e.return,l)}}}function Jm(e,n,i){i.props=Ua(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){Ie(e,n,l)}}function Si(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(d){Ie(e,n,d)}}function pn(e,n){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(d){Ie(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(d){Ie(e,n,d)}else i.current=null}function Km(e){var n=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(d){Ie(e,e.return,d)}}function Do(e,n,i){try{var l=e.stateNode;zv(l,e.type,i,n),l[Tt]=n}catch(d){Ie(e,e.return,d)}}function Wm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ia(e.type)||e.tag===4}function Mo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ia(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Uo(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=du));else if(l!==4&&(l===27&&ia(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(Uo(e,n,i),e=e.sibling;e!==null;)Uo(e,n,i),e=e.sibling}function eu(e,n,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(l!==4&&(l===27&&ia(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(eu(e,n,i),e=e.sibling;e!==null;)eu(e,n,i),e=e.sibling}function ep(e){var n=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);dt(n,l,i),n[ht]=e,n[Tt]=i}catch(m){Ie(e,e.return,m)}}var jn=!1,Xe=!1,Io=!1,tp=typeof WeakSet=="function"?WeakSet:Set,st=null;function bv(e,n){if(e=e.containerInfo,lc=_u,e=fh(e),Dl(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var d=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var g=0,v=-1,O=-1,L=0,z=0,B=e,$=null;t:for(;;){for(var D;B!==i||d!==0&&B.nodeType!==3||(v=g+d),B!==m||l!==0&&B.nodeType!==3||(O=g+l),B.nodeType===3&&(g+=B.nodeValue.length),(D=B.firstChild)!==null;)$=B,B=D;for(;;){if(B===e)break t;if($===i&&++L===d&&(v=g),$===m&&++z===l&&(O=g),(D=B.nextSibling)!==null)break;B=$,$=B.parentNode}B=D}i=v===-1||O===-1?null:{start:v,end:O}}else i=null}i=i||{start:0,end:0}}else i=null;for(oc={focusedElem:e,selectionRange:i},_u=!1,st=n;st!==null;)if(n=st,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,st=e;else for(;st!==null;){switch(n=st,m=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,i=n,d=m.memoizedProps,m=m.memoizedState,l=i.stateNode;try{var he=Ua(i.type,d,i.elementType===i.type);e=l.getSnapshotBeforeUpdate(he,m),l.__reactInternalSnapshotBeforeUpdate=e}catch(de){Ie(i,i.return,de)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)fc(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,st=e;break}st=n.return}}function np(e,n,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:Kn(e,i),l&4&&wi(5,i);break;case 1:if(Kn(e,i),l&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(g){Ie(i,i.return,g)}else{var d=Ua(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Ie(i,i.return,g)}}l&64&&Fm(i),l&512&&Si(i,i.return);break;case 3:if(Kn(e,i),l&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Uh(e,n)}catch(g){Ie(i,i.return,g)}}break;case 27:n===null&&l&4&&ep(i);case 26:case 5:Kn(e,i),n===null&&l&4&&Km(i),l&512&&Si(i,i.return);break;case 12:Kn(e,i);break;case 13:Kn(e,i),l&4&&ip(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=xv.bind(null,i),Vv(e,i))));break;case 22:if(l=i.memoizedState!==null||jn,!l){n=n!==null&&n.memoizedState!==null||Xe,d=jn;var m=Xe;jn=l,(Xe=n)&&!m?Wn(e,i,(i.subtreeFlags&8772)!==0):Kn(e,i),jn=d,Xe=m}break;case 30:break;default:Kn(e,i)}}function ap(e){var n=e.alternate;n!==null&&(e.alternate=null,ap(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&yl(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var qe=null,Rt=!1;function Ln(e,n,i){for(i=i.child;i!==null;)rp(e,n,i),i=i.sibling}function rp(e,n,i){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(Hr,i)}catch{}switch(i.tag){case 26:Xe||pn(i,n),Ln(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Xe||pn(i,n);var l=qe,d=Rt;ia(i.type)&&(qe=i.stateNode,Rt=!1),Ln(e,n,i),ji(i.stateNode),qe=l,Rt=d;break;case 5:Xe||pn(i,n);case 6:if(l=qe,d=Rt,qe=null,Ln(e,n,i),qe=l,Rt=d,qe!==null)if(Rt)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(i.stateNode)}catch(m){Ie(i,n,m)}else try{qe.removeChild(i.stateNode)}catch(m){Ie(i,n,m)}break;case 18:qe!==null&&(Rt?(e=qe,Vp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),zi(e)):Vp(qe,i.stateNode));break;case 4:l=qe,d=Rt,qe=i.stateNode.containerInfo,Rt=!0,Ln(e,n,i),qe=l,Rt=d;break;case 0:case 11:case 14:case 15:Xe||Jn(2,i,n),Xe||Jn(4,i,n),Ln(e,n,i);break;case 1:Xe||(pn(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"&&Jm(i,n,l)),Ln(e,n,i);break;case 21:Ln(e,n,i);break;case 22:Xe=(l=Xe)||i.memoizedState!==null,Ln(e,n,i),Xe=l;break;default:Ln(e,n,i)}}function ip(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{zi(e)}catch(i){Ie(n,n.return,i)}}function vv(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new tp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new tp),n;default:throw Error(r(435,e.tag))}}function zo(e,n){var i=vv(e);n.forEach(function(l){var d=Cv.bind(null,e,l);i.has(l)||(i.add(l),l.then(d,d))})}function $t(e,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var d=i[l],m=e,g=n,v=g;e:for(;v!==null;){switch(v.tag){case 27:if(ia(v.type)){qe=v.stateNode,Rt=!1;break e}break;case 5:qe=v.stateNode,Rt=!1;break e;case 3:case 4:qe=v.stateNode.containerInfo,Rt=!0;break e}v=v.return}if(qe===null)throw Error(r(160));rp(m,g,d),qe=null,Rt=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)sp(n,e),n=n.sibling}var nn=null;function sp(e,n){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:$t(n,e),Dt(e),l&4&&(Jn(3,e,e.return),wi(3,e),Jn(5,e,e.return));break;case 1:$t(n,e),Dt(e),l&512&&(Xe||i===null||pn(i,i.return)),l&64&&jn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var d=nn;if($t(n,e),Dt(e),l&512&&(Xe||i===null||pn(i,i.return)),l&4){var m=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":m=d.getElementsByTagName("title")[0],(!m||m[Vr]||m[ht]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(l),d.head.insertBefore(m,d.querySelector("head > title"))),dt(m,l,i),m[ht]=e,rt(m),l=m;break e;case"link":var g=ey("link","href",d).get(l+(i.href||""));if(g){for(var v=0;v<g.length;v++)if(m=g[v],m.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&m.getAttribute("rel")===(i.rel==null?null:i.rel)&&m.getAttribute("title")===(i.title==null?null:i.title)&&m.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(v,1);break t}}m=d.createElement(l),dt(m,l,i),d.head.appendChild(m);break;case"meta":if(g=ey("meta","content",d).get(l+(i.content||""))){for(v=0;v<g.length;v++)if(m=g[v],m.getAttribute("content")===(i.content==null?null:""+i.content)&&m.getAttribute("name")===(i.name==null?null:i.name)&&m.getAttribute("property")===(i.property==null?null:i.property)&&m.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&m.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(v,1);break t}}m=d.createElement(l),dt(m,l,i),d.head.appendChild(m);break;default:throw Error(r(468,l))}m[ht]=e,rt(m),l=m}e.stateNode=l}else ty(d,e.type,e.stateNode);else e.stateNode=Wp(d,l,e.memoizedProps);else m!==l?(m===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):m.count--,l===null?ty(d,e.type,e.stateNode):Wp(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Do(e,e.memoizedProps,i.memoizedProps)}break;case 27:$t(n,e),Dt(e),l&512&&(Xe||i===null||pn(i,i.return)),i!==null&&l&4&&Do(e,e.memoizedProps,i.memoizedProps);break;case 5:if($t(n,e),Dt(e),l&512&&(Xe||i===null||pn(i,i.return)),e.flags&32){d=e.stateNode;try{Wa(d,"")}catch(D){Ie(e,e.return,D)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,Do(e,d,i!==null?i.memoizedProps:d)),l&1024&&(Io=!0);break;case 6:if($t(n,e),Dt(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(D){Ie(e,e.return,D)}}break;case 3:if(pu=null,d=nn,nn=hu(n.containerInfo),$t(n,e),nn=d,Dt(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{zi(n.containerInfo)}catch(D){Ie(e,e.return,D)}Io&&(Io=!1,up(e));break;case 4:l=nn,nn=hu(e.stateNode.containerInfo),$t(n,e),Dt(e),nn=l;break;case 12:$t(n,e),Dt(e);break;case 13:$t(n,e),Dt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Zo=fn()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,zo(e,l)));break;case 22:d=e.memoizedState!==null;var O=i!==null&&i.memoizedState!==null,L=jn,z=Xe;if(jn=L||d,Xe=z||O,$t(n,e),Xe=z,jn=L,Dt(e),l&8192)e:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(i===null||O||jn||Xe||Ia(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){O=i=n;try{if(m=O.stateNode,d)g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{v=O.stateNode;var B=O.memoizedProps.style,$=B!=null&&B.hasOwnProperty("display")?B.display:null;v.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(D){Ie(O,O.return,D)}}}else if(n.tag===6){if(i===null){O=n;try{O.stateNode.nodeValue=d?"":O.memoizedProps}catch(D){Ie(O,O.return,D)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,zo(e,i))));break;case 19:$t(n,e),Dt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,zo(e,l)));break;case 30:break;case 21:break;default:$t(n,e),Dt(e)}}function Dt(e){var n=e.flags;if(n&2){try{for(var i,l=e.return;l!==null;){if(Wm(l)){i=l;break}l=l.return}if(i==null)throw Error(r(160));switch(i.tag){case 27:var d=i.stateNode,m=Mo(e);eu(e,m,d);break;case 5:var g=i.stateNode;i.flags&32&&(Wa(g,""),i.flags&=-33);var v=Mo(e);eu(e,v,g);break;case 3:case 4:var O=i.stateNode.containerInfo,L=Mo(e);Uo(e,L,O);break;default:throw Error(r(161))}}catch(z){Ie(e,e.return,z)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function up(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;up(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Kn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)np(e,n.alternate,n),n=n.sibling}function Ia(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Jn(4,n,n.return),Ia(n);break;case 1:pn(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&Jm(n,n.return,i),Ia(n);break;case 27:ji(n.stateNode);case 26:case 5:pn(n,n.return),Ia(n);break;case 22:n.memoizedState===null&&Ia(n);break;case 30:Ia(n);break;default:Ia(n)}e=e.sibling}}function Wn(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,d=e,m=n,g=m.flags;switch(m.tag){case 0:case 11:case 15:Wn(d,m,i),wi(4,m);break;case 1:if(Wn(d,m,i),l=m,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(L){Ie(l,l.return,L)}if(l=m,d=l.updateQueue,d!==null){var v=l.stateNode;try{var O=d.shared.hiddenCallbacks;if(O!==null)for(d.shared.hiddenCallbacks=null,d=0;d<O.length;d++)Mh(O[d],v)}catch(L){Ie(l,l.return,L)}}i&&g&64&&Fm(m),Si(m,m.return);break;case 27:ep(m);case 26:case 5:Wn(d,m,i),i&&l===null&&g&4&&Km(m),Si(m,m.return);break;case 12:Wn(d,m,i);break;case 13:Wn(d,m,i),i&&g&4&&ip(d,m);break;case 22:m.memoizedState===null&&Wn(d,m,i),Si(m,m.return);break;case 30:break;default:Wn(d,m,i)}n=n.sibling}}function Po(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&ui(i))}function qo(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ui(e))}function yn(e,n,i,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)lp(e,n,i,l),n=n.sibling}function lp(e,n,i,l){var d=n.flags;switch(n.tag){case 0:case 11:case 15:yn(e,n,i,l),d&2048&&wi(9,n);break;case 1:yn(e,n,i,l);break;case 3:yn(e,n,i,l),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ui(e)));break;case 12:if(d&2048){yn(e,n,i,l),e=n.stateNode;try{var m=n.memoizedProps,g=m.id,v=m.onPostCommit;typeof v=="function"&&v(g,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){Ie(n,n.return,O)}}else yn(e,n,i,l);break;case 13:yn(e,n,i,l);break;case 23:break;case 22:m=n.stateNode,g=n.alternate,n.memoizedState!==null?m._visibility&2?yn(e,n,i,l):Ei(e,n):m._visibility&2?yn(e,n,i,l):(m._visibility|=2,_r(e,n,i,l,(n.subtreeFlags&10256)!==0)),d&2048&&Po(g,n);break;case 24:yn(e,n,i,l),d&2048&&qo(n.alternate,n);break;default:yn(e,n,i,l)}}function _r(e,n,i,l,d){for(d=d&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var m=e,g=n,v=i,O=l,L=g.flags;switch(g.tag){case 0:case 11:case 15:_r(m,g,v,O,d),wi(8,g);break;case 23:break;case 22:var z=g.stateNode;g.memoizedState!==null?z._visibility&2?_r(m,g,v,O,d):Ei(m,g):(z._visibility|=2,_r(m,g,v,O,d)),d&&L&2048&&Po(g.alternate,g);break;case 24:_r(m,g,v,O,d),d&&L&2048&&qo(g.alternate,g);break;default:_r(m,g,v,O,d)}n=n.sibling}}function Ei(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,l=n,d=l.flags;switch(l.tag){case 22:Ei(i,l),d&2048&&Po(l.alternate,l);break;case 24:Ei(i,l),d&2048&&qo(l.alternate,l);break;default:Ei(i,l)}n=n.sibling}}var Ti=8192;function br(e){if(e.subtreeFlags&Ti)for(e=e.child;e!==null;)op(e),e=e.sibling}function op(e){switch(e.tag){case 26:br(e),e.flags&Ti&&e.memoizedState!==null&&iw(nn,e.memoizedState,e.memoizedProps);break;case 5:br(e);break;case 3:case 4:var n=nn;nn=hu(e.stateNode.containerInfo),br(e),nn=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Ti,Ti=16777216,br(e),Ti=n):br(e));break;default:br(e)}}function cp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Oi(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];st=l,fp(l,e)}cp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)dp(e),e=e.sibling}function dp(e){switch(e.tag){case 0:case 11:case 15:Oi(e),e.flags&2048&&Jn(9,e,e.return);break;case 3:Oi(e);break;case 12:Oi(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,tu(e)):Oi(e);break;default:Oi(e)}}function tu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];st=l,fp(l,e)}cp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Jn(8,n,n.return),tu(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,tu(n));break;default:tu(n)}e=e.sibling}}function fp(e,n){for(;st!==null;){var i=st;switch(i.tag){case 0:case 11:case 15:Jn(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ui(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,st=l;else e:for(i=e;st!==null;){l=st;var d=l.sibling,m=l.return;if(ap(l),l===i){st=null;break e}if(d!==null){d.return=m,st=d;break e}st=m}}}var wv={getCacheForType:function(e){var n=mt(tt),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i}},Sv=typeof WeakMap=="function"?WeakMap:Map,Ce=0,ze=null,we=null,Ee=0,Ne=0,Mt=null,ea=!1,vr=!1,Bo=!1,kn=0,Ve=0,ta=0,za=0,Ho=0,Jt=0,wr=0,Ai=null,xt=null,Go=!1,Zo=0,nu=1/0,au=null,na=null,ct=0,aa=null,Sr=null,Er=0,Vo=0,Yo=null,hp=null,Ri=0,Xo=null;function Ut(){if((Ce&2)!==0&&Ee!==0)return Ee&-Ee;if(C.T!==null){var e=cr;return e!==0?e:tc()}return Cf()}function mp(){Jt===0&&(Jt=(Ee&536870912)===0||Re?Of():536870912);var e=Ft.current;return e!==null&&(e.flags|=32),Jt}function It(e,n,i){(e===ze&&(Ne===2||Ne===9)||e.cancelPendingCommit!==null)&&(Tr(e,0),ra(e,Ee,Jt,!1)),Zr(e,i),((Ce&2)===0||e!==ze)&&(e===ze&&((Ce&2)===0&&(za|=i),Ve===4&&ra(e,Ee,Jt,!1)),gn(e))}function pp(e,n,i){if((Ce&6)!==0)throw Error(r(327));var l=!i&&(n&124)===0&&(n&e.expiredLanes)===0||Gr(e,n),d=l?Ov(e,n):Jo(e,n,!0),m=l;do{if(d===0){vr&&!l&&ra(e,n,0,!1);break}else{if(i=e.current.alternate,m&&!Ev(i)){d=Jo(e,n,!1),m=!1;continue}if(d===2){if(m=n,e.errorRecoveryDisabledLanes&m)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){n=g;e:{var v=e;d=Ai;var O=v.current.memoizedState.isDehydrated;if(O&&(Tr(v,g).flags|=256),g=Jo(v,g,!1),g!==2){if(Bo&&!O){v.errorRecoveryDisabledLanes|=m,za|=m,d=4;break e}m=xt,xt=d,m!==null&&(xt===null?xt=m:xt.push.apply(xt,m))}d=g}if(m=!1,d!==2)continue}}if(d===1){Tr(e,0),ra(e,n,0,!0);break}e:{switch(l=e,m=d,m){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:ra(l,n,Jt,!ea);break e;case 2:xt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(d=Zo+300-fn(),10<d)){if(ra(l,n,Jt,!ea),ms(l,0,!0)!==0)break e;l.timeoutHandle=Gp(yp.bind(null,l,i,xt,au,Go,n,Jt,za,wr,ea,m,2,-0,0),d);break e}yp(l,i,xt,au,Go,n,Jt,za,wr,ea,m,0,-0,0)}}break}while(!0);gn(e)}function yp(e,n,i,l,d,m,g,v,O,L,z,B,$,D){if(e.timeoutHandle=-1,B=n.subtreeFlags,(B&8192||(B&16785408)===16785408)&&($i={stylesheets:null,count:0,unsuspend:rw},op(n),B=sw(),B!==null)){e.cancelPendingCommit=B(Ep.bind(null,e,n,m,i,l,d,g,v,O,z,1,$,D)),ra(e,m,g,!L);return}Ep(e,n,m,i,l,d,g,v,O)}function Ev(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var d=i[l],m=d.getSnapshot;d=d.value;try{if(!Lt(m(),d))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ra(e,n,i,l){n&=~Ho,n&=~za,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var d=n;0<d;){var m=31-jt(d),g=1<<m;l[m]=-1,d&=~g}i!==0&&Rf(e,i,n)}function ru(){return(Ce&6)===0?(xi(0),!1):!0}function Qo(){if(we!==null){if(Ne===0)var e=we.return;else e=we,On=ka=null,fo(e),yr=null,_i=0,e=we;for(;e!==null;)Qm(e.alternate,e),e=e.return;we=null}}function Tr(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,qv(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Qo(),ze=e,we=i=Sn(e.current,null),Ee=n,Ne=0,Mt=null,ea=!1,vr=Gr(e,n),Bo=!1,wr=Jt=Ho=za=ta=Ve=0,xt=Ai=null,Go=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var d=31-jt(l),m=1<<d;n|=e[d],l&=~m}return kn=n,As(),i}function gp(e,n){_e=null,C.H=Zs,n===oi||n===Ds?(n=$h(),Ne=3):n===jh?(n=$h(),Ne=4):Ne=n===Dm?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Mt=n,we===null&&(Ve=1,Fs(e,Vt(n,e.current)))}function _p(){var e=C.H;return C.H=Zs,e===null?Zs:e}function bp(){var e=C.A;return C.A=wv,e}function Fo(){Ve=4,ea||(Ee&4194048)!==Ee&&Ft.current!==null||(vr=!0),(ta&134217727)===0&&(za&134217727)===0||ze===null||ra(ze,Ee,Jt,!1)}function Jo(e,n,i){var l=Ce;Ce|=2;var d=_p(),m=bp();(ze!==e||Ee!==n)&&(au=null,Tr(e,n)),n=!1;var g=Ve;e:do try{if(Ne!==0&&we!==null){var v=we,O=Mt;switch(Ne){case 8:Qo(),g=6;break e;case 3:case 2:case 9:case 6:Ft.current===null&&(n=!0);var L=Ne;if(Ne=0,Mt=null,Or(e,v,O,L),i&&vr){g=0;break e}break;default:L=Ne,Ne=0,Mt=null,Or(e,v,O,L)}}Tv(),g=Ve;break}catch(z){gp(e,z)}while(!0);return n&&e.shellSuspendCounter++,On=ka=null,Ce=l,C.H=d,C.A=m,we===null&&(ze=null,Ee=0,As()),g}function Tv(){for(;we!==null;)vp(we)}function Ov(e,n){var i=Ce;Ce|=2;var l=_p(),d=bp();ze!==e||Ee!==n?(au=null,nu=fn()+500,Tr(e,n)):vr=Gr(e,n);e:do try{if(Ne!==0&&we!==null){n=we;var m=Mt;t:switch(Ne){case 1:Ne=0,Mt=null,Or(e,n,m,1);break;case 2:case 9:if(Lh(m)){Ne=0,Mt=null,wp(n);break}n=function(){Ne!==2&&Ne!==9||ze!==e||(Ne=7),gn(e)},m.then(n,n);break e;case 3:Ne=7;break e;case 4:Ne=5;break e;case 7:Lh(m)?(Ne=0,Mt=null,wp(n)):(Ne=0,Mt=null,Or(e,n,m,7));break;case 5:var g=null;switch(we.tag){case 26:g=we.memoizedState;case 5:case 27:var v=we;if(!g||ny(g)){Ne=0,Mt=null;var O=v.sibling;if(O!==null)we=O;else{var L=v.return;L!==null?(we=L,iu(L)):we=null}break t}}Ne=0,Mt=null,Or(e,n,m,5);break;case 6:Ne=0,Mt=null,Or(e,n,m,6);break;case 8:Qo(),Ve=6;break e;default:throw Error(r(462))}}Av();break}catch(z){gp(e,z)}while(!0);return On=ka=null,C.H=l,C.A=d,Ce=i,we!==null?0:(ze=null,Ee=0,As(),Ve)}function Av(){for(;we!==null&&!X_();)vp(we)}function vp(e){var n=Ym(e.alternate,e,kn);e.memoizedProps=e.pendingProps,n===null?iu(e):we=n}function wp(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=qm(i,n,n.pendingProps,n.type,void 0,Ee);break;case 11:n=qm(i,n,n.pendingProps,n.type.render,n.ref,Ee);break;case 5:fo(n);default:Qm(i,n),n=we=Sh(n,kn),n=Ym(i,n,kn)}e.memoizedProps=e.pendingProps,n===null?iu(e):we=n}function Or(e,n,i,l){On=ka=null,fo(n),yr=null,_i=0;var d=n.return;try{if(pv(e,d,n,i,Ee)){Ve=1,Fs(e,Vt(i,e.current)),we=null;return}}catch(m){if(d!==null)throw we=d,m;Ve=1,Fs(e,Vt(i,e.current)),we=null;return}n.flags&32768?(Re||l===1?e=!0:vr||(Ee&536870912)!==0?e=!1:(ea=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ft.current,l!==null&&l.tag===13&&(l.flags|=16384))),Sp(n,e)):iu(n)}function iu(e){var n=e;do{if((n.flags&32768)!==0){Sp(n,ea);return}e=n.return;var i=gv(n.alternate,n,kn);if(i!==null){we=i;return}if(n=n.sibling,n!==null){we=n;return}we=n=e}while(n!==null);Ve===0&&(Ve=5)}function Sp(e,n){do{var i=_v(e.alternate,e);if(i!==null){i.flags&=32767,we=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){we=e;return}we=e=i}while(e!==null);Ve=6,we=null}function Ep(e,n,i,l,d,m,g,v,O){e.cancelPendingCommit=null;do su();while(ct!==0);if((Ce&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(m=n.lanes|n.childLanes,m|=Pl,rb(e,i,m,g,v,O),e===ze&&(we=ze=null,Ee=0),Sr=n,aa=e,Er=i,Vo=m,Yo=d,hp=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Nv(ds,function(){return xp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=C.T,C.T=null,d=U.p,U.p=2,g=Ce,Ce|=4;try{bv(e,n,i)}finally{Ce=g,U.p=d,C.T=l}}ct=1,Tp(),Op(),Ap()}}function Tp(){if(ct===1){ct=0;var e=aa,n=Sr,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=C.T,C.T=null;var l=U.p;U.p=2;var d=Ce;Ce|=4;try{sp(n,e);var m=oc,g=fh(e.containerInfo),v=m.focusedElem,O=m.selectionRange;if(g!==v&&v&&v.ownerDocument&&dh(v.ownerDocument.documentElement,v)){if(O!==null&&Dl(v)){var L=O.start,z=O.end;if(z===void 0&&(z=L),"selectionStart"in v)v.selectionStart=L,v.selectionEnd=Math.min(z,v.value.length);else{var B=v.ownerDocument||document,$=B&&B.defaultView||window;if($.getSelection){var D=$.getSelection(),he=v.textContent.length,de=Math.min(O.start,he),$e=O.end===void 0?de:Math.min(O.end,he);!D.extend&&de>$e&&(g=$e,$e=de,de=g);var x=ch(v,de),A=ch(v,$e);if(x&&A&&(D.rangeCount!==1||D.anchorNode!==x.node||D.anchorOffset!==x.offset||D.focusNode!==A.node||D.focusOffset!==A.offset)){var j=B.createRange();j.setStart(x.node,x.offset),D.removeAllRanges(),de>$e?(D.addRange(j),D.extend(A.node,A.offset)):(j.setEnd(A.node,A.offset),D.addRange(j))}}}}for(B=[],D=v;D=D.parentNode;)D.nodeType===1&&B.push({element:D,left:D.scrollLeft,top:D.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<B.length;v++){var P=B[v];P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}_u=!!lc,oc=lc=null}finally{Ce=d,U.p=l,C.T=i}}e.current=n,ct=2}}function Op(){if(ct===2){ct=0;var e=aa,n=Sr,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=C.T,C.T=null;var l=U.p;U.p=2;var d=Ce;Ce|=4;try{np(e,n.alternate,n)}finally{Ce=d,U.p=l,C.T=i}}ct=3}}function Ap(){if(ct===4||ct===3){ct=0,Q_();var e=aa,n=Sr,i=Er,l=hp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ct=5:(ct=0,Sr=aa=null,Rp(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(na=null),ml(i),n=n.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(Hr,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=C.T,d=U.p,U.p=2,C.T=null;try{for(var m=e.onRecoverableError,g=0;g<l.length;g++){var v=l[g];m(v.value,{componentStack:v.stack})}}finally{C.T=n,U.p=d}}(Er&3)!==0&&su(),gn(e),d=e.pendingLanes,(i&4194090)!==0&&(d&42)!==0?e===Xo?Ri++:(Ri=0,Xo=e):Ri=0,xi(0)}}function Rp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,ui(n)))}function su(e){return Tp(),Op(),Ap(),xp()}function xp(){if(ct!==5)return!1;var e=aa,n=Vo;Vo=0;var i=ml(Er),l=C.T,d=U.p;try{U.p=32>i?32:i,C.T=null,i=Yo,Yo=null;var m=aa,g=Er;if(ct=0,Sr=aa=null,Er=0,(Ce&6)!==0)throw Error(r(331));var v=Ce;if(Ce|=4,dp(m.current),lp(m,m.current,g,i),Ce=v,xi(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(Hr,m)}catch{}return!0}finally{U.p=d,C.T=l,Rp(e,n)}}function Cp(e,n,i){n=Vt(i,n),n=Ao(e.stateNode,n,2),e=Yn(e,n,2),e!==null&&(Zr(e,2),gn(e))}function Ie(e,n,i){if(e.tag===3)Cp(e,e,i);else for(;n!==null;){if(n.tag===3){Cp(n,e,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(na===null||!na.has(l))){e=Vt(i,e),i=km(2),l=Yn(n,i,2),l!==null&&($m(i,l,n,e),Zr(l,2),gn(l));break}}n=n.return}}function Ko(e,n,i){var l=e.pingCache;if(l===null){l=e.pingCache=new Sv;var d=new Set;l.set(n,d)}else d=l.get(n),d===void 0&&(d=new Set,l.set(n,d));d.has(i)||(Bo=!0,d.add(i),e=Rv.bind(null,e,n,i),n.then(e,e))}function Rv(e,n,i){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,ze===e&&(Ee&i)===i&&(Ve===4||Ve===3&&(Ee&62914560)===Ee&&300>fn()-Zo?(Ce&2)===0&&Tr(e,0):Ho|=i,wr===Ee&&(wr=0)),gn(e)}function Np(e,n){n===0&&(n=Af()),e=sr(e,n),e!==null&&(Zr(e,n),gn(e))}function xv(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Np(e,i)}function Cv(e,n){var i=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),Np(e,i)}function Nv(e,n){return cl(e,n)}var uu=null,Ar=null,Wo=!1,lu=!1,ec=!1,Pa=0;function gn(e){e!==Ar&&e.next===null&&(Ar===null?uu=Ar=e:Ar=Ar.next=e),lu=!0,Wo||(Wo=!0,Lv())}function xi(e,n){if(!ec&&lu){ec=!0;do for(var i=!1,l=uu;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var m=0;else{var g=l.suspendedLanes,v=l.pingedLanes;m=(1<<31-jt(42|e)+1)-1,m&=d&~(g&~v),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,$p(l,m))}else m=Ee,m=ms(l,l===ze?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Gr(l,m)||(i=!0,$p(l,m));l=l.next}while(i);ec=!1}}function jv(){jp()}function jp(){lu=Wo=!1;var e=0;Pa!==0&&(Pv()&&(e=Pa),Pa=0);for(var n=fn(),i=null,l=uu;l!==null;){var d=l.next,m=Lp(l,n);m===0?(l.next=null,i===null?uu=d:i.next=d,d===null&&(Ar=i)):(i=l,(e!==0||(m&3)!==0)&&(lu=!0)),l=d}xi(e)}function Lp(e,n){for(var i=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var g=31-jt(m),v=1<<g,O=d[g];O===-1?((v&i)===0||(v&l)!==0)&&(d[g]=ab(v,n)):O<=n&&(e.expiredLanes|=v),m&=~v}if(n=ze,i=Ee,i=ms(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===n&&(Ne===2||Ne===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&dl(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Gr(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(l!==null&&dl(l),ml(i)){case 2:case 8:i=Ef;break;case 32:i=ds;break;case 268435456:i=Tf;break;default:i=ds}return l=kp.bind(null,e),i=cl(i,l),e.callbackPriority=n,e.callbackNode=i,n}return l!==null&&l!==null&&dl(l),e.callbackPriority=2,e.callbackNode=null,2}function kp(e,n){if(ct!==0&&ct!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(su()&&e.callbackNode!==i)return null;var l=Ee;return l=ms(e,e===ze?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(pp(e,l,n),Lp(e,fn()),e.callbackNode!=null&&e.callbackNode===i?kp.bind(null,e):null)}function $p(e,n){if(su())return null;pp(e,n,!0)}function Lv(){Bv(function(){(Ce&6)!==0?cl(Sf,jv):jp()})}function tc(){return Pa===0&&(Pa=Of()),Pa}function Dp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:bs(""+e)}function Mp(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function kv(e,n,i,l,d){if(n==="submit"&&i&&i.stateNode===d){var m=Dp((d[Tt]||null).action),g=l.submitter;g&&(n=(n=g[Tt]||null)?Dp(n.formAction):g.getAttribute("formAction"),n!==null&&(m=n,g=null));var v=new Es("action","action",null,l,d);e.push({event:v,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Pa!==0){var O=g?Mp(d,g):new FormData(d);wo(i,{pending:!0,data:O,method:d.method,action:m},null,O)}}else typeof m=="function"&&(v.preventDefault(),O=g?Mp(d,g):new FormData(d),wo(i,{pending:!0,data:O,method:d.method,action:m},m,O))},currentTarget:d}]})}}for(var nc=0;nc<zl.length;nc++){var ac=zl[nc],$v=ac.toLowerCase(),Dv=ac[0].toUpperCase()+ac.slice(1);tn($v,"on"+Dv)}tn(ph,"onAnimationEnd"),tn(yh,"onAnimationIteration"),tn(gh,"onAnimationStart"),tn("dblclick","onDoubleClick"),tn("focusin","onFocus"),tn("focusout","onBlur"),tn(Kb,"onTransitionRun"),tn(Wb,"onTransitionStart"),tn(ev,"onTransitionCancel"),tn(_h,"onTransitionEnd"),Fa("onMouseEnter",["mouseout","mouseover"]),Fa("onMouseLeave",["mouseout","mouseover"]),Fa("onPointerEnter",["pointerout","pointerover"]),Fa("onPointerLeave",["pointerout","pointerover"]),Ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ci="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ci));function Up(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],d=l.event;l=l.listeners;e:{var m=void 0;if(n)for(var g=l.length-1;0<=g;g--){var v=l[g],O=v.instance,L=v.currentTarget;if(v=v.listener,O!==m&&d.isPropagationStopped())break e;m=v,d.currentTarget=L;try{m(d)}catch(z){Qs(z)}d.currentTarget=null,m=O}else for(g=0;g<l.length;g++){if(v=l[g],O=v.instance,L=v.currentTarget,v=v.listener,O!==m&&d.isPropagationStopped())break e;m=v,d.currentTarget=L;try{m(d)}catch(z){Qs(z)}d.currentTarget=null,m=O}}}}function Se(e,n){var i=n[pl];i===void 0&&(i=n[pl]=new Set);var l=e+"__bubble";i.has(l)||(Ip(n,e,2,!1),i.add(l))}function rc(e,n,i){var l=0;n&&(l|=4),Ip(i,e,l,n)}var ou="_reactListening"+Math.random().toString(36).slice(2);function ic(e){if(!e[ou]){e[ou]=!0,jf.forEach(function(i){i!=="selectionchange"&&(Mv.has(i)||rc(i,!1,e),rc(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ou]||(n[ou]=!0,rc("selectionchange",!1,n))}}function Ip(e,n,i,l){switch(ly(n)){case 2:var d=ow;break;case 8:d=cw;break;default:d=bc}i=d.bind(null,n,i,e),d=void 0,!Al||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(n,i,{capture:!0,passive:d}):e.addEventListener(n,i,!0):d!==void 0?e.addEventListener(n,i,{passive:d}):e.addEventListener(n,i,!1)}function sc(e,n,i,l,d){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var v=l.stateNode.containerInfo;if(v===d)break;if(g===4)for(g=l.return;g!==null;){var O=g.tag;if((O===3||O===4)&&g.stateNode.containerInfo===d)return;g=g.return}for(;v!==null;){if(g=Ya(v),g===null)return;if(O=g.tag,O===5||O===6||O===26||O===27){l=m=g;continue e}v=v.parentNode}}l=l.return}Zf(function(){var L=m,z=Tl(i),B=[];e:{var $=bh.get(e);if($!==void 0){var D=Es,he=e;switch(e){case"keypress":if(ws(i)===0)break e;case"keydown":case"keyup":D=Nb;break;case"focusin":he="focus",D=Nl;break;case"focusout":he="blur",D=Nl;break;case"beforeblur":case"afterblur":D=Nl;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=Xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=_b;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=kb;break;case ph:case yh:case gh:D=wb;break;case _h:D=Db;break;case"scroll":case"scrollend":D=yb;break;case"wheel":D=Ub;break;case"copy":case"cut":case"paste":D=Eb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=Ff;break;case"toggle":case"beforetoggle":D=zb}var de=(n&4)!==0,$e=!de&&(e==="scroll"||e==="scrollend"),x=de?$!==null?$+"Capture":null:$;de=[];for(var A=L,j;A!==null;){var P=A;if(j=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||j===null||x===null||(P=Xr(A,x),P!=null&&de.push(Ni(A,P,j))),$e)break;A=A.return}0<de.length&&($=new D($,he,null,i,z),B.push({event:$,listeners:de}))}}if((n&7)===0){e:{if($=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",$&&i!==El&&(he=i.relatedTarget||i.fromElement)&&(Ya(he)||he[Va]))break e;if((D||$)&&($=z.window===z?z:($=z.ownerDocument)?$.defaultView||$.parentWindow:window,D?(he=i.relatedTarget||i.toElement,D=L,he=he?Ya(he):null,he!==null&&($e=o(he),de=he.tag,he!==$e||de!==5&&de!==27&&de!==6)&&(he=null)):(D=null,he=L),D!==he)){if(de=Xf,P="onMouseLeave",x="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(de=Ff,P="onPointerLeave",x="onPointerEnter",A="pointer"),$e=D==null?$:Yr(D),j=he==null?$:Yr(he),$=new de(P,A+"leave",D,i,z),$.target=$e,$.relatedTarget=j,P=null,Ya(z)===L&&(de=new de(x,A+"enter",he,i,z),de.target=j,de.relatedTarget=$e,P=de),$e=P,D&&he)t:{for(de=D,x=he,A=0,j=de;j;j=Rr(j))A++;for(j=0,P=x;P;P=Rr(P))j++;for(;0<A-j;)de=Rr(de),A--;for(;0<j-A;)x=Rr(x),j--;for(;A--;){if(de===x||x!==null&&de===x.alternate)break t;de=Rr(de),x=Rr(x)}de=null}else de=null;D!==null&&zp(B,$,D,de,!1),he!==null&&$e!==null&&zp(B,$e,he,de,!0)}}e:{if($=L?Yr(L):window,D=$.nodeName&&$.nodeName.toLowerCase(),D==="select"||D==="input"&&$.type==="file")var ne=rh;else if(nh($))if(ih)ne=Qb;else{ne=Yb;var be=Vb}else D=$.nodeName,!D||D.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?L&&Sl(L.elementType)&&(ne=rh):ne=Xb;if(ne&&(ne=ne(e,L))){ah(B,ne,i,z);break e}be&&be(e,$,L),e==="focusout"&&L&&$.type==="number"&&L.memoizedProps.value!=null&&wl($,"number",$.value)}switch(be=L?Yr(L):window,e){case"focusin":(nh(be)||be.contentEditable==="true")&&(ar=be,Ml=L,ni=null);break;case"focusout":ni=Ml=ar=null;break;case"mousedown":Ul=!0;break;case"contextmenu":case"mouseup":case"dragend":Ul=!1,hh(B,i,z);break;case"selectionchange":if(Jb)break;case"keydown":case"keyup":hh(B,i,z)}var ue;if(Ll)e:{switch(e){case"compositionstart":var fe="onCompositionStart";break e;case"compositionend":fe="onCompositionEnd";break e;case"compositionupdate":fe="onCompositionUpdate";break e}fe=void 0}else nr?eh(e,i)&&(fe="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(fe="onCompositionStart");fe&&(Jf&&i.locale!=="ko"&&(nr||fe!=="onCompositionStart"?fe==="onCompositionEnd"&&nr&&(ue=Vf()):(Hn=z,Rl="value"in Hn?Hn.value:Hn.textContent,nr=!0)),be=cu(L,fe),0<be.length&&(fe=new Qf(fe,e,null,i,z),B.push({event:fe,listeners:be}),ue?fe.data=ue:(ue=th(i),ue!==null&&(fe.data=ue)))),(ue=qb?Bb(e,i):Hb(e,i))&&(fe=cu(L,"onBeforeInput"),0<fe.length&&(be=new Qf("onBeforeInput","beforeinput",null,i,z),B.push({event:be,listeners:fe}),be.data=ue)),kv(B,e,L,i,z)}Up(B,n)})}function Ni(e,n,i){return{instance:e,listener:n,currentTarget:i}}function cu(e,n){for(var i=n+"Capture",l=[];e!==null;){var d=e,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=Xr(e,i),d!=null&&l.unshift(Ni(e,d,m)),d=Xr(e,n),d!=null&&l.push(Ni(e,d,m))),e.tag===3)return l;e=e.return}return[]}function Rr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function zp(e,n,i,l,d){for(var m=n._reactName,g=[];i!==null&&i!==l;){var v=i,O=v.alternate,L=v.stateNode;if(v=v.tag,O!==null&&O===l)break;v!==5&&v!==26&&v!==27||L===null||(O=L,d?(L=Xr(i,m),L!=null&&g.unshift(Ni(i,L,O))):d||(L=Xr(i,m),L!=null&&g.push(Ni(i,L,O)))),i=i.return}g.length!==0&&e.push({event:n,listeners:g})}var Uv=/\r\n?/g,Iv=/\u0000|\uFFFD/g;function Pp(e){return(typeof e=="string"?e:""+e).replace(Uv,`
`).replace(Iv,"")}function qp(e,n){return n=Pp(n),Pp(e)===n}function du(){}function ke(e,n,i,l,d,m){switch(i){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Wa(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Wa(e,""+l);break;case"className":ys(e,"class",l);break;case"tabIndex":ys(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ys(e,i,l);break;case"style":Hf(e,l,m);break;case"data":if(n!=="object"){ys(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=bs(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(n!=="input"&&ke(e,n,"name",d.name,d,null),ke(e,n,"formEncType",d.formEncType,d,null),ke(e,n,"formMethod",d.formMethod,d,null),ke(e,n,"formTarget",d.formTarget,d,null)):(ke(e,n,"encType",d.encType,d,null),ke(e,n,"method",d.method,d,null),ke(e,n,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=bs(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=du);break;case"onScroll":l!=null&&Se("scroll",e);break;case"onScrollEnd":l!=null&&Se("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(i=l.__html,i!=null){if(d.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=bs(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":Se("beforetoggle",e),Se("toggle",e),ps(e,"popover",l);break;case"xlinkActuate":vn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":vn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":vn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":vn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":vn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":vn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":vn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":vn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":vn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ps(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=mb.get(i)||i,ps(e,i,l))}}function uc(e,n,i,l,d,m){switch(i){case"style":Hf(e,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(i=l.__html,i!=null){if(d.children!=null)throw Error(r(60));e.innerHTML=i}}break;case"children":typeof l=="string"?Wa(e,l):(typeof l=="number"||typeof l=="bigint")&&Wa(e,""+l);break;case"onScroll":l!=null&&Se("scroll",e);break;case"onScrollEnd":l!=null&&Se("scrollend",e);break;case"onClick":l!=null&&(e.onclick=du);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lf.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(d=i.endsWith("Capture"),n=i.slice(2,d?i.length-7:void 0),m=e[Tt]||null,m=m!=null?m[i]:null,typeof m=="function"&&e.removeEventListener(n,m,d),typeof l=="function")){typeof m!="function"&&m!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,l,d);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):ps(e,i,l)}}}function dt(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Se("error",e),Se("load",e);var l=!1,d=!1,m;for(m in i)if(i.hasOwnProperty(m)){var g=i[m];if(g!=null)switch(m){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:ke(e,n,m,g,i,null)}}d&&ke(e,n,"srcSet",i.srcSet,i,null),l&&ke(e,n,"src",i.src,i,null);return;case"input":Se("invalid",e);var v=m=g=d=null,O=null,L=null;for(l in i)if(i.hasOwnProperty(l)){var z=i[l];if(z!=null)switch(l){case"name":d=z;break;case"type":g=z;break;case"checked":O=z;break;case"defaultChecked":L=z;break;case"value":m=z;break;case"defaultValue":v=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,n));break;default:ke(e,n,l,z,i,null)}}zf(e,m,v,O,L,g,d,!1),gs(e);return;case"select":Se("invalid",e),l=g=m=null;for(d in i)if(i.hasOwnProperty(d)&&(v=i[d],v!=null))switch(d){case"value":m=v;break;case"defaultValue":g=v;break;case"multiple":l=v;default:ke(e,n,d,v,i,null)}n=m,i=g,e.multiple=!!l,n!=null?Ka(e,!!l,n,!1):i!=null&&Ka(e,!!l,i,!0);return;case"textarea":Se("invalid",e),m=d=l=null;for(g in i)if(i.hasOwnProperty(g)&&(v=i[g],v!=null))switch(g){case"value":l=v;break;case"defaultValue":d=v;break;case"children":m=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:ke(e,n,g,v,i,null)}qf(e,l,d,m),gs(e);return;case"option":for(O in i)if(i.hasOwnProperty(O)&&(l=i[O],l!=null))switch(O){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ke(e,n,O,l,i,null)}return;case"dialog":Se("beforetoggle",e),Se("toggle",e),Se("cancel",e),Se("close",e);break;case"iframe":case"object":Se("load",e);break;case"video":case"audio":for(l=0;l<Ci.length;l++)Se(Ci[l],e);break;case"image":Se("error",e),Se("load",e);break;case"details":Se("toggle",e);break;case"embed":case"source":case"link":Se("error",e),Se("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in i)if(i.hasOwnProperty(L)&&(l=i[L],l!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:ke(e,n,L,l,i,null)}return;default:if(Sl(n)){for(z in i)i.hasOwnProperty(z)&&(l=i[z],l!==void 0&&uc(e,n,z,l,i,void 0));return}}for(v in i)i.hasOwnProperty(v)&&(l=i[v],l!=null&&ke(e,n,v,l,i,null))}function zv(e,n,i,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,g=null,v=null,O=null,L=null,z=null;for(D in i){var B=i[D];if(i.hasOwnProperty(D)&&B!=null)switch(D){case"checked":break;case"value":break;case"defaultValue":O=B;default:l.hasOwnProperty(D)||ke(e,n,D,null,l,B)}}for(var $ in l){var D=l[$];if(B=i[$],l.hasOwnProperty($)&&(D!=null||B!=null))switch($){case"type":m=D;break;case"name":d=D;break;case"checked":L=D;break;case"defaultChecked":z=D;break;case"value":g=D;break;case"defaultValue":v=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(137,n));break;default:D!==B&&ke(e,n,$,D,l,B)}}vl(e,g,v,O,L,z,m,d);return;case"select":D=g=v=$=null;for(m in i)if(O=i[m],i.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":D=O;default:l.hasOwnProperty(m)||ke(e,n,m,null,l,O)}for(d in l)if(m=l[d],O=i[d],l.hasOwnProperty(d)&&(m!=null||O!=null))switch(d){case"value":$=m;break;case"defaultValue":v=m;break;case"multiple":g=m;default:m!==O&&ke(e,n,d,m,l,O)}n=v,i=g,l=D,$!=null?Ka(e,!!i,$,!1):!!l!=!!i&&(n!=null?Ka(e,!!i,n,!0):Ka(e,!!i,i?[]:"",!1));return;case"textarea":D=$=null;for(v in i)if(d=i[v],i.hasOwnProperty(v)&&d!=null&&!l.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:ke(e,n,v,null,l,d)}for(g in l)if(d=l[g],m=i[g],l.hasOwnProperty(g)&&(d!=null||m!=null))switch(g){case"value":$=d;break;case"defaultValue":D=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==m&&ke(e,n,g,d,l,m)}Pf(e,$,D);return;case"option":for(var he in i)if($=i[he],i.hasOwnProperty(he)&&$!=null&&!l.hasOwnProperty(he))switch(he){case"selected":e.selected=!1;break;default:ke(e,n,he,null,l,$)}for(O in l)if($=l[O],D=i[O],l.hasOwnProperty(O)&&$!==D&&($!=null||D!=null))switch(O){case"selected":e.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:ke(e,n,O,$,l,D)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in i)$=i[de],i.hasOwnProperty(de)&&$!=null&&!l.hasOwnProperty(de)&&ke(e,n,de,null,l,$);for(L in l)if($=l[L],D=i[L],l.hasOwnProperty(L)&&$!==D&&($!=null||D!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,n));break;default:ke(e,n,L,$,l,D)}return;default:if(Sl(n)){for(var $e in i)$=i[$e],i.hasOwnProperty($e)&&$!==void 0&&!l.hasOwnProperty($e)&&uc(e,n,$e,void 0,l,$);for(z in l)$=l[z],D=i[z],!l.hasOwnProperty(z)||$===D||$===void 0&&D===void 0||uc(e,n,z,$,l,D);return}}for(var x in i)$=i[x],i.hasOwnProperty(x)&&$!=null&&!l.hasOwnProperty(x)&&ke(e,n,x,null,l,$);for(B in l)$=l[B],D=i[B],!l.hasOwnProperty(B)||$===D||$==null&&D==null||ke(e,n,B,$,l,D)}var lc=null,oc=null;function fu(e){return e.nodeType===9?e:e.ownerDocument}function Bp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hp(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function cc(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var dc=null;function Pv(){var e=window.event;return e&&e.type==="popstate"?e===dc?!1:(dc=e,!0):(dc=null,!1)}var Gp=typeof setTimeout=="function"?setTimeout:void 0,qv=typeof clearTimeout=="function"?clearTimeout:void 0,Zp=typeof Promise=="function"?Promise:void 0,Bv=typeof queueMicrotask=="function"?queueMicrotask:typeof Zp<"u"?function(e){return Zp.resolve(null).then(e).catch(Hv)}:Gp;function Hv(e){setTimeout(function(){throw e})}function ia(e){return e==="head"}function Vp(e,n){var i=n,l=0,d=0;do{var m=i.nextSibling;if(e.removeChild(i),m&&m.nodeType===8)if(i=m.data,i==="/$"){if(0<l&&8>l){i=l;var g=e.ownerDocument;if(i&1&&ji(g.documentElement),i&2&&ji(g.body),i&4)for(i=g.head,ji(i),g=i.firstChild;g;){var v=g.nextSibling,O=g.nodeName;g[Vr]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&g.rel.toLowerCase()==="stylesheet"||i.removeChild(g),g=v}}if(d===0){e.removeChild(m),zi(n);return}d--}else i==="$"||i==="$?"||i==="$!"?d++:l=i.charCodeAt(0)-48;else l=0;i=m}while(i);zi(n)}function fc(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":fc(i),yl(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Gv(e,n,i,l){for(;e.nodeType===1;){var d=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Vr])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=an(e.nextSibling),e===null)break}return null}function Zv(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=an(e.nextSibling),e===null))return null;return e}function hc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Vv(e,n){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")n();else{var l=function(){n(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function an(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var mc=null;function Yp(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return e;n--}else i==="/$"&&n++}e=e.previousSibling}return null}function Xp(e,n,i){switch(n=fu(i),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function ji(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);yl(e)}var Kt=new Map,Qp=new Set;function hu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $n=U.d;U.d={f:Yv,r:Xv,D:Qv,C:Fv,L:Jv,m:Kv,X:ew,S:Wv,M:tw};function Yv(){var e=$n.f(),n=ru();return e||n}function Xv(e){var n=Xa(e);n!==null&&n.tag===5&&n.type==="form"?pm(n):$n.r(e)}var xr=typeof document>"u"?null:document;function Fp(e,n,i){var l=xr;if(l&&typeof n=="string"&&n){var d=Zt(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof i=="string"&&(d+='[crossorigin="'+i+'"]'),Qp.has(d)||(Qp.add(d),e={rel:e,crossOrigin:i,href:n},l.querySelector(d)===null&&(n=l.createElement("link"),dt(n,"link",e),rt(n),l.head.appendChild(n)))}}function Qv(e){$n.D(e),Fp("dns-prefetch",e,null)}function Fv(e,n){$n.C(e,n),Fp("preconnect",e,n)}function Jv(e,n,i){$n.L(e,n,i);var l=xr;if(l&&e&&n){var d='link[rel="preload"][as="'+Zt(n)+'"]';n==="image"&&i&&i.imageSrcSet?(d+='[imagesrcset="'+Zt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(d+='[imagesizes="'+Zt(i.imageSizes)+'"]')):d+='[href="'+Zt(e)+'"]';var m=d;switch(n){case"style":m=Cr(e);break;case"script":m=Nr(e)}Kt.has(m)||(e=y({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Kt.set(m,e),l.querySelector(d)!==null||n==="style"&&l.querySelector(Li(m))||n==="script"&&l.querySelector(ki(m))||(n=l.createElement("link"),dt(n,"link",e),rt(n),l.head.appendChild(n)))}}function Kv(e,n){$n.m(e,n);var i=xr;if(i&&e){var l=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+Zt(l)+'"][href="'+Zt(e)+'"]',m=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Nr(e)}if(!Kt.has(m)&&(e=y({rel:"modulepreload",href:e},n),Kt.set(m,e),i.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ki(m)))return}l=i.createElement("link"),dt(l,"link",e),rt(l),i.head.appendChild(l)}}}function Wv(e,n,i){$n.S(e,n,i);var l=xr;if(l&&e){var d=Qa(l).hoistableStyles,m=Cr(e);n=n||"default";var g=d.get(m);if(!g){var v={loading:0,preload:null};if(g=l.querySelector(Li(m)))v.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Kt.get(m))&&pc(e,i);var O=g=l.createElement("link");rt(O),dt(O,"link",e),O._p=new Promise(function(L,z){O.onload=L,O.onerror=z}),O.addEventListener("load",function(){v.loading|=1}),O.addEventListener("error",function(){v.loading|=2}),v.loading|=4,mu(g,n,l)}g={type:"stylesheet",instance:g,count:1,state:v},d.set(m,g)}}}function ew(e,n){$n.X(e,n);var i=xr;if(i&&e){var l=Qa(i).hoistableScripts,d=Nr(e),m=l.get(d);m||(m=i.querySelector(ki(d)),m||(e=y({src:e,async:!0},n),(n=Kt.get(d))&&yc(e,n),m=i.createElement("script"),rt(m),dt(m,"link",e),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function tw(e,n){$n.M(e,n);var i=xr;if(i&&e){var l=Qa(i).hoistableScripts,d=Nr(e),m=l.get(d);m||(m=i.querySelector(ki(d)),m||(e=y({src:e,async:!0,type:"module"},n),(n=Kt.get(d))&&yc(e,n),m=i.createElement("script"),rt(m),dt(m,"link",e),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function Jp(e,n,i,l){var d=(d=ce.current)?hu(d):null;if(!d)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Cr(i.href),i=Qa(d).hoistableStyles,l=i.get(n),l||(l={type:"style",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Cr(i.href);var m=Qa(d).hoistableStyles,g=m.get(e);if(g||(d=d.ownerDocument||d,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,g),(m=d.querySelector(Li(e)))&&!m._p&&(g.instance=m,g.state.loading=5),Kt.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Kt.set(e,i),m||nw(d,e,i,g.state))),n&&l===null)throw Error(r(528,""));return g}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Nr(i),i=Qa(d).hoistableScripts,l=i.get(n),l||(l={type:"script",instance:null,count:0,state:null},i.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Cr(e){return'href="'+Zt(e)+'"'}function Li(e){return'link[rel="stylesheet"]['+e+"]"}function Kp(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function nw(e,n,i,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),dt(n,"link",i),rt(n),e.head.appendChild(n))}function Nr(e){return'[src="'+Zt(e)+'"]'}function ki(e){return"script[async]"+e}function Wp(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+Zt(i.href)+'"]');if(l)return n.instance=l,rt(l),l;var d=y({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),rt(l),dt(l,"style",d),mu(l,i.precedence,e),n.instance=l;case"stylesheet":d=Cr(i.href);var m=e.querySelector(Li(d));if(m)return n.state.loading|=4,n.instance=m,rt(m),m;l=Kp(i),(d=Kt.get(d))&&pc(l,d),m=(e.ownerDocument||e).createElement("link"),rt(m);var g=m;return g._p=new Promise(function(v,O){g.onload=v,g.onerror=O}),dt(m,"link",l),n.state.loading|=4,mu(m,i.precedence,e),n.instance=m;case"script":return m=Nr(i.src),(d=e.querySelector(ki(m)))?(n.instance=d,rt(d),d):(l=i,(d=Kt.get(m))&&(l=y({},i),yc(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),rt(d),dt(d,"link",l),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,mu(l,i.precedence,e));return n.instance}function mu(e,n,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,m=d,g=0;g<l.length;g++){var v=l[g];if(v.dataset.precedence===n)m=v;else if(m!==d)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function pc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function yc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var pu=null;function ey(e,n,i){if(pu===null){var l=new Map,d=pu=new Map;d.set(i,l)}else d=pu,l=d.get(i),l||(l=new Map,d.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),d=0;d<i.length;d++){var m=i[d];if(!(m[Vr]||m[ht]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var g=m.getAttribute(n)||"";g=e+g;var v=l.get(g);v?v.push(m):l.set(g,[m])}}return l}function ty(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function aw(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function ny(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var $i=null;function rw(){}function iw(e,n,i){if($i===null)throw Error(r(475));var l=$i;if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var d=Cr(i.href),m=e.querySelector(Li(d));if(m){e=m._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=yu.bind(l),e.then(l,l)),n.state.loading|=4,n.instance=m,rt(m);return}m=e.ownerDocument||e,i=Kp(i),(d=Kt.get(d))&&pc(i,d),m=m.createElement("link"),rt(m);var g=m;g._p=new Promise(function(v,O){g.onload=v,g.onerror=O}),dt(m,"link",i),n.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=yu.bind(l),e.addEventListener("load",n),e.addEventListener("error",n))}}function sw(){if($i===null)throw Error(r(475));var e=$i;return e.stylesheets&&e.count===0&&gc(e,e.stylesheets),0<e.count?function(n){var i=setTimeout(function(){if(e.stylesheets&&gc(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i)}}:null}function yu(){if(this.count--,this.count===0){if(this.stylesheets)gc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var gu=null;function gc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,gu=new Map,n.forEach(uw,e),gu=null,yu.call(e))}function uw(e,n){if(!(n.state.loading&4)){var i=gu.get(e);if(i)var l=i.get(null);else{i=new Map,gu.set(e,i);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var g=d[m];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),l=g)}l&&i.set(null,l)}d=n.instance,g=d.getAttribute("data-precedence"),m=i.get(g)||l,m===l&&i.set(null,d),i.set(g,d),this.count++,l=yu.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),m?m.parentNode.insertBefore(d,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var Di={$$typeof:N,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function lw(e,n,i,l,d,m,g,v){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.hiddenUpdates=fl(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function ay(e,n,i,l,d,m,g,v,O,L,z,B){return e=new lw(e,n,i,g,v,O,L,B),n=1,m===!0&&(n|=24),m=kt(3,null,null,n),e.current=m,m.stateNode=e,n=Jl(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:i,cache:n},to(m),e}function ry(e){return e?(e=ur,e):ur}function iy(e,n,i,l,d,m){d=ry(d),l.context===null?l.context=d:l.pendingContext=d,l=Vn(n),l.payload={element:i},m=m===void 0?null:m,m!==null&&(l.callback=m),i=Yn(e,l,n),i!==null&&(It(i,e,n),di(i,e,n))}function sy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function _c(e,n){sy(e,n),(e=e.alternate)&&sy(e,n)}function uy(e){if(e.tag===13){var n=sr(e,67108864);n!==null&&It(n,e,67108864),_c(e,67108864)}}var _u=!0;function ow(e,n,i,l){var d=C.T;C.T=null;var m=U.p;try{U.p=2,bc(e,n,i,l)}finally{U.p=m,C.T=d}}function cw(e,n,i,l){var d=C.T;C.T=null;var m=U.p;try{U.p=8,bc(e,n,i,l)}finally{U.p=m,C.T=d}}function bc(e,n,i,l){if(_u){var d=vc(l);if(d===null)sc(e,n,l,bu,i),oy(e,l);else if(fw(d,e,n,i,l))l.stopPropagation();else if(oy(e,l),n&4&&-1<dw.indexOf(e)){for(;d!==null;){var m=Xa(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var g=Ea(m.pendingLanes);if(g!==0){var v=m;for(v.pendingLanes|=2,v.entangledLanes|=2;g;){var O=1<<31-jt(g);v.entanglements[1]|=O,g&=~O}gn(m),(Ce&6)===0&&(nu=fn()+500,xi(0))}}break;case 13:v=sr(m,2),v!==null&&It(v,m,2),ru(),_c(m,2)}if(m=vc(l),m===null&&sc(e,n,l,bu,i),m===d)break;d=m}d!==null&&l.stopPropagation()}else sc(e,n,l,null,i)}}function vc(e){return e=Tl(e),wc(e)}var bu=null;function wc(e){if(bu=null,e=Ya(e),e!==null){var n=o(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=c(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return bu=e,null}function ly(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(F_()){case Sf:return 2;case Ef:return 8;case ds:case J_:return 32;case Tf:return 268435456;default:return 32}default:return 32}}var Sc=!1,sa=null,ua=null,la=null,Mi=new Map,Ui=new Map,oa=[],dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oy(e,n){switch(e){case"focusin":case"focusout":sa=null;break;case"dragenter":case"dragleave":ua=null;break;case"mouseover":case"mouseout":la=null;break;case"pointerover":case"pointerout":Mi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ui.delete(n.pointerId)}}function Ii(e,n,i,l,d,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:m,targetContainers:[d]},n!==null&&(n=Xa(n),n!==null&&uy(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function fw(e,n,i,l,d){switch(n){case"focusin":return sa=Ii(sa,e,n,i,l,d),!0;case"dragenter":return ua=Ii(ua,e,n,i,l,d),!0;case"mouseover":return la=Ii(la,e,n,i,l,d),!0;case"pointerover":var m=d.pointerId;return Mi.set(m,Ii(Mi.get(m)||null,e,n,i,l,d)),!0;case"gotpointercapture":return m=d.pointerId,Ui.set(m,Ii(Ui.get(m)||null,e,n,i,l,d)),!0}return!1}function cy(e){var n=Ya(e.target);if(n!==null){var i=o(n);if(i!==null){if(n=i.tag,n===13){if(n=c(i),n!==null){e.blockedOn=n,ib(e.priority,function(){if(i.tag===13){var l=Ut();l=hl(l);var d=sr(i,l);d!==null&&It(d,i,l),_c(i,l)}});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vu(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=vc(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);El=l,i.target.dispatchEvent(l),El=null}else return n=Xa(i),n!==null&&uy(n),e.blockedOn=i,!1;n.shift()}return!0}function dy(e,n,i){vu(e)&&i.delete(n)}function hw(){Sc=!1,sa!==null&&vu(sa)&&(sa=null),ua!==null&&vu(ua)&&(ua=null),la!==null&&vu(la)&&(la=null),Mi.forEach(dy),Ui.forEach(dy)}function wu(e,n){e.blockedOn===n&&(e.blockedOn=null,Sc||(Sc=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,hw)))}var Su=null;function fy(e){Su!==e&&(Su=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){Su===e&&(Su=null);for(var n=0;n<e.length;n+=3){var i=e[n],l=e[n+1],d=e[n+2];if(typeof l!="function"){if(wc(l||i)===null)continue;break}var m=Xa(i);m!==null&&(e.splice(n,3),n-=3,wo(m,{pending:!0,data:d,method:i.method,action:l},l,d))}}))}function zi(e){function n(O){return wu(O,e)}sa!==null&&wu(sa,e),ua!==null&&wu(ua,e),la!==null&&wu(la,e),Mi.forEach(n),Ui.forEach(n);for(var i=0;i<oa.length;i++){var l=oa[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<oa.length&&(i=oa[0],i.blockedOn===null);)cy(i),i.blockedOn===null&&oa.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var d=i[l],m=i[l+1],g=d[Tt]||null;if(typeof m=="function")g||fy(i);else if(g){var v=null;if(m&&m.hasAttribute("formAction")){if(d=m,g=m[Tt]||null)v=g.formAction;else if(wc(d)!==null)continue}else v=g.action;typeof v=="function"?i[l+1]=v:(i.splice(l,3),l-=3),fy(i)}}}function Ec(e){this._internalRoot=e}Eu.prototype.render=Ec.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var i=n.current,l=Ut();iy(i,l,e,n,null,null)},Eu.prototype.unmount=Ec.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;iy(e.current,2,null,e,null,null),ru(),n[Va]=null}};function Eu(e){this._internalRoot=e}Eu.prototype.unstable_scheduleHydration=function(e){if(e){var n=Cf();e={blockedOn:null,target:e,priority:n};for(var i=0;i<oa.length&&n!==0&&n<oa[i].priority;i++);oa.splice(i,0,e),i===0&&cy(e)}};var hy=t.version;if(hy!=="19.1.0")throw Error(r(527,hy,"19.1.0"));U.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=p(n),e=e!==null?h(e):null,e=e===null?null:e.stateNode,e};var mw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tu.isDisabled&&Tu.supportsFiber)try{Hr=Tu.inject(mw),Nt=Tu}catch{}}return qi.createRoot=function(e,n){if(!s(e))throw Error(r(299));var i=!1,l="",d=Cm,m=Nm,g=jm,v=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(g=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(v=n.unstable_transitionCallbacks)),n=ay(e,1,!1,null,null,i,l,d,m,g,v,null),e[Va]=n.current,ic(e),new Ec(n)},qi.hydrateRoot=function(e,n,i){if(!s(e))throw Error(r(299));var l=!1,d="",m=Cm,g=Nm,v=jm,O=null,L=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(O=i.unstable_transitionCallbacks),i.formState!==void 0&&(L=i.formState)),n=ay(e,1,!0,n,i??null,l,d,m,g,v,O,L),n.context=ry(null),i=n.current,l=Ut(),l=hl(l),d=Vn(l),d.callback=null,Yn(i,d,l),i=l,n.current.lanes=i,Zr(n,i),gn(n),e[Va]=n.current,ic(e),new Eu(n)},qi.version="19.1.0",qi}var Ey;function Aw(){if(Ey)return Ac.exports;Ey=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(t){console.error(t)}}return u(),Ac.exports=Ow(),Ac.exports}var Rw=Aw();async function xw(u){const t="https://corsproxy.io/?"+encodeURIComponent(u);try{const r=await(await fetch(t)).text(),f=new DOMParser().parseFromString(r,"text/html").querySelector("#bodyContent").querySelectorAll("p");let p="";return f.forEach(h=>{const y=h.textContent.trim();y&&(p+=y+`
`)}),p}catch(a){return console.error("Error al scrapear Wikipedia:",a),null}}async function b_(u){const t="https://asteroide.ing.uc.cl/api/embed";try{const a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"nomic-embed-text",input:u})});if(!a.ok)throw new Error(`Error HTTP: ${a.status}`);return(await a.json()).embeddings}catch(a){return console.error("Error al generar embedding:",a),null}}async function Cw(u){const t=[];for(const a of u){const r=await b_(a);r&&t.push({text:a,embedding:r[0]})}return t}class Nw{constructor(t){Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=t.pageContent!==void 0?t.pageContent.toString():"",this.metadata=t.metadata??{},this.id=t.id}}var Ae;(function(u){u.assertEqual=s=>{};function t(s){}u.assertIs=t;function a(s){throw new Error}u.assertNever=a,u.arrayToEnum=s=>{const o={};for(const c of s)o[c]=c;return o},u.getValidEnumValues=s=>{const o=u.objectKeys(s).filter(f=>typeof s[s[f]]!="number"),c={};for(const f of o)c[f]=s[f];return u.objectValues(c)},u.objectValues=s=>u.objectKeys(s).map(function(o){return s[o]}),u.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&o.push(c);return o},u.find=(s,o)=>{for(const c of s)if(o(c))return c},u.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,o=" | "){return s.map(c=>typeof c=="string"?`'${c}'`:c).join(o)}u.joinValues=r,u.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(Ae||(Ae={}));var Ty;(function(u){u.mergeShapes=(t,a)=>({...t,...a})})(Ty||(Ty={}));const ae=Ae.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ma=u=>{switch(typeof u){case"undefined":return ae.undefined;case"string":return ae.string;case"number":return Number.isNaN(u)?ae.nan:ae.number;case"boolean":return ae.boolean;case"function":return ae.function;case"bigint":return ae.bigint;case"symbol":return ae.symbol;case"object":return Array.isArray(u)?ae.array:u===null?ae.null:u.then&&typeof u.then=="function"&&u.catch&&typeof u.catch=="function"?ae.promise:typeof Map<"u"&&u instanceof Map?ae.map:typeof Set<"u"&&u instanceof Set?ae.set:typeof Date<"u"&&u instanceof Date?ae.date:ae.object;default:return ae.unknown}},X=Ae.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Pn extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=t}format(t){const a=t||function(o){return o.message},r={_errors:[]},s=o=>{for(const c of o.issues)if(c.code==="invalid_union")c.unionErrors.map(s);else if(c.code==="invalid_return_type")s(c.returnTypeError);else if(c.code==="invalid_arguments")s(c.argumentsError);else if(c.path.length===0)r._errors.push(a(c));else{let f=r,p=0;for(;p<c.path.length;){const h=c.path[p];p===c.path.length-1?(f[h]=f[h]||{_errors:[]},f[h]._errors.push(a(c))):f[h]=f[h]||{_errors:[]},f=f[h],p++}}};return s(this),r}static assert(t){if(!(t instanceof Pn))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ae.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=a=>a.message){const a={},r=[];for(const s of this.issues)s.path.length>0?(a[s.path[0]]=a[s.path[0]]||[],a[s.path[0]].push(t(s))):r.push(t(s));return{formErrors:r,fieldErrors:a}}get formErrors(){return this.flatten()}}Pn.create=u=>new Pn(u);const Hd=(u,t)=>{let a;switch(u.code){case X.invalid_type:u.received===ae.undefined?a="Required":a=`Expected ${u.expected}, received ${u.received}`;break;case X.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(u.expected,Ae.jsonStringifyReplacer)}`;break;case X.unrecognized_keys:a=`Unrecognized key(s) in object: ${Ae.joinValues(u.keys,", ")}`;break;case X.invalid_union:a="Invalid input";break;case X.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${Ae.joinValues(u.options)}`;break;case X.invalid_enum_value:a=`Invalid enum value. Expected ${Ae.joinValues(u.options)}, received '${u.received}'`;break;case X.invalid_arguments:a="Invalid function arguments";break;case X.invalid_return_type:a="Invalid function return type";break;case X.invalid_date:a="Invalid date";break;case X.invalid_string:typeof u.validation=="object"?"includes"in u.validation?(a=`Invalid input: must include "${u.validation.includes}"`,typeof u.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${u.validation.position}`)):"startsWith"in u.validation?a=`Invalid input: must start with "${u.validation.startsWith}"`:"endsWith"in u.validation?a=`Invalid input: must end with "${u.validation.endsWith}"`:Ae.assertNever(u.validation):u.validation!=="regex"?a=`Invalid ${u.validation}`:a="Invalid";break;case X.too_small:u.type==="array"?a=`Array must contain ${u.exact?"exactly":u.inclusive?"at least":"more than"} ${u.minimum} element(s)`:u.type==="string"?a=`String must contain ${u.exact?"exactly":u.inclusive?"at least":"over"} ${u.minimum} character(s)`:u.type==="number"?a=`Number must be ${u.exact?"exactly equal to ":u.inclusive?"greater than or equal to ":"greater than "}${u.minimum}`:u.type==="date"?a=`Date must be ${u.exact?"exactly equal to ":u.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(u.minimum))}`:a="Invalid input";break;case X.too_big:u.type==="array"?a=`Array must contain ${u.exact?"exactly":u.inclusive?"at most":"less than"} ${u.maximum} element(s)`:u.type==="string"?a=`String must contain ${u.exact?"exactly":u.inclusive?"at most":"under"} ${u.maximum} character(s)`:u.type==="number"?a=`Number must be ${u.exact?"exactly":u.inclusive?"less than or equal to":"less than"} ${u.maximum}`:u.type==="bigint"?a=`BigInt must be ${u.exact?"exactly":u.inclusive?"less than or equal to":"less than"} ${u.maximum}`:u.type==="date"?a=`Date must be ${u.exact?"exactly":u.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(u.maximum))}`:a="Invalid input";break;case X.custom:a="Invalid input";break;case X.invalid_intersection_types:a="Intersection results could not be merged";break;case X.not_multiple_of:a=`Number must be a multiple of ${u.multipleOf}`;break;case X.not_finite:a="Number must be finite";break;default:a=t.defaultError,Ae.assertNever(u)}return{message:a}};let jw=Hd;function Lw(){return jw}const kw=u=>{const{data:t,path:a,errorMaps:r,issueData:s}=u,o=[...a,...s.path||[]],c={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let f="";const p=r.filter(h=>!!h).slice().reverse();for(const h of p)f=h(c,{data:t,defaultError:f}).message;return{...s,path:o,message:f}};function te(u,t){const a=Lw(),r=kw({issueData:t,data:u.data,path:u.path,errorMaps:[u.common.contextualErrorMap,u.schemaErrorMap,a,a===Hd?void 0:Hd].filter(s=>!!s)});u.common.issues.push(r)}class qt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,a){const r=[];for(const s of a){if(s.status==="aborted")return me;s.status==="dirty"&&t.dirty(),r.push(s.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,a){const r=[];for(const s of a){const o=await s.key,c=await s.value;r.push({key:o,value:c})}return qt.mergeObjectSync(t,r)}static mergeObjectSync(t,a){const r={};for(const s of a){const{key:o,value:c}=s;if(o.status==="aborted"||c.status==="aborted")return me;o.status==="dirty"&&t.dirty(),c.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof c.value<"u"||s.alwaysSet)&&(r[o.value]=c.value)}return{status:t.value,value:r}}}const me=Object.freeze({status:"aborted"}),Vi=u=>({status:"dirty",value:u}),en=u=>({status:"valid",value:u}),Oy=u=>u.status==="aborted",Ay=u=>u.status==="dirty",$r=u=>u.status==="valid",Mu=u=>typeof Promise<"u"&&u instanceof Promise;var ie;(function(u){u.errToObj=t=>typeof t=="string"?{message:t}:t||{},u.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(ie||(ie={}));class _a{constructor(t,a,r,s){this._cachedPath=[],this.parent=t,this.data=a,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ry=(u,t)=>{if($r(t))return{success:!0,data:t.value};if(!u.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const a=new Pn(u.common.issues);return this._error=a,this._error}}};function ve(u){if(!u)return{};const{errorMap:t,invalid_type_error:a,required_error:r,description:s}=u;if(t&&(a||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(c,f)=>{const{message:p}=u;return c.code==="invalid_enum_value"?{message:p??f.defaultError}:typeof f.data>"u"?{message:p??r??f.defaultError}:c.code!=="invalid_type"?{message:f.defaultError}:{message:p??a??f.defaultError}},description:s}}class Te{get description(){return this._def.description}_getType(t){return ma(t.data)}_getOrReturnCtx(t,a){return a||{common:t.parent.common,data:t.data,parsedType:ma(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new qt,ctx:{common:t.parent.common,data:t.data,parsedType:ma(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const a=this._parse(t);if(Mu(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(t){const a=this._parse(t);return Promise.resolve(a)}parse(t,a){const r=this.safeParse(t,a);if(r.success)return r.data;throw r.error}safeParse(t,a){const r={common:{issues:[],async:(a==null?void 0:a.async)??!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ma(t)},s=this._parseSync({data:t,path:r.path,parent:r});return Ry(r,s)}"~validate"(t){var r,s;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ma(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:a});return $r(o)?{value:o.value}:{issues:a.common.issues}}catch(o){(s=(r=o==null?void 0:o.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(o=>$r(o)?{value:o.value}:{issues:a.common.issues})}async parseAsync(t,a){const r=await this.safeParseAsync(t,a);if(r.success)return r.data;throw r.error}async safeParseAsync(t,a){const r={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ma(t)},s=this._parse({data:t,path:r.path,parent:r}),o=await(Mu(s)?s:Promise.resolve(s));return Ry(r,o)}refine(t,a){const r=s=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(s):a;return this._refinement((s,o)=>{const c=t(s),f=()=>o.addIssue({code:X.custom,...r(s)});return typeof Promise<"u"&&c instanceof Promise?c.then(p=>p?!0:(f(),!1)):c?!0:(f(),!1)})}refinement(t,a){return this._refinement((r,s)=>t(r)?!0:(s.addIssue(typeof a=="function"?a(r,s):a),!1))}_refinement(t){return new Mr({schema:this,typeName:F.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return Un.create(this,this._def)}nullable(){return Ur.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return bn.create(this)}promise(){return Pu.create(this,this._def)}or(t){return Iu.create([this,t],this._def)}and(t){return zu.create(this,t,this._def)}transform(t){return new Mr({...ve(this._def),schema:this,typeName:F.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const a=typeof t=="function"?t:()=>t;return new Vd({...ve(this._def),innerType:this,defaultValue:a,typeName:F.ZodDefault})}brand(){return new n0({typeName:F.ZodBranded,type:this,...ve(this._def)})}catch(t){const a=typeof t=="function"?t:()=>t;return new Yd({...ve(this._def),innerType:this,catchValue:a,typeName:F.ZodCatch})}describe(t){const a=this.constructor;return new a({...this._def,description:t})}pipe(t){return uf.create(this,t)}readonly(){return Xd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $w=/^c[^\s-]{8,}$/i,Dw=/^[0-9a-z]+$/,Mw=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Uw=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Iw=/^[a-z0-9_-]{21}$/i,zw=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Pw=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,qw=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Bw="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Nc;const Hw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Gw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Zw=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Vw=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Yw=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Xw=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,v_="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Qw=new RegExp(`^${v_}$`);function w_(u){let t="[0-5]\\d";u.precision?t=`${t}\\.\\d{${u.precision}}`:u.precision==null&&(t=`${t}(\\.\\d+)?`);const a=u.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${a}`}function Fw(u){return new RegExp(`^${w_(u)}$`)}function Jw(u){let t=`${v_}T${w_(u)}`;const a=[];return a.push(u.local?"Z?":"Z"),u.offset&&a.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${a.join("|")})`,new RegExp(`^${t}$`)}function Kw(u,t){return!!((t==="v4"||!t)&&Hw.test(u)||(t==="v6"||!t)&&Zw.test(u))}function Ww(u,t){if(!zw.test(u))return!1;try{const[a]=u.split("."),r=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&s.alg!==t)}catch{return!1}}function e0(u,t){return!!((t==="v4"||!t)&&Gw.test(u)||(t==="v6"||!t)&&Vw.test(u))}class Mn extends Te{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ae.string){const o=this._getOrReturnCtx(t);return te(o,{code:X.invalid_type,expected:ae.string,received:o.parsedType}),me}const r=new qt;let s;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(s=this._getOrReturnCtx(t,s),te(s,{code:X.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")t.data.length>o.value&&(s=this._getOrReturnCtx(t,s),te(s,{code:X.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const c=t.data.length>o.value,f=t.data.length<o.value;(c||f)&&(s=this._getOrReturnCtx(t,s),c?te(s,{code:X.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):f&&te(s,{code:X.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")qw.test(t.data)||(s=this._getOrReturnCtx(t,s),te(s,{validation:"email",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")Nc||(Nc=new RegExp(Bw,"u")),Nc.test(t.data)||(s=this._getOrReturnCtx(t,s),te(s,{validation:"emoji",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")Uw.test(t.data)||(s=this._getOrReturnCtx(t,s),te(s,{validation:"uuid",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")Iw.test(t.data)||(s=this._getOrReturnCtx(t,s),te(s,{validation:"nanoid",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")$w.test(t.data)||(s=this._getOrReturnCtx(t,s),te(s,{validation:"cuid",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")Dw.test(t.data)||(s=this._getOrReturnCtx(t,s),te(s,{validation:"cuid2",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")Mw.test(t.data)||(s=this._getOrReturnCtx(t,s),te(s,{validation:"ulid",code:X.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),te(s,{validation:"url",code:X.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),te(s,{validation:"regex",code:X.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(t,s),te(s,{code:X.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(s=this._getOrReturnCtx(t,s),te(s,{code:X.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(s=this._getOrReturnCtx(t,s),te(s,{code:X.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?Jw(o).test(t.data)||(s=this._getOrReturnCtx(t,s),te(s,{code:X.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?Qw.test(t.data)||(s=this._getOrReturnCtx(t,s),te(s,{code:X.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?Fw(o).test(t.data)||(s=this._getOrReturnCtx(t,s),te(s,{code:X.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?Pw.test(t.data)||(s=this._getOrReturnCtx(t,s),te(s,{validation:"duration",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?Kw(t.data,o.version)||(s=this._getOrReturnCtx(t,s),te(s,{validation:"ip",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?Ww(t.data,o.alg)||(s=this._getOrReturnCtx(t,s),te(s,{validation:"jwt",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?e0(t.data,o.version)||(s=this._getOrReturnCtx(t,s),te(s,{validation:"cidr",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?Yw.test(t.data)||(s=this._getOrReturnCtx(t,s),te(s,{validation:"base64",code:X.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?Xw.test(t.data)||(s=this._getOrReturnCtx(t,s),te(s,{validation:"base64url",code:X.invalid_string,message:o.message}),r.dirty()):Ae.assertNever(o);return{status:r.value,value:t.data}}_regex(t,a,r){return this.refinement(s=>t.test(s),{validation:a,code:X.invalid_string,...ie.errToObj(r)})}_addCheck(t){return new Mn({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...ie.errToObj(t)})}url(t){return this._addCheck({kind:"url",...ie.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...ie.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...ie.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...ie.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...ie.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...ie.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...ie.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...ie.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...ie.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...ie.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...ie.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...ie.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...ie.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...ie.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...ie.errToObj(t)})}regex(t,a){return this._addCheck({kind:"regex",regex:t,...ie.errToObj(a)})}includes(t,a){return this._addCheck({kind:"includes",value:t,position:a==null?void 0:a.position,...ie.errToObj(a==null?void 0:a.message)})}startsWith(t,a){return this._addCheck({kind:"startsWith",value:t,...ie.errToObj(a)})}endsWith(t,a){return this._addCheck({kind:"endsWith",value:t,...ie.errToObj(a)})}min(t,a){return this._addCheck({kind:"min",value:t,...ie.errToObj(a)})}max(t,a){return this._addCheck({kind:"max",value:t,...ie.errToObj(a)})}length(t,a){return this._addCheck({kind:"length",value:t,...ie.errToObj(a)})}nonempty(t){return this.min(1,ie.errToObj(t))}trim(){return new Mn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Mn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Mn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const a of this._def.checks)a.kind==="min"&&(t===null||a.value>t)&&(t=a.value);return t}get maxLength(){let t=null;for(const a of this._def.checks)a.kind==="max"&&(t===null||a.value<t)&&(t=a.value);return t}}Mn.create=u=>new Mn({checks:[],typeName:F.ZodString,coerce:(u==null?void 0:u.coerce)??!1,...ve(u)});function t0(u,t){const a=(u.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=a>r?a:r,o=Number.parseInt(u.toFixed(s).replace(".","")),c=Number.parseInt(t.toFixed(s).replace(".",""));return o%c/10**s}class Wi extends Te{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ae.number){const o=this._getOrReturnCtx(t);return te(o,{code:X.invalid_type,expected:ae.number,received:o.parsedType}),me}let r;const s=new qt;for(const o of this._def.checks)o.kind==="int"?Ae.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),te(r,{code:X.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),te(r,{code:X.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),te(r,{code:X.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?t0(t.data,o.value)!==0&&(r=this._getOrReturnCtx(t,r),te(r,{code:X.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),te(r,{code:X.not_finite,message:o.message}),s.dirty()):Ae.assertNever(o);return{status:s.value,value:t.data}}gte(t,a){return this.setLimit("min",t,!0,ie.toString(a))}gt(t,a){return this.setLimit("min",t,!1,ie.toString(a))}lte(t,a){return this.setLimit("max",t,!0,ie.toString(a))}lt(t,a){return this.setLimit("max",t,!1,ie.toString(a))}setLimit(t,a,r,s){return new Wi({...this._def,checks:[...this._def.checks,{kind:t,value:a,inclusive:r,message:ie.toString(s)}]})}_addCheck(t){return new Wi({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:ie.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ie.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ie.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ie.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ie.toString(t)})}multipleOf(t,a){return this._addCheck({kind:"multipleOf",value:t,message:ie.toString(a)})}finite(t){return this._addCheck({kind:"finite",message:ie.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ie.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ie.toString(t)})}get minValue(){let t=null;for(const a of this._def.checks)a.kind==="min"&&(t===null||a.value>t)&&(t=a.value);return t}get maxValue(){let t=null;for(const a of this._def.checks)a.kind==="max"&&(t===null||a.value<t)&&(t=a.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Ae.isInteger(t.value))}get isFinite(){let t=null,a=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(a===null||r.value>a)&&(a=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(a)&&Number.isFinite(t)}}Wi.create=u=>new Wi({checks:[],typeName:F.ZodNumber,coerce:(u==null?void 0:u.coerce)||!1,...ve(u)});class es extends Te{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==ae.bigint)return this._getInvalidInput(t);let r;const s=new qt;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),te(r,{code:X.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),te(r,{code:X.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),te(r,{code:X.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):Ae.assertNever(o);return{status:s.value,value:t.data}}_getInvalidInput(t){const a=this._getOrReturnCtx(t);return te(a,{code:X.invalid_type,expected:ae.bigint,received:a.parsedType}),me}gte(t,a){return this.setLimit("min",t,!0,ie.toString(a))}gt(t,a){return this.setLimit("min",t,!1,ie.toString(a))}lte(t,a){return this.setLimit("max",t,!0,ie.toString(a))}lt(t,a){return this.setLimit("max",t,!1,ie.toString(a))}setLimit(t,a,r,s){return new es({...this._def,checks:[...this._def.checks,{kind:t,value:a,inclusive:r,message:ie.toString(s)}]})}_addCheck(t){return new es({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ie.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ie.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ie.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ie.toString(t)})}multipleOf(t,a){return this._addCheck({kind:"multipleOf",value:t,message:ie.toString(a)})}get minValue(){let t=null;for(const a of this._def.checks)a.kind==="min"&&(t===null||a.value>t)&&(t=a.value);return t}get maxValue(){let t=null;for(const a of this._def.checks)a.kind==="max"&&(t===null||a.value<t)&&(t=a.value);return t}}es.create=u=>new es({checks:[],typeName:F.ZodBigInt,coerce:(u==null?void 0:u.coerce)??!1,...ve(u)});class xy extends Te{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ae.boolean){const r=this._getOrReturnCtx(t);return te(r,{code:X.invalid_type,expected:ae.boolean,received:r.parsedType}),me}return en(t.data)}}xy.create=u=>new xy({typeName:F.ZodBoolean,coerce:(u==null?void 0:u.coerce)||!1,...ve(u)});class Uu extends Te{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ae.date){const o=this._getOrReturnCtx(t);return te(o,{code:X.invalid_type,expected:ae.date,received:o.parsedType}),me}if(Number.isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return te(o,{code:X.invalid_date}),me}const r=new qt;let s;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(s=this._getOrReturnCtx(t,s),te(s,{code:X.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(s=this._getOrReturnCtx(t,s),te(s,{code:X.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):Ae.assertNever(o);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Uu({...this._def,checks:[...this._def.checks,t]})}min(t,a){return this._addCheck({kind:"min",value:t.getTime(),message:ie.toString(a)})}max(t,a){return this._addCheck({kind:"max",value:t.getTime(),message:ie.toString(a)})}get minDate(){let t=null;for(const a of this._def.checks)a.kind==="min"&&(t===null||a.value>t)&&(t=a.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const a of this._def.checks)a.kind==="max"&&(t===null||a.value<t)&&(t=a.value);return t!=null?new Date(t):null}}Uu.create=u=>new Uu({checks:[],coerce:(u==null?void 0:u.coerce)||!1,typeName:F.ZodDate,...ve(u)});class Cy extends Te{_parse(t){if(this._getType(t)!==ae.symbol){const r=this._getOrReturnCtx(t);return te(r,{code:X.invalid_type,expected:ae.symbol,received:r.parsedType}),me}return en(t.data)}}Cy.create=u=>new Cy({typeName:F.ZodSymbol,...ve(u)});class Ny extends Te{_parse(t){if(this._getType(t)!==ae.undefined){const r=this._getOrReturnCtx(t);return te(r,{code:X.invalid_type,expected:ae.undefined,received:r.parsedType}),me}return en(t.data)}}Ny.create=u=>new Ny({typeName:F.ZodUndefined,...ve(u)});class jy extends Te{_parse(t){if(this._getType(t)!==ae.null){const r=this._getOrReturnCtx(t);return te(r,{code:X.invalid_type,expected:ae.null,received:r.parsedType}),me}return en(t.data)}}jy.create=u=>new jy({typeName:F.ZodNull,...ve(u)});class Gd extends Te{constructor(){super(...arguments),this._any=!0}_parse(t){return en(t.data)}}Gd.create=u=>new Gd({typeName:F.ZodAny,...ve(u)});class Ly extends Te{constructor(){super(...arguments),this._unknown=!0}_parse(t){return en(t.data)}}Ly.create=u=>new Ly({typeName:F.ZodUnknown,...ve(u)});class ba extends Te{_parse(t){const a=this._getOrReturnCtx(t);return te(a,{code:X.invalid_type,expected:ae.never,received:a.parsedType}),me}}ba.create=u=>new ba({typeName:F.ZodNever,...ve(u)});class ky extends Te{_parse(t){if(this._getType(t)!==ae.undefined){const r=this._getOrReturnCtx(t);return te(r,{code:X.invalid_type,expected:ae.void,received:r.parsedType}),me}return en(t.data)}}ky.create=u=>new ky({typeName:F.ZodVoid,...ve(u)});class bn extends Te{_parse(t){const{ctx:a,status:r}=this._processInputParams(t),s=this._def;if(a.parsedType!==ae.array)return te(a,{code:X.invalid_type,expected:ae.array,received:a.parsedType}),me;if(s.exactLength!==null){const c=a.data.length>s.exactLength.value,f=a.data.length<s.exactLength.value;(c||f)&&(te(a,{code:c?X.too_big:X.too_small,minimum:f?s.exactLength.value:void 0,maximum:c?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&a.data.length<s.minLength.value&&(te(a,{code:X.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&a.data.length>s.maxLength.value&&(te(a,{code:X.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),a.common.async)return Promise.all([...a.data].map((c,f)=>s.type._parseAsync(new _a(a,c,a.path,f)))).then(c=>qt.mergeArray(r,c));const o=[...a.data].map((c,f)=>s.type._parseSync(new _a(a,c,a.path,f)));return qt.mergeArray(r,o)}get element(){return this._def.type}min(t,a){return new bn({...this._def,minLength:{value:t,message:ie.toString(a)}})}max(t,a){return new bn({...this._def,maxLength:{value:t,message:ie.toString(a)}})}length(t,a){return new bn({...this._def,exactLength:{value:t,message:ie.toString(a)}})}nonempty(t){return this.min(1,t)}}bn.create=(u,t)=>new bn({type:u,minLength:null,maxLength:null,exactLength:null,typeName:F.ZodArray,...ve(t)});function jr(u){if(u instanceof We){const t={};for(const a in u.shape){const r=u.shape[a];t[a]=Un.create(jr(r))}return new We({...u._def,shape:()=>t})}else return u instanceof bn?new bn({...u._def,type:jr(u.element)}):u instanceof Un?Un.create(jr(u.unwrap())):u instanceof Ur?Ur.create(jr(u.unwrap())):u instanceof Ga?Ga.create(u.items.map(t=>jr(t))):u}class We extends Te{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),a=Ae.objectKeys(t);return this._cached={shape:t,keys:a},this._cached}_parse(t){if(this._getType(t)!==ae.object){const h=this._getOrReturnCtx(t);return te(h,{code:X.invalid_type,expected:ae.object,received:h.parsedType}),me}const{status:r,ctx:s}=this._processInputParams(t),{shape:o,keys:c}=this._getCached(),f=[];if(!(this._def.catchall instanceof ba&&this._def.unknownKeys==="strip"))for(const h in s.data)c.includes(h)||f.push(h);const p=[];for(const h of c){const y=o[h],_=s.data[h];p.push({key:{status:"valid",value:h},value:y._parse(new _a(s,_,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof ba){const h=this._def.unknownKeys;if(h==="passthrough")for(const y of f)p.push({key:{status:"valid",value:y},value:{status:"valid",value:s.data[y]}});else if(h==="strict")f.length>0&&(te(s,{code:X.unrecognized_keys,keys:f}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const y of f){const _=s.data[y];p.push({key:{status:"valid",value:y},value:h._parse(new _a(s,_,s.path,y)),alwaysSet:y in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const y of p){const _=await y.key,b=await y.value;h.push({key:_,value:b,alwaysSet:y.alwaysSet})}return h}).then(h=>qt.mergeObjectSync(r,h)):qt.mergeObjectSync(r,p)}get shape(){return this._def.shape()}strict(t){return ie.errToObj,new We({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(a,r)=>{var o,c;const s=((c=(o=this._def).errorMap)==null?void 0:c.call(o,a,r).message)??r.defaultError;return a.code==="unrecognized_keys"?{message:ie.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new We({...this._def,unknownKeys:"strip"})}passthrough(){return new We({...this._def,unknownKeys:"passthrough"})}extend(t){return new We({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new We({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:F.ZodObject})}setKey(t,a){return this.augment({[t]:a})}catchall(t){return new We({...this._def,catchall:t})}pick(t){const a={};for(const r of Ae.objectKeys(t))t[r]&&this.shape[r]&&(a[r]=this.shape[r]);return new We({...this._def,shape:()=>a})}omit(t){const a={};for(const r of Ae.objectKeys(this.shape))t[r]||(a[r]=this.shape[r]);return new We({...this._def,shape:()=>a})}deepPartial(){return jr(this)}partial(t){const a={};for(const r of Ae.objectKeys(this.shape)){const s=this.shape[r];t&&!t[r]?a[r]=s:a[r]=s.optional()}return new We({...this._def,shape:()=>a})}required(t){const a={};for(const r of Ae.objectKeys(this.shape))if(t&&!t[r])a[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Un;)o=o._def.innerType;a[r]=o}return new We({...this._def,shape:()=>a})}keyof(){return S_(Ae.objectKeys(this.shape))}}We.create=(u,t)=>new We({shape:()=>u,unknownKeys:"strip",catchall:ba.create(),typeName:F.ZodObject,...ve(t)});We.strictCreate=(u,t)=>new We({shape:()=>u,unknownKeys:"strict",catchall:ba.create(),typeName:F.ZodObject,...ve(t)});We.lazycreate=(u,t)=>new We({shape:u,unknownKeys:"strip",catchall:ba.create(),typeName:F.ZodObject,...ve(t)});class Iu extends Te{_parse(t){const{ctx:a}=this._processInputParams(t),r=this._def.options;function s(o){for(const f of o)if(f.result.status==="valid")return f.result;for(const f of o)if(f.result.status==="dirty")return a.common.issues.push(...f.ctx.common.issues),f.result;const c=o.map(f=>new Pn(f.ctx.common.issues));return te(a,{code:X.invalid_union,unionErrors:c}),me}if(a.common.async)return Promise.all(r.map(async o=>{const c={...a,common:{...a.common,issues:[]},parent:null};return{result:await o._parseAsync({data:a.data,path:a.path,parent:c}),ctx:c}})).then(s);{let o;const c=[];for(const p of r){const h={...a,common:{...a.common,issues:[]},parent:null},y=p._parseSync({data:a.data,path:a.path,parent:h});if(y.status==="valid")return y;y.status==="dirty"&&!o&&(o={result:y,ctx:h}),h.common.issues.length&&c.push(h.common.issues)}if(o)return a.common.issues.push(...o.ctx.common.issues),o.result;const f=c.map(p=>new Pn(p));return te(a,{code:X.invalid_union,unionErrors:f}),me}}get options(){return this._def.options}}Iu.create=(u,t)=>new Iu({options:u,typeName:F.ZodUnion,...ve(t)});function Zd(u,t){const a=ma(u),r=ma(t);if(u===t)return{valid:!0,data:u};if(a===ae.object&&r===ae.object){const s=Ae.objectKeys(t),o=Ae.objectKeys(u).filter(f=>s.indexOf(f)!==-1),c={...u,...t};for(const f of o){const p=Zd(u[f],t[f]);if(!p.valid)return{valid:!1};c[f]=p.data}return{valid:!0,data:c}}else if(a===ae.array&&r===ae.array){if(u.length!==t.length)return{valid:!1};const s=[];for(let o=0;o<u.length;o++){const c=u[o],f=t[o],p=Zd(c,f);if(!p.valid)return{valid:!1};s.push(p.data)}return{valid:!0,data:s}}else return a===ae.date&&r===ae.date&&+u==+t?{valid:!0,data:u}:{valid:!1}}class zu extends Te{_parse(t){const{status:a,ctx:r}=this._processInputParams(t),s=(o,c)=>{if(Oy(o)||Oy(c))return me;const f=Zd(o.value,c.value);return f.valid?((Ay(o)||Ay(c))&&a.dirty(),{status:a.value,value:f.data}):(te(r,{code:X.invalid_intersection_types}),me)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,c])=>s(o,c)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}zu.create=(u,t,a)=>new zu({left:u,right:t,typeName:F.ZodIntersection,...ve(a)});class Ga extends Te{_parse(t){const{status:a,ctx:r}=this._processInputParams(t);if(r.parsedType!==ae.array)return te(r,{code:X.invalid_type,expected:ae.array,received:r.parsedType}),me;if(r.data.length<this._def.items.length)return te(r,{code:X.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),me;!this._def.rest&&r.data.length>this._def.items.length&&(te(r,{code:X.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());const o=[...r.data].map((c,f)=>{const p=this._def.items[f]||this._def.rest;return p?p._parse(new _a(r,c,r.path,f)):null}).filter(c=>!!c);return r.common.async?Promise.all(o).then(c=>qt.mergeArray(a,c)):qt.mergeArray(a,o)}get items(){return this._def.items}rest(t){return new Ga({...this._def,rest:t})}}Ga.create=(u,t)=>{if(!Array.isArray(u))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ga({items:u,typeName:F.ZodTuple,rest:null,...ve(t)})};class $y extends Te{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:a,ctx:r}=this._processInputParams(t);if(r.parsedType!==ae.map)return te(r,{code:X.invalid_type,expected:ae.map,received:r.parsedType}),me;const s=this._def.keyType,o=this._def.valueType,c=[...r.data.entries()].map(([f,p],h)=>({key:s._parse(new _a(r,f,r.path,[h,"key"])),value:o._parse(new _a(r,p,r.path,[h,"value"]))}));if(r.common.async){const f=new Map;return Promise.resolve().then(async()=>{for(const p of c){const h=await p.key,y=await p.value;if(h.status==="aborted"||y.status==="aborted")return me;(h.status==="dirty"||y.status==="dirty")&&a.dirty(),f.set(h.value,y.value)}return{status:a.value,value:f}})}else{const f=new Map;for(const p of c){const h=p.key,y=p.value;if(h.status==="aborted"||y.status==="aborted")return me;(h.status==="dirty"||y.status==="dirty")&&a.dirty(),f.set(h.value,y.value)}return{status:a.value,value:f}}}}$y.create=(u,t,a)=>new $y({valueType:t,keyType:u,typeName:F.ZodMap,...ve(a)});class ts extends Te{_parse(t){const{status:a,ctx:r}=this._processInputParams(t);if(r.parsedType!==ae.set)return te(r,{code:X.invalid_type,expected:ae.set,received:r.parsedType}),me;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(te(r,{code:X.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),a.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(te(r,{code:X.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),a.dirty());const o=this._def.valueType;function c(p){const h=new Set;for(const y of p){if(y.status==="aborted")return me;y.status==="dirty"&&a.dirty(),h.add(y.value)}return{status:a.value,value:h}}const f=[...r.data.values()].map((p,h)=>o._parse(new _a(r,p,r.path,h)));return r.common.async?Promise.all(f).then(p=>c(p)):c(f)}min(t,a){return new ts({...this._def,minSize:{value:t,message:ie.toString(a)}})}max(t,a){return new ts({...this._def,maxSize:{value:t,message:ie.toString(a)}})}size(t,a){return this.min(t,a).max(t,a)}nonempty(t){return this.min(1,t)}}ts.create=(u,t)=>new ts({valueType:u,minSize:null,maxSize:null,typeName:F.ZodSet,...ve(t)});class Dy extends Te{get schema(){return this._def.getter()}_parse(t){const{ctx:a}=this._processInputParams(t);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}}Dy.create=(u,t)=>new Dy({getter:u,typeName:F.ZodLazy,...ve(t)});class My extends Te{_parse(t){if(t.data!==this._def.value){const a=this._getOrReturnCtx(t);return te(a,{received:a.data,code:X.invalid_literal,expected:this._def.value}),me}return{status:"valid",value:t.data}}get value(){return this._def.value}}My.create=(u,t)=>new My({value:u,typeName:F.ZodLiteral,...ve(t)});function S_(u,t){return new Dr({values:u,typeName:F.ZodEnum,...ve(t)})}class Dr extends Te{_parse(t){if(typeof t.data!="string"){const a=this._getOrReturnCtx(t),r=this._def.values;return te(a,{expected:Ae.joinValues(r),received:a.parsedType,code:X.invalid_type}),me}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const a=this._getOrReturnCtx(t),r=this._def.values;return te(a,{received:a.data,code:X.invalid_enum_value,options:r}),me}return en(t.data)}get options(){return this._def.values}get enum(){const t={};for(const a of this._def.values)t[a]=a;return t}get Values(){const t={};for(const a of this._def.values)t[a]=a;return t}get Enum(){const t={};for(const a of this._def.values)t[a]=a;return t}extract(t,a=this._def){return Dr.create(t,{...this._def,...a})}exclude(t,a=this._def){return Dr.create(this.options.filter(r=>!t.includes(r)),{...this._def,...a})}}Dr.create=S_;class Uy extends Te{_parse(t){const a=Ae.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==ae.string&&r.parsedType!==ae.number){const s=Ae.objectValues(a);return te(r,{expected:Ae.joinValues(s),received:r.parsedType,code:X.invalid_type}),me}if(this._cache||(this._cache=new Set(Ae.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const s=Ae.objectValues(a);return te(r,{received:r.data,code:X.invalid_enum_value,options:s}),me}return en(t.data)}get enum(){return this._def.values}}Uy.create=(u,t)=>new Uy({values:u,typeName:F.ZodNativeEnum,...ve(t)});class Pu extends Te{unwrap(){return this._def.type}_parse(t){const{ctx:a}=this._processInputParams(t);if(a.parsedType!==ae.promise&&a.common.async===!1)return te(a,{code:X.invalid_type,expected:ae.promise,received:a.parsedType}),me;const r=a.parsedType===ae.promise?a.data:Promise.resolve(a.data);return en(r.then(s=>this._def.type.parseAsync(s,{path:a.path,errorMap:a.common.contextualErrorMap})))}}Pu.create=(u,t)=>new Pu({type:u,typeName:F.ZodPromise,...ve(t)});class Mr extends Te{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===F.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:a,ctx:r}=this._processInputParams(t),s=this._def.effect||null,o={addIssue:c=>{te(r,c),c.fatal?a.abort():a.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const c=s.transform(r.data,o);if(r.common.async)return Promise.resolve(c).then(async f=>{if(a.value==="aborted")return me;const p=await this._def.schema._parseAsync({data:f,path:r.path,parent:r});return p.status==="aborted"?me:p.status==="dirty"||a.value==="dirty"?Vi(p.value):p});{if(a.value==="aborted")return me;const f=this._def.schema._parseSync({data:c,path:r.path,parent:r});return f.status==="aborted"?me:f.status==="dirty"||a.value==="dirty"?Vi(f.value):f}}if(s.type==="refinement"){const c=f=>{const p=s.refinement(f,o);if(r.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return f};if(r.common.async===!1){const f=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return f.status==="aborted"?me:(f.status==="dirty"&&a.dirty(),c(f.value),{status:a.value,value:f.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(f=>f.status==="aborted"?me:(f.status==="dirty"&&a.dirty(),c(f.value).then(()=>({status:a.value,value:f.value}))))}if(s.type==="transform")if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!$r(c))return me;const f=s.transform(c.value,o);if(f instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:f}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>$r(c)?Promise.resolve(s.transform(c.value,o)).then(f=>({status:a.value,value:f})):me);Ae.assertNever(s)}}Mr.create=(u,t,a)=>new Mr({schema:u,typeName:F.ZodEffects,effect:t,...ve(a)});Mr.createWithPreprocess=(u,t,a)=>new Mr({schema:t,effect:{type:"preprocess",transform:u},typeName:F.ZodEffects,...ve(a)});class Un extends Te{_parse(t){return this._getType(t)===ae.undefined?en(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Un.create=(u,t)=>new Un({innerType:u,typeName:F.ZodOptional,...ve(t)});class Ur extends Te{_parse(t){return this._getType(t)===ae.null?en(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ur.create=(u,t)=>new Ur({innerType:u,typeName:F.ZodNullable,...ve(t)});class Vd extends Te{_parse(t){const{ctx:a}=this._processInputParams(t);let r=a.data;return a.parsedType===ae.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:a.path,parent:a})}removeDefault(){return this._def.innerType}}Vd.create=(u,t)=>new Vd({innerType:u,typeName:F.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...ve(t)});class Yd extends Te{_parse(t){const{ctx:a}=this._processInputParams(t),r={...a,common:{...a.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Mu(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Pn(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Pn(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Yd.create=(u,t)=>new Yd({innerType:u,typeName:F.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...ve(t)});class Iy extends Te{_parse(t){if(this._getType(t)!==ae.nan){const r=this._getOrReturnCtx(t);return te(r,{code:X.invalid_type,expected:ae.nan,received:r.parsedType}),me}return{status:"valid",value:t.data}}}Iy.create=u=>new Iy({typeName:F.ZodNaN,...ve(u)});class n0 extends Te{_parse(t){const{ctx:a}=this._processInputParams(t),r=a.data;return this._def.type._parse({data:r,path:a.path,parent:a})}unwrap(){return this._def.type}}class uf extends Te{_parse(t){const{status:a,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?me:o.status==="dirty"?(a.dirty(),Vi(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?me:s.status==="dirty"?(a.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(t,a){return new uf({in:t,out:a,typeName:F.ZodPipeline})}}class Xd extends Te{_parse(t){const a=this._def.innerType._parse(t),r=s=>($r(s)&&(s.value=Object.freeze(s.value)),s);return Mu(a)?a.then(s=>r(s)):r(a)}unwrap(){return this._def.innerType}}Xd.create=(u,t)=>new Xd({innerType:u,typeName:F.ZodReadonly,...ve(t)});var F;(function(u){u.ZodString="ZodString",u.ZodNumber="ZodNumber",u.ZodNaN="ZodNaN",u.ZodBigInt="ZodBigInt",u.ZodBoolean="ZodBoolean",u.ZodDate="ZodDate",u.ZodSymbol="ZodSymbol",u.ZodUndefined="ZodUndefined",u.ZodNull="ZodNull",u.ZodAny="ZodAny",u.ZodUnknown="ZodUnknown",u.ZodNever="ZodNever",u.ZodVoid="ZodVoid",u.ZodArray="ZodArray",u.ZodObject="ZodObject",u.ZodUnion="ZodUnion",u.ZodDiscriminatedUnion="ZodDiscriminatedUnion",u.ZodIntersection="ZodIntersection",u.ZodTuple="ZodTuple",u.ZodRecord="ZodRecord",u.ZodMap="ZodMap",u.ZodSet="ZodSet",u.ZodFunction="ZodFunction",u.ZodLazy="ZodLazy",u.ZodLiteral="ZodLiteral",u.ZodEnum="ZodEnum",u.ZodEffects="ZodEffects",u.ZodNativeEnum="ZodNativeEnum",u.ZodOptional="ZodOptional",u.ZodNullable="ZodNullable",u.ZodDefault="ZodDefault",u.ZodCatch="ZodCatch",u.ZodPromise="ZodPromise",u.ZodBranded="ZodBranded",u.ZodPipeline="ZodPipeline",u.ZodReadonly="ZodReadonly"})(F||(F={}));const a0=Mn.create,zy=Gd.create;ba.create;bn.create;const r0=We.create;Iu.create;zu.create;Ga.create;Dr.create;Pu.create;Un.create;Ur.create;var Bi={exports:{}},jc={},Lc,Py;function i0(){if(Py)return Lc;Py=1;function u(t,a){typeof a=="boolean"&&(a={forever:a}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=a||{},this._maxRetryTime=a&&a.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return Lc=u,u.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},u.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},u.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var a=new Date().getTime();if(t&&a-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var s=this;return this._timer=setTimeout(function(){s._attempts++,s._operationTimeoutCb&&(s._timeout=setTimeout(function(){s._operationTimeoutCb(s._attempts)},s._operationTimeout),s._options.unref&&s._timeout.unref()),s._fn(s._attempts)},r),this._options.unref&&this._timer.unref(),!0},u.prototype.attempt=function(t,a){this._fn=t,a&&(a.timeout&&(this._operationTimeout=a.timeout),a.cb&&(this._operationTimeoutCb=a.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},u.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},u.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},u.prototype.start=u.prototype.try,u.prototype.errors=function(){return this._errors},u.prototype.attempts=function(){return this._attempts},u.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},a=null,r=0,s=0;s<this._errors.length;s++){var o=this._errors[s],c=o.message,f=(t[c]||0)+1;t[c]=f,f>=r&&(a=o,r=f)}return a},Lc}var qy;function s0(){return qy||(qy=1,function(u){var t=i0();u.operation=function(a){var r=u.timeouts(a);return new t(r,{forever:a&&(a.forever||a.retries===1/0),unref:a&&a.unref,maxRetryTime:a&&a.maxRetryTime})},u.timeouts=function(a){if(a instanceof Array)return[].concat(a);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in a)r[s]=a[s];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],c=0;c<r.retries;c++)o.push(this.createTimeout(c,r));return a&&a.forever&&!o.length&&o.push(this.createTimeout(c,r)),o.sort(function(f,p){return f-p}),o},u.createTimeout=function(a,r){var s=r.randomize?Math.random()+1:1,o=Math.round(s*Math.max(r.minTimeout,1)*Math.pow(r.factor,a));return o=Math.min(o,r.maxTimeout),o},u.wrap=function(a,r,s){if(r instanceof Array&&(s=r,r=null),!s){s=[];for(var o in a)typeof a[o]=="function"&&s.push(o)}for(var c=0;c<s.length;c++){var f=s[c],p=a[f];a[f]=(function(y){var _=u.operation(r),b=Array.prototype.slice.call(arguments,1),w=b.pop();b.push(function(S){_.retry(S)||(S&&(arguments[0]=_.mainError()),w.apply(this,arguments))}),_.attempt(function(){y.apply(a,b)})}).bind(a,p),a[f].options=r}}}(jc)),jc}var kc,By;function u0(){return By||(By=1,kc=s0()),kc}var Hy;function l0(){if(Hy)return Bi.exports;Hy=1;const u=u0(),t=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class a extends Error{constructor(f){super(),f instanceof Error?(this.originalError=f,{message:f}=f):(this.originalError=new Error(f),this.originalError.stack=this.stack),this.name="AbortError",this.message=f}}const r=(c,f,p)=>{const h=p.retries-(f-1);return c.attemptNumber=f,c.retriesLeft=h,c},s=c=>t.includes(c),o=(c,f)=>new Promise((p,h)=>{f={onFailedAttempt:()=>{},retries:10,...f};const y=u.operation(f);y.attempt(async _=>{try{p(await c(_))}catch(b){if(!(b instanceof Error)){h(new TypeError(`Non-error was thrown: "${b}". You should only throw errors.`));return}if(b instanceof a)y.stop(),h(b.originalError);else if(b instanceof TypeError&&!s(b.message))y.stop(),h(b);else{r(b,_,f);try{await f.onFailedAttempt(b)}catch(w){h(w);return}y.retry(b)||h(y.mainError())}}})});return Bi.exports=o,Bi.exports.default=o,Bi.exports.AbortError=a,Bi.exports}var o0=l0();const qu=ss(o0),c0=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Yi(u){return typeof u=="string"&&c0.test(u)}var ft=[];for(var $c=0;$c<256;++$c)ft.push(($c+256).toString(16).slice(1));function d0(u,t=0){return(ft[u[t+0]]+ft[u[t+1]]+ft[u[t+2]]+ft[u[t+3]]+"-"+ft[u[t+4]]+ft[u[t+5]]+"-"+ft[u[t+6]]+ft[u[t+7]]+"-"+ft[u[t+8]]+ft[u[t+9]]+"-"+ft[u[t+10]]+ft[u[t+11]]+ft[u[t+12]]+ft[u[t+13]]+ft[u[t+14]]+ft[u[t+15]]).toLowerCase()}var Ou,f0=new Uint8Array(16);function h0(){if(!Ou&&(Ou=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ou))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ou(f0)}var m0=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Gy={randomUUID:m0};function vt(u,t,a){if(Gy.randomUUID&&!u)return Gy.randomUUID();u=u||{};var r=u.random||(u.rng||h0)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,d0(r)}var Au={},Dc={exports:{}},Zy;function p0(){return Zy||(Zy=1,function(u){var t=Object.prototype.hasOwnProperty,a="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(a=!1));function s(p,h,y){this.fn=p,this.context=h,this.once=y||!1}function o(p,h,y,_,b){if(typeof y!="function")throw new TypeError("The listener must be a function");var w=new s(y,_||p,b),S=a?a+h:h;return p._events[S]?p._events[S].fn?p._events[S]=[p._events[S],w]:p._events[S].push(w):(p._events[S]=w,p._eventsCount++),p}function c(p,h){--p._eventsCount===0?p._events=new r:delete p._events[h]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var h=[],y,_;if(this._eventsCount===0)return h;for(_ in y=this._events)t.call(y,_)&&h.push(a?_.slice(1):_);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(y)):h},f.prototype.listeners=function(h){var y=a?a+h:h,_=this._events[y];if(!_)return[];if(_.fn)return[_.fn];for(var b=0,w=_.length,S=new Array(w);b<w;b++)S[b]=_[b].fn;return S},f.prototype.listenerCount=function(h){var y=a?a+h:h,_=this._events[y];return _?_.fn?1:_.length:0},f.prototype.emit=function(h,y,_,b,w,S){var T=a?a+h:h;if(!this._events[T])return!1;var R=this._events[T],k=arguments.length,q,N;if(R.fn){switch(R.once&&this.removeListener(h,R.fn,void 0,!0),k){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,y),!0;case 3:return R.fn.call(R.context,y,_),!0;case 4:return R.fn.call(R.context,y,_,b),!0;case 5:return R.fn.call(R.context,y,_,b,w),!0;case 6:return R.fn.call(R.context,y,_,b,w,S),!0}for(N=1,q=new Array(k-1);N<k;N++)q[N-1]=arguments[N];R.fn.apply(R.context,q)}else{var Y=R.length,I;for(N=0;N<Y;N++)switch(R[N].once&&this.removeListener(h,R[N].fn,void 0,!0),k){case 1:R[N].fn.call(R[N].context);break;case 2:R[N].fn.call(R[N].context,y);break;case 3:R[N].fn.call(R[N].context,y,_);break;case 4:R[N].fn.call(R[N].context,y,_,b);break;default:if(!q)for(I=1,q=new Array(k-1);I<k;I++)q[I-1]=arguments[I];R[N].fn.apply(R[N].context,q)}}return!0},f.prototype.on=function(h,y,_){return o(this,h,y,_,!1)},f.prototype.once=function(h,y,_){return o(this,h,y,_,!0)},f.prototype.removeListener=function(h,y,_,b){var w=a?a+h:h;if(!this._events[w])return this;if(!y)return c(this,w),this;var S=this._events[w];if(S.fn)S.fn===y&&(!b||S.once)&&(!_||S.context===_)&&c(this,w);else{for(var T=0,R=[],k=S.length;T<k;T++)(S[T].fn!==y||b&&!S[T].once||_&&S[T].context!==_)&&R.push(S[T]);R.length?this._events[w]=R.length===1?R[0]:R:c(this,w)}return this},f.prototype.removeAllListeners=function(h){var y;return h?(y=a?a+h:h,this._events[y]&&c(this,y)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=a,f.EventEmitter=f,u.exports=f}(Dc)),Dc.exports}var Hi={exports:{}},Mc,Vy;function y0(){return Vy||(Vy=1,Mc=(u,t)=>(t=t||(()=>{}),u.then(a=>new Promise(r=>{r(t())}).then(()=>a),a=>new Promise(r=>{r(t())}).then(()=>{throw a})))),Mc}var Yy;function g0(){if(Yy)return Hi.exports;Yy=1;const u=y0();class t extends Error{constructor(s){super(s),this.name="TimeoutError"}}const a=(r,s,o)=>new Promise((c,f)=>{if(typeof s!="number"||s<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(s===1/0){c(r);return}const p=setTimeout(()=>{if(typeof o=="function"){try{c(o())}catch(_){f(_)}return}const h=typeof o=="string"?o:`Promise timed out after ${s} milliseconds`,y=o instanceof Error?o:new t(h);typeof r.cancel=="function"&&r.cancel(),f(y)},s);u(r.then(c,f),()=>{clearTimeout(p)})});return Hi.exports=a,Hi.exports.default=a,Hi.exports.TimeoutError=t,Hi.exports}var Ru={},xu={},Xy;function _0(){if(Xy)return xu;Xy=1,Object.defineProperty(xu,"__esModule",{value:!0});function u(t,a,r){let s=0,o=t.length;for(;o>0;){const c=o/2|0;let f=s+c;r(t[f],a)<=0?(s=++f,o-=c+1):o=c}return s}return xu.default=u,xu}var Qy;function b0(){if(Qy)return Ru;Qy=1,Object.defineProperty(Ru,"__esModule",{value:!0});const u=_0();class t{constructor(){this._queue=[]}enqueue(r,s){s=Object.assign({priority:0},s);const o={priority:s.priority,run:r};if(this.size&&this._queue[this.size-1].priority>=s.priority){this._queue.push(o);return}const c=u.default(this._queue,o,(f,p)=>p.priority-f.priority);this._queue.splice(c,0,o)}dequeue(){const r=this._queue.shift();return r==null?void 0:r.run}filter(r){return this._queue.filter(s=>s.priority===r.priority).map(s=>s.run)}get size(){return this._queue.length}}return Ru.default=t,Ru}var Fy;function v0(){if(Fy)return Au;Fy=1,Object.defineProperty(Au,"__esModule",{value:!0});const u=p0(),t=g0(),a=b0(),r=()=>{},s=new t.TimeoutError;class o extends u{constructor(f){var p,h,y,_;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,f=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:a.default},f),!(typeof f.intervalCap=="number"&&f.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(h=(p=f.intervalCap)===null||p===void 0?void 0:p.toString())!==null&&h!==void 0?h:""}\` (${typeof f.intervalCap})`);if(f.interval===void 0||!(Number.isFinite(f.interval)&&f.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(_=(y=f.interval)===null||y===void 0?void 0:y.toString())!==null&&_!==void 0?_:""}\` (${typeof f.interval})`);this._carryoverConcurrencyCount=f.carryoverConcurrencyCount,this._isIntervalIgnored=f.intervalCap===1/0||f.interval===0,this._intervalCap=f.intervalCap,this._interval=f.interval,this._queue=new f.queueClass,this._queueClass=f.queueClass,this.concurrency=f.concurrency,this._timeout=f.timeout,this._throwOnTimeout=f.throwOnTimeout===!0,this._isPaused=f.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const f=Date.now();if(this._intervalId===void 0){const p=this._intervalEnd-f;if(p<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},p)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const f=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const p=this._queue.dequeue();return p?(this.emit("active"),p(),f&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(f){if(!(typeof f=="number"&&f>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${f}\` (${typeof f})`);this._concurrency=f,this._processQueue()}async add(f,p={}){return new Promise((h,y)=>{const _=async()=>{this._pendingCount++,this._intervalCount++;try{const b=this._timeout===void 0&&p.timeout===void 0?f():t.default(Promise.resolve(f()),p.timeout===void 0?this._timeout:p.timeout,()=>{(p.throwOnTimeout===void 0?this._throwOnTimeout:p.throwOnTimeout)&&y(s)});h(await b)}catch(b){y(b)}this._next()};this._queue.enqueue(_,p),this._tryToStartAnother(),this.emit("add")})}async addAll(f,p){return Promise.all(f.map(async h=>this.add(h,p)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(f=>{const p=this._resolveEmpty;this._resolveEmpty=()=>{p(),f()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(f=>{const p=this._resolveIdle;this._resolveIdle=()=>{p(),f()}})}get size(){return this._queue.size}sizeBy(f){return this._queue.filter(f).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(f){this._timeout=f}}return Au.default=o,Au}var w0=v0();const In=ss(w0),S0=(...u)=>fetch(...u),E_=Symbol.for("ls:fetch_implementation"),E0=()=>{const u=globalThis[E_];return u?typeof u=="function"&&"Headers"in u&&"Request"in u&&"Response"in u:!1},le=u=>async(...t)=>{if(u||_n("DEBUG")==="true"){const[r,s]=t;console.log(` ${(s==null?void 0:s.method)||"GET"} ${r}`)}const a=await(globalThis[E_]??S0)(...t);return(u||_n("DEBUG")==="true")&&console.log(` ${a.status} ${a.statusText} ${a.url}`),a},T0=[400,401,403,404,405,406,407,408],O0=[409];let Jy=class{constructor(t){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,this.debug=t.debug,"default"in In?this.queue=new In.default({concurrency:this.maxConcurrency}):this.queue=new In({concurrency:this.maxConcurrency}),this.onFailedResponseHook=t==null?void 0:t.onFailedResponseHook}call(t,...a){const r=this.onFailedResponseHook;return this.queue.add(()=>qu(()=>t(...a).catch(s=>{throw s instanceof Error?s:new Error(s)}),{async onFailedAttempt(s){if(s.message.startsWith("Cancel")||s.message.startsWith("TimeoutError")||s.message.startsWith("AbortError")||(s==null?void 0:s.code)==="ECONNABORTED")throw s;const o=s==null?void 0:s.response,c=o==null?void 0:o.status;if(c){if(T0.includes(+c))throw s;if(O0.includes(+c))return;r&&await r(o)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(t,a,...r){return t.signal?Promise.race([this.call(a,...r),new Promise((s,o)=>{var c;(c=t.signal)==null||c.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(a,...r)}fetch(...t){return this.call(()=>le(this.debug)(...t).then(a=>a.ok?a:Promise.reject(a)))}};function Ky(u){return typeof(u==null?void 0:u._getType)=="function"}function Wy(u){const t={type:u._getType(),data:{content:u.content}};return u!=null&&u.additional_kwargs&&Object.keys(u.additional_kwargs).length>0&&(t.data.additional_kwargs={...u.additional_kwargs}),t}function pe(u,t){if(!Yi(u)){const a=t!==void 0?`Invalid UUID for ${t}: ${u}`:`Invalid UUID: ${u}`;throw new Error(a)}return u}const eg={};function T_(u){eg[u]||(console.warn(u),eg[u]=!0)}var Cu={exports:{}},Uc,tg;function el(){if(tg)return Uc;tg=1;const u="2.0.0",t=256,a=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,s=t-6;return Uc={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:a,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:u,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Uc}var Ic,ng;function tl(){if(ng)return Ic;ng=1;var u={};return Ic=typeof process=="object"&&u&&u.NODE_DEBUG&&/\bsemver\b/i.test(u.NODE_DEBUG)?(...a)=>console.error("SEMVER",...a):()=>{},Ic}var ag;function us(){return ag||(ag=1,function(u,t){const{MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=el(),o=tl();t=u.exports={};const c=t.re=[],f=t.safeRe=[],p=t.src=[],h=t.safeSrc=[],y=t.t={};let _=0;const b="[a-zA-Z0-9-]",w=[["\\s",1],["\\d",s],[b,r]],S=R=>{for(const[k,q]of w)R=R.split(`${k}*`).join(`${k}{0,${q}}`).split(`${k}+`).join(`${k}{1,${q}}`);return R},T=(R,k,q)=>{const N=S(k),Y=_++;o(R,Y,k),y[R]=Y,p[Y]=k,h[Y]=N,c[Y]=new RegExp(k,q?"g":void 0),f[Y]=new RegExp(N,q?"g":void 0)};T("NUMERICIDENTIFIER","0|[1-9]\\d*"),T("NUMERICIDENTIFIERLOOSE","\\d+"),T("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${b}*`),T("MAINVERSION",`(${p[y.NUMERICIDENTIFIER]})\\.(${p[y.NUMERICIDENTIFIER]})\\.(${p[y.NUMERICIDENTIFIER]})`),T("MAINVERSIONLOOSE",`(${p[y.NUMERICIDENTIFIERLOOSE]})\\.(${p[y.NUMERICIDENTIFIERLOOSE]})\\.(${p[y.NUMERICIDENTIFIERLOOSE]})`),T("PRERELEASEIDENTIFIER",`(?:${p[y.NONNUMERICIDENTIFIER]}|${p[y.NUMERICIDENTIFIER]})`),T("PRERELEASEIDENTIFIERLOOSE",`(?:${p[y.NONNUMERICIDENTIFIER]}|${p[y.NUMERICIDENTIFIERLOOSE]})`),T("PRERELEASE",`(?:-(${p[y.PRERELEASEIDENTIFIER]}(?:\\.${p[y.PRERELEASEIDENTIFIER]})*))`),T("PRERELEASELOOSE",`(?:-?(${p[y.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${p[y.PRERELEASEIDENTIFIERLOOSE]})*))`),T("BUILDIDENTIFIER",`${b}+`),T("BUILD",`(?:\\+(${p[y.BUILDIDENTIFIER]}(?:\\.${p[y.BUILDIDENTIFIER]})*))`),T("FULLPLAIN",`v?${p[y.MAINVERSION]}${p[y.PRERELEASE]}?${p[y.BUILD]}?`),T("FULL",`^${p[y.FULLPLAIN]}$`),T("LOOSEPLAIN",`[v=\\s]*${p[y.MAINVERSIONLOOSE]}${p[y.PRERELEASELOOSE]}?${p[y.BUILD]}?`),T("LOOSE",`^${p[y.LOOSEPLAIN]}$`),T("GTLT","((?:<|>)?=?)"),T("XRANGEIDENTIFIERLOOSE",`${p[y.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),T("XRANGEIDENTIFIER",`${p[y.NUMERICIDENTIFIER]}|x|X|\\*`),T("XRANGEPLAIN",`[v=\\s]*(${p[y.XRANGEIDENTIFIER]})(?:\\.(${p[y.XRANGEIDENTIFIER]})(?:\\.(${p[y.XRANGEIDENTIFIER]})(?:${p[y.PRERELEASE]})?${p[y.BUILD]}?)?)?`),T("XRANGEPLAINLOOSE",`[v=\\s]*(${p[y.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[y.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[y.XRANGEIDENTIFIERLOOSE]})(?:${p[y.PRERELEASELOOSE]})?${p[y.BUILD]}?)?)?`),T("XRANGE",`^${p[y.GTLT]}\\s*${p[y.XRANGEPLAIN]}$`),T("XRANGELOOSE",`^${p[y.GTLT]}\\s*${p[y.XRANGEPLAINLOOSE]}$`),T("COERCEPLAIN",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?`),T("COERCE",`${p[y.COERCEPLAIN]}(?:$|[^\\d])`),T("COERCEFULL",p[y.COERCEPLAIN]+`(?:${p[y.PRERELEASE]})?(?:${p[y.BUILD]})?(?:$|[^\\d])`),T("COERCERTL",p[y.COERCE],!0),T("COERCERTLFULL",p[y.COERCEFULL],!0),T("LONETILDE","(?:~>?)"),T("TILDETRIM",`(\\s*)${p[y.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",T("TILDE",`^${p[y.LONETILDE]}${p[y.XRANGEPLAIN]}$`),T("TILDELOOSE",`^${p[y.LONETILDE]}${p[y.XRANGEPLAINLOOSE]}$`),T("LONECARET","(?:\\^)"),T("CARETTRIM",`(\\s*)${p[y.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",T("CARET",`^${p[y.LONECARET]}${p[y.XRANGEPLAIN]}$`),T("CARETLOOSE",`^${p[y.LONECARET]}${p[y.XRANGEPLAINLOOSE]}$`),T("COMPARATORLOOSE",`^${p[y.GTLT]}\\s*(${p[y.LOOSEPLAIN]})$|^$`),T("COMPARATOR",`^${p[y.GTLT]}\\s*(${p[y.FULLPLAIN]})$|^$`),T("COMPARATORTRIM",`(\\s*)${p[y.GTLT]}\\s*(${p[y.LOOSEPLAIN]}|${p[y.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",T("HYPHENRANGE",`^\\s*(${p[y.XRANGEPLAIN]})\\s+-\\s+(${p[y.XRANGEPLAIN]})\\s*$`),T("HYPHENRANGELOOSE",`^\\s*(${p[y.XRANGEPLAINLOOSE]})\\s+-\\s+(${p[y.XRANGEPLAINLOOSE]})\\s*$`),T("STAR","(<|>)?=?\\s*\\*"),T("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),T("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Cu,Cu.exports)),Cu.exports}var zc,rg;function lf(){if(rg)return zc;rg=1;const u=Object.freeze({loose:!0}),t=Object.freeze({});return zc=r=>r?typeof r!="object"?u:r:t,zc}var Pc,ig;function O_(){if(ig)return Pc;ig=1;const u=/^[0-9]+$/,t=(r,s)=>{const o=u.test(r),c=u.test(s);return o&&c&&(r=+r,s=+s),r===s?0:o&&!c?-1:c&&!o?1:r<s?-1:1};return Pc={compareIdentifiers:t,rcompareIdentifiers:(r,s)=>t(s,r)},Pc}var qc,sg;function St(){if(sg)return qc;sg=1;const u=tl(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:a}=el(),{safeRe:r,t:s}=us(),o=lf(),{compareIdentifiers:c}=O_();class f{constructor(h,y){if(y=o(y),h instanceof f){if(h.loose===!!y.loose&&h.includePrerelease===!!y.includePrerelease)return h;h=h.version}else if(typeof h!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof h}".`);if(h.length>t)throw new TypeError(`version is longer than ${t} characters`);u("SemVer",h,y),this.options=y,this.loose=!!y.loose,this.includePrerelease=!!y.includePrerelease;const _=h.trim().match(y.loose?r[s.LOOSE]:r[s.FULL]);if(!_)throw new TypeError(`Invalid Version: ${h}`);if(this.raw=h,this.major=+_[1],this.minor=+_[2],this.patch=+_[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");_[4]?this.prerelease=_[4].split(".").map(b=>{if(/^[0-9]+$/.test(b)){const w=+b;if(w>=0&&w<a)return w}return b}):this.prerelease=[],this.build=_[5]?_[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(h){if(u("SemVer.compare",this.version,this.options,h),!(h instanceof f)){if(typeof h=="string"&&h===this.version)return 0;h=new f(h,this.options)}return h.version===this.version?0:this.compareMain(h)||this.comparePre(h)}compareMain(h){return h instanceof f||(h=new f(h,this.options)),c(this.major,h.major)||c(this.minor,h.minor)||c(this.patch,h.patch)}comparePre(h){if(h instanceof f||(h=new f(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;let y=0;do{const _=this.prerelease[y],b=h.prerelease[y];if(u("prerelease compare",y,_,b),_===void 0&&b===void 0)return 0;if(b===void 0)return 1;if(_===void 0)return-1;if(_===b)continue;return c(_,b)}while(++y)}compareBuild(h){h instanceof f||(h=new f(h,this.options));let y=0;do{const _=this.build[y],b=h.build[y];if(u("build compare",y,_,b),_===void 0&&b===void 0)return 0;if(b===void 0)return 1;if(_===void 0)return-1;if(_===b)continue;return c(_,b)}while(++y)}inc(h,y,_){if(h.startsWith("pre")){if(!y&&_===!1)throw new Error("invalid increment argument: identifier is empty");if(y){const b=`-${y}`.match(this.options.loose?r[s.PRERELEASELOOSE]:r[s.PRERELEASE]);if(!b||b[1]!==y)throw new Error(`invalid identifier: ${y}`)}}switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",y,_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",y,_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",y,_),this.inc("pre",y,_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",y,_),this.inc("pre",y,_);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const b=Number(_)?1:0;if(this.prerelease.length===0)this.prerelease=[b];else{let w=this.prerelease.length;for(;--w>=0;)typeof this.prerelease[w]=="number"&&(this.prerelease[w]++,w=-2);if(w===-1){if(y===this.prerelease.join(".")&&_===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(b)}}if(y){let w=[y,b];_===!1&&(w=[y]),c(this.prerelease[0],y)===0?isNaN(this.prerelease[1])&&(this.prerelease=w):this.prerelease=w}break}default:throw new Error(`invalid increment argument: ${h}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return qc=f,qc}var Bc,ug;function qr(){if(ug)return Bc;ug=1;const u=St();return Bc=(a,r,s=!1)=>{if(a instanceof u)return a;try{return new u(a,r)}catch(o){if(!s)return null;throw o}},Bc}var Hc,lg;function A0(){if(lg)return Hc;lg=1;const u=qr();return Hc=(a,r)=>{const s=u(a,r);return s?s.version:null},Hc}var Gc,og;function R0(){if(og)return Gc;og=1;const u=qr();return Gc=(a,r)=>{const s=u(a.trim().replace(/^[=v]+/,""),r);return s?s.version:null},Gc}var Zc,cg;function x0(){if(cg)return Zc;cg=1;const u=St();return Zc=(a,r,s,o,c)=>{typeof s=="string"&&(c=o,o=s,s=void 0);try{return new u(a instanceof u?a.version:a,s).inc(r,o,c).version}catch{return null}},Zc}var Vc,dg;function C0(){if(dg)return Vc;dg=1;const u=qr();return Vc=(a,r)=>{const s=u(a,null,!0),o=u(r,null,!0),c=s.compare(o);if(c===0)return null;const f=c>0,p=f?s:o,h=f?o:s,y=!!p.prerelease.length;if(!!h.prerelease.length&&!y){if(!h.patch&&!h.minor)return"major";if(h.compareMain(p)===0)return h.minor&&!h.patch?"minor":"patch"}const b=y?"pre":"";return s.major!==o.major?b+"major":s.minor!==o.minor?b+"minor":s.patch!==o.patch?b+"patch":"prerelease"},Vc}var Yc,fg;function N0(){if(fg)return Yc;fg=1;const u=St();return Yc=(a,r)=>new u(a,r).major,Yc}var Xc,hg;function j0(){if(hg)return Xc;hg=1;const u=St();return Xc=(a,r)=>new u(a,r).minor,Xc}var Qc,mg;function L0(){if(mg)return Qc;mg=1;const u=St();return Qc=(a,r)=>new u(a,r).patch,Qc}var Fc,pg;function k0(){if(pg)return Fc;pg=1;const u=qr();return Fc=(a,r)=>{const s=u(a,r);return s&&s.prerelease.length?s.prerelease:null},Fc}var Jc,yg;function cn(){if(yg)return Jc;yg=1;const u=St();return Jc=(a,r,s)=>new u(a,s).compare(new u(r,s)),Jc}var Kc,gg;function $0(){if(gg)return Kc;gg=1;const u=cn();return Kc=(a,r,s)=>u(r,a,s),Kc}var Wc,_g;function D0(){if(_g)return Wc;_g=1;const u=cn();return Wc=(a,r)=>u(a,r,!0),Wc}var ed,bg;function of(){if(bg)return ed;bg=1;const u=St();return ed=(a,r,s)=>{const o=new u(a,s),c=new u(r,s);return o.compare(c)||o.compareBuild(c)},ed}var td,vg;function M0(){if(vg)return td;vg=1;const u=of();return td=(a,r)=>a.sort((s,o)=>u(s,o,r)),td}var nd,wg;function U0(){if(wg)return nd;wg=1;const u=of();return nd=(a,r)=>a.sort((s,o)=>u(o,s,r)),nd}var ad,Sg;function nl(){if(Sg)return ad;Sg=1;const u=cn();return ad=(a,r,s)=>u(a,r,s)>0,ad}var rd,Eg;function cf(){if(Eg)return rd;Eg=1;const u=cn();return rd=(a,r,s)=>u(a,r,s)<0,rd}var id,Tg;function A_(){if(Tg)return id;Tg=1;const u=cn();return id=(a,r,s)=>u(a,r,s)===0,id}var sd,Og;function R_(){if(Og)return sd;Og=1;const u=cn();return sd=(a,r,s)=>u(a,r,s)!==0,sd}var ud,Ag;function df(){if(Ag)return ud;Ag=1;const u=cn();return ud=(a,r,s)=>u(a,r,s)>=0,ud}var ld,Rg;function ff(){if(Rg)return ld;Rg=1;const u=cn();return ld=(a,r,s)=>u(a,r,s)<=0,ld}var od,xg;function x_(){if(xg)return od;xg=1;const u=A_(),t=R_(),a=nl(),r=df(),s=cf(),o=ff();return od=(f,p,h,y)=>{switch(p){case"===":return typeof f=="object"&&(f=f.version),typeof h=="object"&&(h=h.version),f===h;case"!==":return typeof f=="object"&&(f=f.version),typeof h=="object"&&(h=h.version),f!==h;case"":case"=":case"==":return u(f,h,y);case"!=":return t(f,h,y);case">":return a(f,h,y);case">=":return r(f,h,y);case"<":return s(f,h,y);case"<=":return o(f,h,y);default:throw new TypeError(`Invalid operator: ${p}`)}},od}var cd,Cg;function I0(){if(Cg)return cd;Cg=1;const u=St(),t=qr(),{safeRe:a,t:r}=us();return cd=(o,c)=>{if(o instanceof u)return o;if(typeof o=="number"&&(o=String(o)),typeof o!="string")return null;c=c||{};let f=null;if(!c.rtl)f=o.match(c.includePrerelease?a[r.COERCEFULL]:a[r.COERCE]);else{const w=c.includePrerelease?a[r.COERCERTLFULL]:a[r.COERCERTL];let S;for(;(S=w.exec(o))&&(!f||f.index+f[0].length!==o.length);)(!f||S.index+S[0].length!==f.index+f[0].length)&&(f=S),w.lastIndex=S.index+S[1].length+S[2].length;w.lastIndex=-1}if(f===null)return null;const p=f[2],h=f[3]||"0",y=f[4]||"0",_=c.includePrerelease&&f[5]?`-${f[5]}`:"",b=c.includePrerelease&&f[6]?`+${f[6]}`:"";return t(`${p}.${h}.${y}${_}${b}`,c)},cd}var dd,Ng;function z0(){if(Ng)return dd;Ng=1;class u{constructor(){this.max=1e3,this.map=new Map}get(a){const r=this.map.get(a);if(r!==void 0)return this.map.delete(a),this.map.set(a,r),r}delete(a){return this.map.delete(a)}set(a,r){if(!this.delete(a)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(a,r)}return this}}return dd=u,dd}var fd,jg;function dn(){if(jg)return fd;jg=1;const u=/\s+/g;class t{constructor(V,C){if(C=s(C),V instanceof t)return V.loose===!!C.loose&&V.includePrerelease===!!C.includePrerelease?V:new t(V.raw,C);if(V instanceof o)return this.raw=V.value,this.set=[[V]],this.formatted=void 0,this;if(this.options=C,this.loose=!!C.loose,this.includePrerelease=!!C.includePrerelease,this.raw=V.trim().replace(u," "),this.set=this.raw.split("||").map(U=>this.parseRange(U.trim())).filter(U=>U.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const U=this.set[0];if(this.set=this.set.filter(G=>!T(G[0])),this.set.length===0)this.set=[U];else if(this.set.length>1){for(const G of this.set)if(G.length===1&&R(G[0])){this.set=[G];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let V=0;V<this.set.length;V++){V>0&&(this.formatted+="||");const C=this.set[V];for(let U=0;U<C.length;U++)U>0&&(this.formatted+=" "),this.formatted+=C[U].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(V){const U=((this.options.includePrerelease&&w)|(this.options.loose&&S))+":"+V,G=r.get(U);if(G)return G;const Q=this.options.loose,E=Q?p[h.HYPHENRANGELOOSE]:p[h.HYPHENRANGE];V=V.replace(E,He(this.options.includePrerelease)),c("hyphen replace",V),V=V.replace(p[h.COMPARATORTRIM],y),c("comparator trim",V),V=V.replace(p[h.TILDETRIM],_),c("tilde trim",V),V=V.replace(p[h.CARETTRIM],b),c("caret trim",V);let M=V.split(" ").map(oe=>q(oe,this.options)).join(" ").split(/\s+/).map(oe=>Qe(oe,this.options));Q&&(M=M.filter(oe=>(c("loose invalid filter",oe,this.options),!!oe.match(p[h.COMPARATORLOOSE])))),c("range list",M);const H=new Map,Z=M.map(oe=>new o(oe,this.options));for(const oe of Z){if(T(oe))return[oe];H.set(oe.value,oe)}H.size>1&&H.has("")&&H.delete("");const ee=[...H.values()];return r.set(U,ee),ee}intersects(V,C){if(!(V instanceof t))throw new TypeError("a Range is required");return this.set.some(U=>k(U,C)&&V.set.some(G=>k(G,C)&&U.every(Q=>G.every(E=>Q.intersects(E,C)))))}test(V){if(!V)return!1;if(typeof V=="string")try{V=new f(V,this.options)}catch{return!1}for(let C=0;C<this.set.length;C++)if(Et(this.set[C],V,this.options))return!0;return!1}}fd=t;const a=z0(),r=new a,s=lf(),o=al(),c=tl(),f=St(),{safeRe:p,t:h,comparatorTrimReplace:y,tildeTrimReplace:_,caretTrimReplace:b}=us(),{FLAG_INCLUDE_PRERELEASE:w,FLAG_LOOSE:S}=el(),T=W=>W.value==="<0.0.0-0",R=W=>W.value==="",k=(W,V)=>{let C=!0;const U=W.slice();let G=U.pop();for(;C&&U.length;)C=U.every(Q=>G.intersects(Q,V)),G=U.pop();return C},q=(W,V)=>(c("comp",W,V),W=K(W,V),c("caret",W),W=Y(W,V),c("tildes",W),W=J(W,V),c("xrange",W),W=Be(W,V),c("stars",W),W),N=W=>!W||W.toLowerCase()==="x"||W==="*",Y=(W,V)=>W.trim().split(/\s+/).map(C=>I(C,V)).join(" "),I=(W,V)=>{const C=V.loose?p[h.TILDELOOSE]:p[h.TILDE];return W.replace(C,(U,G,Q,E,M)=>{c("tilde",W,U,G,Q,E,M);let H;return N(G)?H="":N(Q)?H=`>=${G}.0.0 <${+G+1}.0.0-0`:N(E)?H=`>=${G}.${Q}.0 <${G}.${+Q+1}.0-0`:M?(c("replaceTilde pr",M),H=`>=${G}.${Q}.${E}-${M} <${G}.${+Q+1}.0-0`):H=`>=${G}.${Q}.${E} <${G}.${+Q+1}.0-0`,c("tilde return",H),H})},K=(W,V)=>W.trim().split(/\s+/).map(C=>re(C,V)).join(" "),re=(W,V)=>{c("caret",W,V);const C=V.loose?p[h.CARETLOOSE]:p[h.CARET],U=V.includePrerelease?"-0":"";return W.replace(C,(G,Q,E,M,H)=>{c("caret",W,G,Q,E,M,H);let Z;return N(Q)?Z="":N(E)?Z=`>=${Q}.0.0${U} <${+Q+1}.0.0-0`:N(M)?Q==="0"?Z=`>=${Q}.${E}.0${U} <${Q}.${+E+1}.0-0`:Z=`>=${Q}.${E}.0${U} <${+Q+1}.0.0-0`:H?(c("replaceCaret pr",H),Q==="0"?E==="0"?Z=`>=${Q}.${E}.${M}-${H} <${Q}.${E}.${+M+1}-0`:Z=`>=${Q}.${E}.${M}-${H} <${Q}.${+E+1}.0-0`:Z=`>=${Q}.${E}.${M}-${H} <${+Q+1}.0.0-0`):(c("no pr"),Q==="0"?E==="0"?Z=`>=${Q}.${E}.${M}${U} <${Q}.${E}.${+M+1}-0`:Z=`>=${Q}.${E}.${M}${U} <${Q}.${+E+1}.0-0`:Z=`>=${Q}.${E}.${M} <${+Q+1}.0.0-0`),c("caret return",Z),Z})},J=(W,V)=>(c("replaceXRanges",W,V),W.split(/\s+/).map(C=>Me(C,V)).join(" ")),Me=(W,V)=>{W=W.trim();const C=V.loose?p[h.XRANGELOOSE]:p[h.XRANGE];return W.replace(C,(U,G,Q,E,M,H)=>{c("xRange",W,U,G,Q,E,M,H);const Z=N(Q),ee=Z||N(E),oe=ee||N(M),ce=oe;return G==="="&&ce&&(G=""),H=V.includePrerelease?"-0":"",Z?G===">"||G==="<"?U="<0.0.0-0":U="*":G&&ce?(ee&&(E=0),M=0,G===">"?(G=">=",ee?(Q=+Q+1,E=0,M=0):(E=+E+1,M=0)):G==="<="&&(G="<",ee?Q=+Q+1:E=+E+1),G==="<"&&(H="-0"),U=`${G+Q}.${E}.${M}${H}`):ee?U=`>=${Q}.0.0${H} <${+Q+1}.0.0-0`:oe&&(U=`>=${Q}.${E}.0${H} <${Q}.${+E+1}.0-0`),c("xRange return",U),U})},Be=(W,V)=>(c("replaceStars",W,V),W.trim().replace(p[h.STAR],"")),Qe=(W,V)=>(c("replaceGTE0",W,V),W.trim().replace(p[V.includePrerelease?h.GTE0PRE:h.GTE0],"")),He=W=>(V,C,U,G,Q,E,M,H,Z,ee,oe,ce)=>(N(U)?C="":N(G)?C=`>=${U}.0.0${W?"-0":""}`:N(Q)?C=`>=${U}.${G}.0${W?"-0":""}`:E?C=`>=${C}`:C=`>=${C}${W?"-0":""}`,N(Z)?H="":N(ee)?H=`<${+Z+1}.0.0-0`:N(oe)?H=`<${Z}.${+ee+1}.0-0`:ce?H=`<=${Z}.${ee}.${oe}-${ce}`:W?H=`<${Z}.${ee}.${+oe+1}-0`:H=`<=${H}`,`${C} ${H}`.trim()),Et=(W,V,C)=>{for(let U=0;U<W.length;U++)if(!W[U].test(V))return!1;if(V.prerelease.length&&!C.includePrerelease){for(let U=0;U<W.length;U++)if(c(W[U].semver),W[U].semver!==o.ANY&&W[U].semver.prerelease.length>0){const G=W[U].semver;if(G.major===V.major&&G.minor===V.minor&&G.patch===V.patch)return!0}return!1}return!0};return fd}var hd,Lg;function al(){if(Lg)return hd;Lg=1;const u=Symbol("SemVer ANY");class t{static get ANY(){return u}constructor(y,_){if(_=a(_),y instanceof t){if(y.loose===!!_.loose)return y;y=y.value}y=y.trim().split(/\s+/).join(" "),c("comparator",y,_),this.options=_,this.loose=!!_.loose,this.parse(y),this.semver===u?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(y){const _=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],b=y.match(_);if(!b)throw new TypeError(`Invalid comparator: ${y}`);this.operator=b[1]!==void 0?b[1]:"",this.operator==="="&&(this.operator=""),b[2]?this.semver=new f(b[2],this.options.loose):this.semver=u}toString(){return this.value}test(y){if(c("Comparator.test",y,this.options.loose),this.semver===u||y===u)return!0;if(typeof y=="string")try{y=new f(y,this.options)}catch{return!1}return o(y,this.operator,this.semver,this.options)}intersects(y,_){if(!(y instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new p(y.value,_).test(this.value):y.operator===""?y.value===""?!0:new p(this.value,_).test(y.semver):(_=a(_),_.includePrerelease&&(this.value==="<0.0.0-0"||y.value==="<0.0.0-0")||!_.includePrerelease&&(this.value.startsWith("<0.0.0")||y.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&y.operator.startsWith(">")||this.operator.startsWith("<")&&y.operator.startsWith("<")||this.semver.version===y.semver.version&&this.operator.includes("=")&&y.operator.includes("=")||o(this.semver,"<",y.semver,_)&&this.operator.startsWith(">")&&y.operator.startsWith("<")||o(this.semver,">",y.semver,_)&&this.operator.startsWith("<")&&y.operator.startsWith(">")))}}hd=t;const a=lf(),{safeRe:r,t:s}=us(),o=x_(),c=tl(),f=St(),p=dn();return hd}var md,kg;function rl(){if(kg)return md;kg=1;const u=dn();return md=(a,r,s)=>{try{r=new u(r,s)}catch{return!1}return r.test(a)},md}var pd,$g;function P0(){if($g)return pd;$g=1;const u=dn();return pd=(a,r)=>new u(a,r).set.map(s=>s.map(o=>o.value).join(" ").trim().split(" ")),pd}var yd,Dg;function q0(){if(Dg)return yd;Dg=1;const u=St(),t=dn();return yd=(r,s,o)=>{let c=null,f=null,p=null;try{p=new t(s,o)}catch{return null}return r.forEach(h=>{p.test(h)&&(!c||f.compare(h)===-1)&&(c=h,f=new u(c,o))}),c},yd}var gd,Mg;function B0(){if(Mg)return gd;Mg=1;const u=St(),t=dn();return gd=(r,s,o)=>{let c=null,f=null,p=null;try{p=new t(s,o)}catch{return null}return r.forEach(h=>{p.test(h)&&(!c||f.compare(h)===1)&&(c=h,f=new u(c,o))}),c},gd}var _d,Ug;function H0(){if(Ug)return _d;Ug=1;const u=St(),t=dn(),a=nl();return _d=(s,o)=>{s=new t(s,o);let c=new u("0.0.0");if(s.test(c)||(c=new u("0.0.0-0"),s.test(c)))return c;c=null;for(let f=0;f<s.set.length;++f){const p=s.set[f];let h=null;p.forEach(y=>{const _=new u(y.semver.version);switch(y.operator){case">":_.prerelease.length===0?_.patch++:_.prerelease.push(0),_.raw=_.format();case"":case">=":(!h||a(_,h))&&(h=_);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${y.operator}`)}}),h&&(!c||a(c,h))&&(c=h)}return c&&s.test(c)?c:null},_d}var bd,Ig;function G0(){if(Ig)return bd;Ig=1;const u=dn();return bd=(a,r)=>{try{return new u(a,r).range||"*"}catch{return null}},bd}var vd,zg;function hf(){if(zg)return vd;zg=1;const u=St(),t=al(),{ANY:a}=t,r=dn(),s=rl(),o=nl(),c=cf(),f=ff(),p=df();return vd=(y,_,b,w)=>{y=new u(y,w),_=new r(_,w);let S,T,R,k,q;switch(b){case">":S=o,T=f,R=c,k=">",q=">=";break;case"<":S=c,T=p,R=o,k="<",q="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(y,_,w))return!1;for(let N=0;N<_.set.length;++N){const Y=_.set[N];let I=null,K=null;if(Y.forEach(re=>{re.semver===a&&(re=new t(">=0.0.0")),I=I||re,K=K||re,S(re.semver,I.semver,w)?I=re:R(re.semver,K.semver,w)&&(K=re)}),I.operator===k||I.operator===q||(!K.operator||K.operator===k)&&T(y,K.semver))return!1;if(K.operator===q&&R(y,K.semver))return!1}return!0},vd}var wd,Pg;function Z0(){if(Pg)return wd;Pg=1;const u=hf();return wd=(a,r,s)=>u(a,r,">",s),wd}var Sd,qg;function V0(){if(qg)return Sd;qg=1;const u=hf();return Sd=(a,r,s)=>u(a,r,"<",s),Sd}var Ed,Bg;function Y0(){if(Bg)return Ed;Bg=1;const u=dn();return Ed=(a,r,s)=>(a=new u(a,s),r=new u(r,s),a.intersects(r,s)),Ed}var Td,Hg;function X0(){if(Hg)return Td;Hg=1;const u=rl(),t=cn();return Td=(a,r,s)=>{const o=[];let c=null,f=null;const p=a.sort((b,w)=>t(b,w,s));for(const b of p)u(b,r,s)?(f=b,c||(c=b)):(f&&o.push([c,f]),f=null,c=null);c&&o.push([c,null]);const h=[];for(const[b,w]of o)b===w?h.push(b):!w&&b===p[0]?h.push("*"):w?b===p[0]?h.push(`<=${w}`):h.push(`${b} - ${w}`):h.push(`>=${b}`);const y=h.join(" || "),_=typeof r.raw=="string"?r.raw:String(r);return y.length<_.length?y:r},Td}var Od,Gg;function Q0(){if(Gg)return Od;Gg=1;const u=dn(),t=al(),{ANY:a}=t,r=rl(),s=cn(),o=(_,b,w={})=>{if(_===b)return!0;_=new u(_,w),b=new u(b,w);let S=!1;e:for(const T of _.set){for(const R of b.set){const k=p(T,R,w);if(S=S||k!==null,k)continue e}if(S)return!1}return!0},c=[new t(">=0.0.0-0")],f=[new t(">=0.0.0")],p=(_,b,w)=>{if(_===b)return!0;if(_.length===1&&_[0].semver===a){if(b.length===1&&b[0].semver===a)return!0;w.includePrerelease?_=c:_=f}if(b.length===1&&b[0].semver===a){if(w.includePrerelease)return!0;b=f}const S=new Set;let T,R;for(const J of _)J.operator===">"||J.operator===">="?T=h(T,J,w):J.operator==="<"||J.operator==="<="?R=y(R,J,w):S.add(J.semver);if(S.size>1)return null;let k;if(T&&R){if(k=s(T.semver,R.semver,w),k>0)return null;if(k===0&&(T.operator!==">="||R.operator!=="<="))return null}for(const J of S){if(T&&!r(J,String(T),w)||R&&!r(J,String(R),w))return null;for(const Me of b)if(!r(J,String(Me),w))return!1;return!0}let q,N,Y,I,K=R&&!w.includePrerelease&&R.semver.prerelease.length?R.semver:!1,re=T&&!w.includePrerelease&&T.semver.prerelease.length?T.semver:!1;K&&K.prerelease.length===1&&R.operator==="<"&&K.prerelease[0]===0&&(K=!1);for(const J of b){if(I=I||J.operator===">"||J.operator===">=",Y=Y||J.operator==="<"||J.operator==="<=",T){if(re&&J.semver.prerelease&&J.semver.prerelease.length&&J.semver.major===re.major&&J.semver.minor===re.minor&&J.semver.patch===re.patch&&(re=!1),J.operator===">"||J.operator===">="){if(q=h(T,J,w),q===J&&q!==T)return!1}else if(T.operator===">="&&!r(T.semver,String(J),w))return!1}if(R){if(K&&J.semver.prerelease&&J.semver.prerelease.length&&J.semver.major===K.major&&J.semver.minor===K.minor&&J.semver.patch===K.patch&&(K=!1),J.operator==="<"||J.operator==="<="){if(N=y(R,J,w),N===J&&N!==R)return!1}else if(R.operator==="<="&&!r(R.semver,String(J),w))return!1}if(!J.operator&&(R||T)&&k!==0)return!1}return!(T&&Y&&!R&&k!==0||R&&I&&!T&&k!==0||re||K)},h=(_,b,w)=>{if(!_)return b;const S=s(_.semver,b.semver,w);return S>0?_:S<0||b.operator===">"&&_.operator===">="?b:_},y=(_,b,w)=>{if(!_)return b;const S=s(_.semver,b.semver,w);return S<0?_:S>0||b.operator==="<"&&_.operator==="<="?b:_};return Od=o,Od}var Ad,Zg;function F0(){if(Zg)return Ad;Zg=1;const u=us(),t=el(),a=St(),r=O_(),s=qr(),o=A0(),c=R0(),f=x0(),p=C0(),h=N0(),y=j0(),_=L0(),b=k0(),w=cn(),S=$0(),T=D0(),R=of(),k=M0(),q=U0(),N=nl(),Y=cf(),I=A_(),K=R_(),re=df(),J=ff(),Me=x_(),Be=I0(),Qe=al(),He=dn(),Et=rl(),W=P0(),V=q0(),C=B0(),U=H0(),G=G0(),Q=hf(),E=Z0(),M=V0(),H=Y0(),Z=X0(),ee=Q0();return Ad={parse:s,valid:o,clean:c,inc:f,diff:p,major:h,minor:y,patch:_,prerelease:b,compare:w,rcompare:S,compareLoose:T,compareBuild:R,sort:k,rsort:q,gt:N,lt:Y,eq:I,neq:K,gte:re,lte:J,cmp:Me,coerce:Be,Comparator:Qe,Range:He,satisfies:Et,toComparators:W,maxSatisfying:V,minSatisfying:C,minVersion:U,validRange:G,outside:Q,gtr:E,ltr:M,intersects:H,simplifyRange:Z,subset:ee,SemVer:a,re:u.re,src:u.src,tokens:u.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},Ad}F0();function fa(u){if(!u||u.split("/").length>2||u.startsWith("/")||u.endsWith("/")||u.split(":").length>2)throw new Error(`Invalid identifier format: ${u}`);const[t,a]=u.split(":"),r=a||"latest";if(t.includes("/")){const[s,o]=t.split("/",2);if(!s||!o)throw new Error(`Invalid identifier format: ${u}`);return[s,o,r]}else{if(!t)throw new Error(`Invalid identifier format: ${u}`);return["-",t,r]}}class J0 extends Error{constructor(t){super(t),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function ge(u,t,a){let r;if(u.ok){a&&(r=await u.text());return}r=await u.text();const s=`Failed to ${t}. Received status [${u.status}]: ${u.statusText}. Server response: ${r}`;if(u.status===409)throw new J0(s);const o=new Error(s);throw o.status=u.status,o}var Vg="[...]",K0={result:"[Circular]"},Bu=[],Lr=[];const W0=new TextEncoder;function eS(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Nu(u){return W0.encode(u)}function zt(u,t,a,r,s){var o;try{const c=JSON.stringify(u,a,r);return Nu(c)}catch(c){if(!((o=c.message)!=null&&o.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${t?`
Context: ${t}`:""}`),Nu("[Unserializable]");console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${t?`
Context: ${t}`:""}`),typeof s>"u"&&(s=eS()),Qd(u,"",0,[],void 0,0,s);let f;try{Lr.length===0?f=JSON.stringify(u,a,r):f=JSON.stringify(u,tS(a),r)}catch{return Nu("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Bu.length!==0;){const p=Bu.pop();p.length===4?Object.defineProperty(p[0],p[1],p[3]):p[0][p[1]]=p[2]}}return Nu(f)}}function Rd(u,t,a,r){var s=Object.getOwnPropertyDescriptor(r,a);s.get!==void 0?s.configurable?(Object.defineProperty(r,a,{value:u}),Bu.push([r,a,t,s])):Lr.push([t,a,u]):(r[a]=u,Bu.push([r,a,t]))}function Qd(u,t,a,r,s,o,c){o+=1;var f;if(typeof u=="object"&&u!==null){for(f=0;f<r.length;f++)if(r[f]===u){Rd(K0,u,t,s);return}if(typeof c.depthLimit<"u"&&o>c.depthLimit){Rd(Vg,u,t,s);return}if(typeof c.edgesLimit<"u"&&a+1>c.edgesLimit){Rd(Vg,u,t,s);return}if(r.push(u),Array.isArray(u))for(f=0;f<u.length;f++)Qd(u[f],f,f,r,u,o,c);else{var p=Object.keys(u);for(f=0;f<p.length;f++){var h=p[f];Qd(u[h],h,f,r,u,o,c)}}r.pop()}}function tS(u){return u=typeof u<"u"?u:function(t,a){return a},function(t,a){if(Lr.length>0)for(var r=0;r<Lr.length;r++){var s=Lr[r];if(s[1]===t&&s[0]===a){a=s[2],Lr.splice(r,1);break}}return u.call(this,t,a)}}function Yg(u){const t=j_(),a=mS(),r=u.extra??{},s=r.metadata;return u.extra={...r,runtime:{...t,...r==null?void 0:r.runtime},metadata:{...a,...a.revision_id||u.revision_id?{revision_id:u.revision_id??a.revision_id}:{},...s}},u}const nS=u=>{const t=(u==null?void 0:u.toString())??_n("TRACING_SAMPLING_RATE");if(t===void 0)return;const a=parseFloat(t);if(a<0||a>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${a}`);return a},aS=u=>{const a=u.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return a==="localhost"||a==="127.0.0.1"||a==="::1"};async function rS(u){const t=[];for await(const a of u)t.push(a);return t}function xd(u){if(u!==void 0)return u.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const iS=async u=>{if((u==null?void 0:u.status)===429){const t=parseInt(u.headers.get("retry-after")??"30",10)*1e3;if(t>0)return await new Promise(a=>setTimeout(a,t)),!0}return!1};function Xg(u){return typeof u=="number"?Number(u.toFixed(4)):u}class sS{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(t){let a;const r=new Promise(o=>{a=o}),s=zt(t.item,`Serializing run with id: ${t.item.id}`).length;return this.items.push({action:t.action,payload:t.item,itemPromiseResolve:a,itemPromise:r,size:s}),this.sizeBytes+=s,r}pop(t){var s;if(t<1)throw new Error("Number of bytes to pop off may not be less than 1.");const a=[];let r=0;for(;r+(((s=this.peek())==null?void 0:s.size)??0)<t&&this.items.length>0;){const o=this.items.shift();o&&(a.push(o),r+=o.size,this.sizeBytes-=o.size)}if(a.length===0&&this.items.length>0){const o=this.items.shift();a.push(o),r+=o.size,this.sizeBytes-=o.size}return[a.map(o=>({action:o.action,item:o.payload})),()=>a.forEach(o=>o.itemPromiseResolve())]}}const uS=20971520,lS=2500;class ns{constructor(t={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new sS}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:ya("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:ya("LANGSMITH_DEBUG")==="true"});const a=ns.getDefaultClientConfig();if(this.tracingSampleRate=nS(t.tracingSamplingRate),this.apiUrl=xd(t.apiUrl??a.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=xd(t.apiKey??a.apiKey),this.webUrl=xd(t.webUrl??a.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=t.timeout_ms??9e4,this.caller=new Jy({...t.callerOptions??{},debug:t.debug??this.debug}),this.traceBatchConcurrency=t.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=t.debug??this.debug,this.batchIngestCaller=new Jy({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...t.callerOptions??{},onFailedResponseHook:iS,debug:t.debug??this.debug}),this.hideInputs=t.hideInputs??t.anonymizer??a.hideInputs,this.hideOutputs=t.hideOutputs??t.anonymizer??a.hideOutputs,this.autoBatchTracing=t.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=t.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=t.batchSizeBytesLimit,this.fetchOptions=t.fetchOptions||{},this.manualFlushMode=t.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){const t=_n("API_KEY"),a=_n("ENDPOINT")??"https://api.smith.langchain.com",r=_n("HIDE_INPUTS")==="true",s=_n("HIDE_OUTPUTS")==="true";return{apiUrl:a,apiKey:t,webUrl:void 0,hideInputs:r,hideOutputs:s}}getHostUrl(){return this.webUrl?this.webUrl:aS(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const t={"User-Agent":`langsmith-js/${C_}`};return this.apiKey&&(t["x-api-key"]=`${this.apiKey}`),t}async processInputs(t){return this.hideInputs===!1?t:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(t):t}async processOutputs(t){return this.hideOutputs===!1?t:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(t):t}async prepareRunCreateOrUpdateInputs(t){const a={...t};return a.inputs!==void 0&&(a.inputs=await this.processInputs(a.inputs)),a.outputs!==void 0&&(a.outputs=await this.processOutputs(a.outputs)),a}async _getResponse(t,a){const r=(a==null?void 0:a.toString())??"",s=`${this.apiUrl}${t}?${r}`,o=await this.caller.call(le(this.debug),s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(o,`Failed to fetch ${t}`),o}async _get(t,a){return(await this._getResponse(t,a)).json()}async*_getPaginated(t,a=new URLSearchParams,r){let s=Number(a.get("offset"))||0;const o=Number(a.get("limit"))||100;for(;;){a.set("offset",String(s)),a.set("limit",String(o));const c=`${this.apiUrl}${t}?${a}`,f=await this.caller.call(le(this.debug),c,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(f,`Failed to fetch ${t}`);const p=r?r(await f.json()):await f.json();if(p.length===0||(yield p,p.length<o))break;s+=p.length}}async*_getCursorPaginatedList(t,a=null,r="POST",s="runs"){const o=a?{...a}:{};for(;;){const f=await(await this.caller.call(le(this.debug),`${this.apiUrl}${t}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(o)})).json();if(!f||!f[s])break;yield f[s];const p=f.cursors;if(!p||!p.next)break;o.cursor=p.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(t,a=!1){if(this.tracingSampleRate===void 0)return t;if(a){const r=[];for(const s of t)this.filteredPostUuids.has(s.id)?this.filteredPostUuids.delete(s.id):r.push(s);return r}else{const r=[];for(const s of t){const o=s.trace_id??s.id;this.filteredPostUuids.has(o)||(s.id===o?this._shouldSample()?r.push(s):this.filteredPostUuids.add(o):r.push(s))}return r}}async _getBatchSizeLimitBytes(){var a;const t=await this._ensureServerInfo();return this.batchSizeBytesLimit??((a=t.batch_ingest_config)==null?void 0:a.size_limit_bytes)??uS}async _getMultiPartSupport(){var a;return((a=(await this._ensureServerInfo()).instance_flags)==null?void 0:a.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(t){const a=[];for(;this.autoBatchQueue.items.length>0;){const[r,s]=this.autoBatchQueue.pop(t);if(!r.length){s();break}const o=this._processBatch(r,s).catch(console.error);a.push(o)}return Promise.all(a)}async _processBatch(t,a){var r;if(!t.length){a();return}try{const s={runCreates:t.filter(c=>c.action==="create").map(c=>c.item),runUpdates:t.filter(c=>c.action==="update").map(c=>c.item)},o=await this._ensureServerInfo();(r=o==null?void 0:o.batch_ingest_config)!=null&&r.use_multipart_endpoint?await this.multipartIngestRuns(s):await this.batchIngestRuns(s)}finally{a()}}async processRunOperation(t){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,t.action==="create"&&(t.item=Yg(t.item));const a=this.autoBatchQueue.push(t);if(this.manualFlushMode)return a;const r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),a}async _getServerInfo(){const t=await this.caller.call(le(this.debug),`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(lS),...this.fetchOptions});await ge(t,"get server info");const a=await t.json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(a,null,2)+`
`),a}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(t){console.warn(`[WARNING]: LangSmith failed to fetch info on supported operations with status code ${t.status}. Falling back to batch operations and default limits.`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(t=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),t))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const t=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(t)}async createRun(t){if(!this._filterForSampling([t]).length)return;const a={...this.headers,"Content-Type":"application/json"},r=t.project_name;delete t.project_name;const s=await this.prepareRunCreateOrUpdateInputs({session_name:r,...t,start_time:t.start_time??Date.now()});if(this.autoBatchTracing&&s.trace_id!==void 0&&s.dotted_order!==void 0){this.processRunOperation({action:"create",item:s}).catch(console.error);return}const o=Yg(s),c=await this.caller.call(le(this.debug),`${this.apiUrl}/runs`,{method:"POST",headers:a,body:zt(o,`Creating run with id: ${o.id}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(c,"create run",!0)}async batchIngestRuns({runCreates:t,runUpdates:a}){if(t===void 0&&a===void 0)return;let r=await Promise.all((t==null?void 0:t.map(f=>this.prepareRunCreateOrUpdateInputs(f)))??[]),s=await Promise.all((a==null?void 0:a.map(f=>this.prepareRunCreateOrUpdateInputs(f)))??[]);if(r.length>0&&s.length>0){const f=r.reduce((h,y)=>(y.id&&(h[y.id]=y),h),{}),p=[];for(const h of s)h.id!==void 0&&f[h.id]?f[h.id]={...f[h.id],...h}:p.push(h);r=Object.values(f),s=p}const o={post:r,patch:s};if(!o.post.length&&!o.patch.length)return;const c={post:[],patch:[]};for(const f of["post","patch"]){const p=f,h=o[p].reverse();let y=h.pop();for(;y!==void 0;)c[p].push(y),y=h.pop()}if(c.post.length>0||c.patch.length>0){const f=c.post.map(p=>p.id).concat(c.patch.map(p=>p.id)).join(",");await this._postBatchIngestRuns(zt(c,`Ingesting runs with ids: ${f}`))}}async _postBatchIngestRuns(t){const a={...this.headers,"Content-Type":"application/json",Accept:"application/json"},r=await this.batchIngestCaller.call(le(this.debug),`${this.apiUrl}/runs/batch`,{method:"POST",headers:a,body:t,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(r,"batch create run",!0)}async multipartIngestRuns({runCreates:t,runUpdates:a}){if(t===void 0&&a===void 0)return;const r={};let s=[];for(const y of t??[]){const _=await this.prepareRunCreateOrUpdateInputs(y);_.id!==void 0&&_.attachments!==void 0&&(r[_.id]=_.attachments),delete _.attachments,s.push(_)}let o=[];for(const y of a??[])o.push(await this.prepareRunCreateOrUpdateInputs(y));if(s.find(y=>y.trace_id===void 0||y.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(o.find(y=>y.trace_id===void 0||y.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(s.length>0&&o.length>0){const y=s.reduce((b,w)=>(w.id&&(b[w.id]=w),b),{}),_=[];for(const b of o)b.id!==void 0&&y[b.id]?y[b.id]={...y[b.id],...b}:_.push(b);s=Object.values(y),o=_}if(s.length===0&&o.length===0)return;const p=[],h=[];for(const[y,_]of[["post",s],["patch",o]])for(const b of _){const{inputs:w,outputs:S,events:T,attachments:R,...k}=b,q={inputs:w,outputs:S,events:T},N=zt(k,`Serializing for multipart ingestion of run with id: ${k.id}`);h.push({name:`${y}.${k.id}`,payload:new Blob([N],{type:`application/json; length=${N.length}`})});for(const[Y,I]of Object.entries(q)){if(I===void 0)continue;const K=zt(I,`Serializing ${Y} for multipart ingestion of run with id: ${k.id}`);h.push({name:`${y}.${k.id}.${Y}`,payload:new Blob([K],{type:`application/json; length=${K.length}`})})}if(k.id!==void 0){const Y=r[k.id];if(Y){delete r[k.id];for(const[I,K]of Object.entries(Y)){let re,J;if(Array.isArray(K)?[re,J]=K:(re=K.mimeType,J=K.data),I.includes(".")){console.warn(`Skipping attachment '${I}' for run ${k.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}h.push({name:`attachment.${k.id}.${I}`,payload:new Blob([J],{type:`${re}; length=${J.byteLength}`})})}}}p.push(`trace=${k.trace_id},id=${k.id}`)}await this._sendMultipartRequest(h,p.join("; "))}async _createNodeFetchBody(t,a){const r=[];for(const c of t)r.push(new Blob([`--${a}\r
`])),r.push(new Blob([`Content-Disposition: form-data; name="${c.name}"\r
`,`Content-Type: ${c.payload.type}\r
\r
`])),r.push(c.payload),r.push(new Blob([`\r
`]));return r.push(new Blob([`--${a}--\r
`])),await new Blob(r).arrayBuffer()}async _createMultipartStream(t,a){const r=new TextEncoder;return new ReadableStream({async start(o){const c=async f=>{typeof f=="string"?o.enqueue(r.encode(f)):o.enqueue(f)};for(const f of t){await c(`--${a}\r
`),await c(`Content-Disposition: form-data; name="${f.name}"\r
`),await c(`Content-Type: ${f.payload.type}\r
\r
`);const h=f.payload.stream().getReader();try{let y;for(;!(y=await h.read()).done;)o.enqueue(y.value)}finally{h.releaseLock()}await c(`\r
`)}await c(`--${a}--\r
`),o.close()}})}async _sendMultipartRequest(t,a){try{const r="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),s=await(E0()?this._createNodeFetchBody(t,r):this._createMultipartStream(t,r)),o=await this.batchIngestCaller.call(le(this.debug),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${r}`},body:s,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(o,"ingest multipart runs",!0)}catch(r){console.warn(`${r.message.trim()}

Context: ${a}`)}}async updateRun(t,a){pe(t),a.inputs&&(a.inputs=await this.processInputs(a.inputs)),a.outputs&&(a.outputs=await this.processOutputs(a.outputs));const r={...a,id:t};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&r.trace_id!==void 0&&r.dotted_order!==void 0){if(a.end_time!==void 0&&r.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:r}).catch(console.error);return}else this.processRunOperation({action:"update",item:r}).catch(console.error);return}const s={...this.headers,"Content-Type":"application/json"},o=await this.caller.call(le(this.debug),`${this.apiUrl}/runs/${t}`,{method:"PATCH",headers:s,body:zt(a,`Serializing payload to update run with id: ${t}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(o,"update run",!0)}async readRun(t,{loadChildRuns:a}={loadChildRuns:!1}){pe(t);let r=await this._get(`/runs/${t}`);return a&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:t,run:a,projectOpts:r}){if(a!==void 0){let s;a.session_id?s=a.session_id:r!=null&&r.projectName?s=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?s=r==null?void 0:r.projectId:s=(await this.readProject({projectName:_n("PROJECT")||"default"})).id;const o=await this._getTenantId();return`${this.getHostUrl()}/o/${o}/projects/p/${s}/r/${a.id}?poll=true`}else if(t!==void 0){const s=await this.readRun(t);if(!s.app_path)throw new Error(`Run ${t} has no app_path`);return`${this.getHostUrl()}${s.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(t){var o;const a=await rS(this.listRuns({isRoot:!1,projectId:t.session_id,traceId:t.trace_id})),r={},s={};a.sort((c,f)=>((c==null?void 0:c.dotted_order)??"").localeCompare((f==null?void 0:f.dotted_order)??""));for(const c of a){if(c.parent_run_id===null||c.parent_run_id===void 0)throw new Error(`Child run ${c.id} has no parent`);(o=c.dotted_order)!=null&&o.startsWith(t.dotted_order??"")&&c.id!==t.id&&(c.parent_run_id in r||(r[c.parent_run_id]=[]),r[c.parent_run_id].push(c),s[c.id]=c)}t.child_runs=r[t.id]||[];for(const c in r)c!==t.id&&(s[c].child_runs=r[c]);return t}async*listRuns(t){const{projectId:a,projectName:r,parentRunId:s,traceId:o,referenceExampleId:c,startTime:f,executionOrder:p,isRoot:h,runType:y,error:_,id:b,query:w,filter:S,traceFilter:T,treeFilter:R,limit:k,select:q,order:N}=t;let Y=[];if(a&&(Y=Array.isArray(a)?a:[a]),r){const J=Array.isArray(r)?r:[r],Me=await Promise.all(J.map(Be=>this.readProject({projectName:Be}).then(Qe=>Qe.id)));Y.push(...Me)}const I=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],K={session:Y.length?Y:null,run_type:y,reference_example:c,query:w,filter:S,trace_filter:T,tree_filter:R,execution_order:p,parent_run:s,start_time:f?f.toISOString():null,error:_,id:b,limit:k,trace:o,select:q||I,is_root:h,order:N};let re=0;for await(const J of this._getCursorPaginatedList("/runs/query",K))if(k){if(re>=k)break;if(J.length+re>k){yield*J.slice(0,k-re);break}re+=J.length,yield*J}else yield*J}async*listGroupRuns(t){const{projectId:a,projectName:r,groupBy:s,filter:o,startTime:c,endTime:f,limit:p,offset:h}=t,_={session_id:a||(await this.readProject({projectName:r})).id,group_by:s,filter:o,start_time:c?c.toISOString():null,end_time:f?f.toISOString():null,limit:Number(p)||100};let b=Number(h)||0;const w="/runs/group",S=`${this.apiUrl}${w}`;for(;;){const T={..._,offset:b},R=Object.fromEntries(Object.entries(T).filter(([I,K])=>K!==void 0)),k=await this.caller.call(le(),S,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(R),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(k,`Failed to fetch ${w}`);const q=await k.json(),{groups:N,total:Y}=q;if(N.length===0)break;for(const I of N)yield I;if(b+=N.length,b>=Y)break}}async getRunStats({id:t,trace:a,parentRun:r,runType:s,projectNames:o,projectIds:c,referenceExampleIds:f,startTime:p,endTime:h,error:y,query:_,filter:b,traceFilter:w,treeFilter:S,isRoot:T,dataSourceType:R}){let k=c||[];o&&(k=[...c||[],...await Promise.all(o.map(K=>this.readProject({projectName:K}).then(re=>re.id)))]);const N=Object.fromEntries(Object.entries({id:t,trace:a,parent_run:r,run_type:s,session:k,reference_example:f,start_time:p,end_time:h,error:y,query:_,filter:b,trace_filter:w,tree_filter:S,is_root:T,data_source_type:R}).filter(([K,re])=>re!==void 0));return await(await this.caller.call(le(this.debug),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(N),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(t,{shareId:a}={}){const r={run_id:t,share_token:a||vt()};pe(t);const o=await(await this.caller.call(le(this.debug),`${this.apiUrl}/runs/${t}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(o===null||!("share_token"in o))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${o.share_token}/r`}async unshareRun(t){pe(t);const a=await this.caller.call(le(this.debug),`${this.apiUrl}/runs/${t}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(a,"unshare run",!0)}async readRunSharedLink(t){pe(t);const r=await(await this.caller.call(le(this.debug),`${this.apiUrl}/runs/${t}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(t,{runIds:a}={}){const r=new URLSearchParams({share_token:t});if(a!==void 0)for(const c of a)r.append("id",c);return pe(t),await(await this.caller.call(le(this.debug),`${this.apiUrl}/public/${t}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(t,a){if(!t&&!a)throw new Error("Either datasetId or datasetName must be given");t||(t=(await this.readDataset({datasetName:a})).id),pe(t);const s=await(await this.caller.call(le(this.debug),`${this.apiUrl}/datasets/${t}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async shareDataset(t,a){if(!t&&!a)throw new Error("Either datasetId or datasetName must be given");t||(t=(await this.readDataset({datasetName:a})).id);const r={dataset_id:t};pe(t);const o=await(await this.caller.call(le(this.debug),`${this.apiUrl}/datasets/${t}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return o.url=`${this.getHostUrl()}/public/${o.share_token}/d`,o}async unshareDataset(t){pe(t);const a=await this.caller.call(le(this.debug),`${this.apiUrl}/datasets/${t}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(a,"unshare dataset",!0)}async readSharedDataset(t){return pe(t),await(await this.caller.call(le(this.debug),`${this.apiUrl}/public/${t}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(t,a){const r={};a!=null&&a.exampleIds&&(r.id=a.exampleIds);const s=new URLSearchParams;Object.entries(r).forEach(([f,p])=>{Array.isArray(p)?p.forEach(h=>s.append(f,h)):s.append(f,p)});const o=await this.caller.call(le(this.debug),`${this.apiUrl}/public/${t}/examples?${s.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),c=await o.json();if(!o.ok)throw"detail"in c?new Error(`Failed to list shared examples.
Status: ${o.status}
Message: ${Array.isArray(c.detail)?c.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${o.status} ${o.statusText}`);return c.map(f=>({...f,_hostUrl:this.getHostUrl()}))}async createProject({projectName:t,description:a=null,metadata:r=null,upsert:s=!1,projectExtra:o=null,referenceDatasetId:c=null}){const f=s?"?upsert=true":"",p=`${this.apiUrl}/sessions${f}`,h=o||{};r&&(h.metadata=r);const y={name:t,extra:h,description:a};c!==null&&(y.reference_dataset_id=c);const _=await this.caller.call(le(this.debug),p,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(y),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(_,"create project"),await _.json()}async updateProject(t,{name:a=null,description:r=null,metadata:s=null,projectExtra:o=null,endTime:c=null}){const f=`${this.apiUrl}/sessions/${t}`;let p=o;s&&(p={...p||{},metadata:s});const h={name:a,extra:p,description:r,end_time:c?new Date(c).toISOString():null},y=await this.caller.call(le(this.debug),f,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(y,"update project"),await y.json()}async hasProject({projectId:t,projectName:a}){let r="/sessions";const s=new URLSearchParams;if(t!==void 0&&a!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(t!==void 0)pe(t),r+=`/${t}`;else if(a!==void 0)s.append("name",a);else throw new Error("Must provide projectName or projectId");const o=await this.caller.call(le(this.debug),`${this.apiUrl}${r}?${s}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const c=await o.json();return o.ok?Array.isArray(c)?c.length>0:!0:!1}catch{return!1}}async readProject({projectId:t,projectName:a,includeStats:r}){let s="/sessions";const o=new URLSearchParams;if(t!==void 0&&a!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(t!==void 0)pe(t),s+=`/${t}`;else if(a!==void 0)o.append("name",a);else throw new Error("Must provide projectName or projectId");r!==void 0&&o.append("include_stats",r.toString());const c=await this._get(s,o);let f;if(Array.isArray(c)){if(c.length===0)throw new Error(`Project[id=${t}, name=${a}] not found`);f=c[0]}else f=c;return f}async getProjectUrl({projectId:t,projectName:a}){if(t===void 0&&a===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:t,projectName:a}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${r.id}`}async getDatasetUrl({datasetId:t,datasetName:a}){if(t===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:t,datasetName:a}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const t=new URLSearchParams({limit:"1"});for await(const a of this._getPaginated("/sessions",t))return this._tenantId=a[0].tenant_id,a[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:t,name:a,nameContains:r,referenceDatasetId:s,referenceDatasetName:o,referenceFree:c,metadata:f}={}){const p=new URLSearchParams;if(t!==void 0)for(const h of t)p.append("id",h);if(a!==void 0&&p.append("name",a),r!==void 0&&p.append("name_contains",r),s!==void 0)p.append("reference_dataset",s);else if(o!==void 0){const h=await this.readDataset({datasetName:o});p.append("reference_dataset",h.id)}c!==void 0&&p.append("reference_free",c.toString()),f!==void 0&&p.append("metadata",JSON.stringify(f));for await(const h of this._getPaginated("/sessions",p))yield*h}async deleteProject({projectId:t,projectName:a}){let r;if(t===void 0&&a===void 0)throw new Error("Must provide projectName or projectId");if(t!==void 0&&a!==void 0)throw new Error("Must provide either projectName or projectId, not both");t===void 0?r=(await this.readProject({projectName:a})).id:r=t,pe(r);const s=await this.caller.call(le(this.debug),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(s,`delete session ${r} (${a})`,!0)}async uploadCsv({csvFile:t,fileName:a,inputKeys:r,outputKeys:s,description:o,dataType:c,name:f}){const p=`${this.apiUrl}/datasets/upload`,h=new FormData;h.append("file",t,a),r.forEach(b=>{h.append("input_keys",b)}),s.forEach(b=>{h.append("output_keys",b)}),o&&h.append("description",o),c&&h.append("data_type",c),f&&h.append("name",f);const y=await this.caller.call(le(this.debug),p,{method:"POST",headers:this.headers,body:h,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(y,"upload CSV"),await y.json()}async createDataset(t,{description:a,dataType:r,inputsSchema:s,outputsSchema:o,metadata:c}={}){const f={name:t,description:a,extra:c?{metadata:c}:void 0};r&&(f.data_type=r),s&&(f.inputs_schema_definition=s),o&&(f.outputs_schema_definition=o);const p=await this.caller.call(le(this.debug),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(f),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(p,"create dataset"),await p.json()}async readDataset({datasetId:t,datasetName:a}){let r="/datasets";const s=new URLSearchParams({limit:"1"});if(t!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0)pe(t),r+=`/${t}`;else if(a!==void 0)s.append("name",a);else throw new Error("Must provide datasetName or datasetId");const o=await this._get(r,s);let c;if(Array.isArray(o)){if(o.length===0)throw new Error(`Dataset[id=${t}, name=${a}] not found`);c=o[0]}else c=o;return c}async hasDataset({datasetId:t,datasetName:a}){try{return await this.readDataset({datasetId:t,datasetName:a}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:t,datasetName:a,fromVersion:r,toVersion:s}){let o=t;if(o===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:a})).id);const c=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof s=="string"?s:s.toISOString()});return await this._get(`/datasets/${o}/versions/diff`,c)}async readDatasetOpenaiFinetuning({datasetId:t,datasetName:a}){const r="/datasets";if(t===void 0)if(a!==void 0)t=(await this.readDataset({datasetName:a})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${r}/${t}/openai_ft`)).text()).trim().split(`
`).map(f=>JSON.parse(f))}async*listDatasets({limit:t=100,offset:a=0,datasetIds:r,datasetName:s,datasetNameContains:o,metadata:c}={}){const f="/datasets",p=new URLSearchParams({limit:t.toString(),offset:a.toString()});if(r!==void 0)for(const h of r)p.append("id",h);s!==void 0&&p.append("name",s),o!==void 0&&p.append("name_contains",o),c!==void 0&&p.append("metadata",JSON.stringify(c));for await(const h of this._getPaginated(f,p))yield*h}async updateDataset(t){const{datasetId:a,datasetName:r,...s}=t;if(!a&&!r)throw new Error("Must provide either datasetName or datasetId");const o=a??(await this.readDataset({datasetName:r})).id;pe(o);const c=await this.caller.call(le(this.debug),`${this.apiUrl}/datasets/${o}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(c,"update dataset"),await c.json()}async updateDatasetTag(t){const{datasetId:a,datasetName:r,asOf:s,tag:o}=t;if(!a&&!r)throw new Error("Must provide either datasetName or datasetId");const c=a??(await this.readDataset({datasetName:r})).id;pe(c);const f=await this.caller.call(le(this.debug),`${this.apiUrl}/datasets/${c}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof s=="string"?s:s.toISOString(),tag:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(f,"update dataset tags")}async deleteDataset({datasetId:t,datasetName:a}){let r="/datasets",s=t;if(t!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(a!==void 0&&(s=(await this.readDataset({datasetName:a})).id),s!==void 0)pe(s),r+=`/${s}`;else throw new Error("Must provide datasetName or datasetId");const o=await this.caller.call(le(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(o,`delete ${r}`),await o.json()}async indexDataset({datasetId:t,datasetName:a,tag:r}){let s=t;if(!s&&!a)throw new Error("Must provide either datasetName or datasetId");if(s&&a)throw new Error("Must provide either datasetName or datasetId, not both");s||(s=(await this.readDataset({datasetName:a})).id),pe(s);const o={tag:r},c=await this.caller.call(le(this.debug),`${this.apiUrl}/datasets/${s}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(c,"index dataset"),await c.json()}async similarExamples(t,a,r,{filter:s}={}){const o={limit:r,inputs:t};s!==void 0&&(o.filter=s),pe(a);const c=await this.caller.call(le(this.debug),`${this.apiUrl}/datasets/${a}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(c,"fetch similar examples"),(await c.json()).examples}async createExample(t,a,r){var y;if(Qg(t)&&(a!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let s=a?r==null?void 0:r.datasetId:t.dataset_id;const o=a?r==null?void 0:r.datasetName:t.dataset_name;if(s===void 0&&o===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&o!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:o})).id);const c=(a?r==null?void 0:r.createdAt:t.created_at)||new Date;let f;Qg(t)?f=t:f={inputs:t,outputs:a,created_at:c==null?void 0:c.toISOString(),id:r==null?void 0:r.exampleId,metadata:r==null?void 0:r.metadata,split:r==null?void 0:r.split,source_run_id:r==null?void 0:r.sourceRunId,use_source_run_io:r==null?void 0:r.useSourceRunIO,use_source_run_attachments:r==null?void 0:r.useSourceRunAttachments,attachments:r==null?void 0:r.attachments};const p=await this._uploadExamplesMultipart(s,[f]);return await this.readExample(((y=p.example_ids)==null?void 0:y[0])??vt())}async createExamples(t){if(Array.isArray(t)){if(t.length===0)return[];const q=t;let N=q[0].dataset_id;const Y=q[0].dataset_name;if(N===void 0&&Y===void 0)throw new Error("Must provide either datasetName or datasetId");if(N!==void 0&&Y!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");N===void 0&&(N=(await this.readDataset({datasetName:Y})).id);const I=await this._uploadExamplesMultipart(N,q);return await Promise.all(I.example_ids.map(re=>this.readExample(re)))}const{inputs:a,outputs:r,metadata:s,splits:o,sourceRunIds:c,useSourceRunIOs:f,useSourceRunAttachments:p,attachments:h,exampleIds:y,datasetId:_,datasetName:b}=t;if(a===void 0)throw new Error("Must provide inputs when using legacy parameters");let w=_;const S=b;if(w===void 0&&S===void 0)throw new Error("Must provide either datasetName or datasetId");if(w!==void 0&&S!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");w===void 0&&(w=(await this.readDataset({datasetName:S})).id);const T=a.map((q,N)=>({dataset_id:w,inputs:q,outputs:r==null?void 0:r[N],metadata:s==null?void 0:s[N],split:o==null?void 0:o[N],id:y==null?void 0:y[N],attachments:h==null?void 0:h[N],source_run_id:c==null?void 0:c[N],use_source_run_io:f==null?void 0:f[N],use_source_run_attachments:p==null?void 0:p[N]})),R=await this._uploadExamplesMultipart(w,T);return await Promise.all(R.example_ids.map(q=>this.readExample(q)))}async createLLMExample(t,a,r){return this.createExample({input:t},{output:a},r)}async createChatExample(t,a,r){const s=t.map(c=>Ky(c)?Wy(c):c),o=Ky(a)?Wy(a):a;return this.createExample({input:s},{output:o},r)}async readExample(t){pe(t);const a=`/examples/${t}`,r=await this._get(a),{attachment_urls:s,...o}=r,c=o;return s&&(c.attachments=Object.entries(s).reduce((f,[p,h])=>(f[p.slice(11)]={presigned_url:h.presigned_url,mime_type:h.mime_type},f),{})),c}async*listExamples({datasetId:t,datasetName:a,exampleIds:r,asOf:s,splits:o,inlineS3Urls:c,metadata:f,limit:p,offset:h,filter:y,includeAttachments:_}={}){let b;if(t!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0)b=t;else if(a!==void 0)b=(await this.readDataset({datasetName:a})).id;else throw new Error("Must provide a datasetName or datasetId");const w=new URLSearchParams({dataset:b}),S=s?typeof s=="string"?s:s==null?void 0:s.toISOString():void 0;S&&w.append("as_of",S);const T=c??!0;if(w.append("inline_s3_urls",T.toString()),r!==void 0)for(const k of r)w.append("id",k);if(o!==void 0)for(const k of o)w.append("splits",k);if(f!==void 0){const k=JSON.stringify(f);w.append("metadata",k)}p!==void 0&&w.append("limit",p.toString()),h!==void 0&&w.append("offset",h.toString()),y!==void 0&&w.append("filter",y),_===!0&&["attachment_urls","outputs","metadata"].forEach(k=>w.append("select",k));let R=0;for await(const k of this._getPaginated("/examples",w)){for(const q of k){const{attachment_urls:N,...Y}=q,I=Y;N&&(I.attachments=Object.entries(N).reduce((K,[re,J])=>(K[re.slice(11)]={presigned_url:J.presigned_url,mime_type:J.mime_type||void 0},K),{})),yield I,R++}if(p!==void 0&&R>=p)break}}async deleteExample(t){pe(t);const a=`/examples/${t}`,r=await this.caller.call(le(this.debug),this.apiUrl+a,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(r,`delete ${a}`),await r.json()}async updateExample(t,a){let r;a?r=t:r=t.id,pe(r);let s;a?s={id:r,...a}:s=t;let o;return s.dataset_id!==void 0?o=s.dataset_id:o=(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(o,[s])}async updateExamples(t){let a;return t[0].dataset_id===void 0?a=(await this.readExample(t[0].id)).dataset_id:a=t[0].dataset_id,this._updateExamplesMultipart(a,t)}async readDatasetVersion({datasetId:t,datasetName:a,asOf:r,tag:s}){let o;if(t?o=t:o=(await this.readDataset({datasetName:a})).id,pe(o),r&&s||!r&&!s)throw new Error("Exactly one of asOf and tag must be specified.");const c=new URLSearchParams;r!==void 0&&c.append("as_of",typeof r=="string"?r:r.toISOString()),s!==void 0&&c.append("tag",s);const f=await this.caller.call(le(this.debug),`${this.apiUrl}/datasets/${o}/version?${c.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(f,"read dataset version"),await f.json()}async listDatasetSplits({datasetId:t,datasetName:a,asOf:r}){let s;if(t===void 0&&a===void 0)throw new Error("Must provide dataset name or ID");if(t!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");t===void 0?s=(await this.readDataset({datasetName:a})).id:s=t,pe(s);const o=new URLSearchParams,c=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return c&&o.append("as_of",c),await this._get(`/datasets/${s}/splits`,o)}async updateDatasetSplits({datasetId:t,datasetName:a,splitName:r,exampleIds:s,remove:o=!1}){let c;if(t===void 0&&a===void 0)throw new Error("Must provide dataset name or ID");if(t!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");t===void 0?c=(await this.readDataset({datasetName:a})).id:c=t,pe(c);const f={split_name:r,examples:s.map(h=>(pe(h),h)),remove:o},p=await this.caller.call(le(this.debug),`${this.apiUrl}/datasets/${c}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(f),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(p,"update dataset splits",!0)}async evaluateRun(t,a,{sourceInfo:r,loadChildRuns:s,referenceExample:o}={loadChildRuns:!1}){T_("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let c;if(typeof t=="string")c=await this.readRun(t,{loadChildRuns:s});else if(typeof t=="object"&&"id"in t)c=t;else throw new Error(`Invalid run type: ${typeof t}`);c.reference_example_id!==null&&c.reference_example_id!==void 0&&(o=await this.readExample(c.reference_example_id));const f=await a.evaluateRun(c,o),[p,h]=await this._logEvaluationFeedback(f,c,r);return h[0]}async createFeedback(t,a,{score:r,value:s,correction:o,comment:c,sourceInfo:f,feedbackSourceType:p="api",sourceRunId:h,feedbackId:y,feedbackConfig:_,projectId:b,comparativeExperimentId:w}){var q;if(!t&&!b)throw new Error("One of runId or projectId must be provided");if(t&&b)throw new Error("Only one of runId or projectId can be provided");const S={type:p??"api",metadata:f??{}};h!==void 0&&(S==null?void 0:S.metadata)!==void 0&&!S.metadata.__run&&(S.metadata.__run={run_id:h}),(S==null?void 0:S.metadata)!==void 0&&((q=S.metadata.__run)==null?void 0:q.run_id)!==void 0&&pe(S.metadata.__run.run_id);const T={id:y??vt(),run_id:t,key:a,score:Xg(r),value:s,correction:o,comment:c,feedback_source:S,comparative_experiment_id:w,feedbackConfig:_,session_id:b},R=`${this.apiUrl}/feedback`,k=await this.caller.call(le(this.debug),R,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(T),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(k,"create feedback",!0),T}async updateFeedback(t,{score:a,value:r,correction:s,comment:o}){const c={};a!=null&&(c.score=Xg(a)),r!=null&&(c.value=r),s!=null&&(c.correction=s),o!=null&&(c.comment=o),pe(t);const f=await this.caller.call(le(this.debug),`${this.apiUrl}/feedback/${t}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(f,"update feedback",!0)}async readFeedback(t){pe(t);const a=`/feedback/${t}`;return await this._get(a)}async deleteFeedback(t){pe(t);const a=`/feedback/${t}`,r=await this.caller.call(le(this.debug),this.apiUrl+a,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(r,`delete ${a}`),await r.json()}async*listFeedback({runIds:t,feedbackKeys:a,feedbackSourceTypes:r}={}){const s=new URLSearchParams;if(t&&s.append("run",t.join(",")),a)for(const o of a)s.append("key",o);if(r)for(const o of r)s.append("source",o);for await(const o of this._getPaginated("/feedback",s))yield*o}async createPresignedFeedbackToken(t,a,{expiration:r,feedbackConfig:s}={}){const o={run_id:t,feedback_key:a,feedback_config:s};return r?typeof r=="string"?o.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(o.expires_in=r):o.expires_in={hours:3},await(await this.caller.call(le(this.debug),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:t,experimentIds:a,referenceDatasetId:r,createdAt:s,description:o,metadata:c,id:f}){var y;if(a.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:a[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const p={id:f,name:t,experiment_ids:a,reference_dataset_id:r,description:o,created_at:(y=s??new Date)==null?void 0:y.toISOString(),extra:{}};return c&&(p.extra.metadata=c),await(await this.caller.call(le(this.debug),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(t){pe(t);const a=new URLSearchParams({run_id:t});for await(const r of this._getPaginated("/feedback/tokens",a))yield*r}_selectEvalResults(t){let a;return"results"in t?a=t.results:Array.isArray(t)?a=t:a=[t],a}async _logEvaluationFeedback(t,a,r){const s=this._selectEvalResults(t),o=[];for(const c of s){let f=r||{};c.evaluatorInfo&&(f={...c.evaluatorInfo,...f});let p=null;c.targetRunId?p=c.targetRunId:a&&(p=a.id),o.push(await this.createFeedback(p,c.key,{score:c.score,value:c.value,comment:c.comment,correction:c.correction,sourceInfo:f,sourceRunId:c.sourceRunId,feedbackConfig:c.feedbackConfig,feedbackSourceType:"model"}))}return[s,o]}async logEvaluationFeedback(t,a,r){const[s]=await this._logEvaluationFeedback(t,a,r);return s}async*listAnnotationQueues(t={}){const{queueIds:a,name:r,nameContains:s,limit:o}=t,c=new URLSearchParams;a&&a.forEach((p,h)=>{pe(p,`queueIds[${h}]`),c.append("ids",p)}),r&&c.append("name",r),s&&c.append("name_contains",s),c.append("limit",(o!==void 0?Math.min(o,100):100).toString());let f=0;for await(const p of this._getPaginated("/annotation-queues",c))if(yield*p,f++,o!==void 0&&f>=o)break}async createAnnotationQueue(t){const{name:a,description:r,queueId:s,rubricInstructions:o}=t,c={name:a,description:r,id:s||vt(),rubric_instructions:o},f=await this.caller.call(le(this.debug),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(c).filter(([h,y])=>y!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(f,"create annotation queue"),await f.json()}async readAnnotationQueue(t){const a=await this.caller.call(le(this.debug),`${this.apiUrl}/annotation-queues/${pe(t,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(a,"read annotation queue"),await a.json()}async updateAnnotationQueue(t,a){const{name:r,description:s,rubricInstructions:o}=a,c=await this.caller.call(le(this.debug),`${this.apiUrl}/annotation-queues/${pe(t,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:s,rubric_instructions:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(c,"update annotation queue")}async deleteAnnotationQueue(t){const a=await this.caller.call(le(this.debug),`${this.apiUrl}/annotation-queues/${pe(t,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(a,"delete annotation queue")}async addRunsToAnnotationQueue(t,a){const r=await this.caller.call(le(this.debug),`${this.apiUrl}/annotation-queues/${pe(t,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a.map((s,o)=>pe(s,`runIds[${o}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(t,a){const r=`/annotation-queues/${pe(t,"queueId")}/run`,s=await this.caller.call(le(this.debug),`${this.apiUrl}${r}/${a}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(s,"get run from annotation queue"),await s.json()}async deleteRunFromAnnotationQueue(t,a){const r=await this.caller.call(le(this.debug),`${this.apiUrl}/annotation-queues/${pe(t,"queueId")}/runs/${pe(a,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(r,"delete run from annotation queue")}async getSizeFromAnnotationQueue(t){const a=await this.caller.call(le(this.debug),`${this.apiUrl}/annotation-queues/${pe(t,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(a,"get size from annotation queue"),await a.json()}async _currentTenantIsOwner(t){const a=await this._getSettings();return t=="-"||a.tenant_handle===t}async _ownerConflictError(t,a){const r=await this._getSettings();return new Error(`Cannot ${t} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${a}`)}async _getLatestCommitHash(t){const a=await this.caller.call(le(this.debug),`${this.apiUrl}/commits/${t}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await a.json();if(!a.ok){const s=typeof r.detail=="string"?r.detail:JSON.stringify(r.detail),o=new Error(`Error ${a.status}: ${a.statusText}
${s}`);throw o.statusCode=a.status,o}if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(t,a){const[r,s,o]=fa(t),c=await this.caller.call(le(this.debug),`${this.apiUrl}/likes/${r}/${s}`,{method:"POST",body:JSON.stringify({like:a}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(c,`${a?"like":"unlike"} prompt`),await c.json()}async _getPromptUrl(t){const[a,r,s]=fa(t);if(await this._currentTenantIsOwner(a)){const o=await this._getSettings();return s!=="latest"?`${this.getHostUrl()}/prompts/${r}/${s.substring(0,8)}?organizationId=${o.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${o.id}`}else return s!=="latest"?`${this.getHostUrl()}/hub/${a}/${r}/${s.substring(0,8)}`:`${this.getHostUrl()}/hub/${a}/${r}`}async promptExists(t){return!!await this.getPrompt(t)}async likePrompt(t){return this._likeOrUnlikePrompt(t,!0)}async unlikePrompt(t){return this._likeOrUnlikePrompt(t,!1)}async*listCommits(t){for await(const a of this._getPaginated(`/commits/${t}/`,new URLSearchParams,r=>r.commits))yield*a}async*listPrompts(t){const a=new URLSearchParams;a.append("sort_field",(t==null?void 0:t.sortField)??"updated_at"),a.append("sort_direction","desc"),a.append("is_archived",(!!(t!=null&&t.isArchived)).toString()),(t==null?void 0:t.isPublic)!==void 0&&a.append("is_public",t.isPublic.toString()),t!=null&&t.query&&a.append("query",t.query);for await(const r of this._getPaginated("/repos",a,s=>s.repos))yield*r}async getPrompt(t){const[a,r,s]=fa(t),o=await this.caller.call(le(this.debug),`${this.apiUrl}/repos/${a}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(o.status===404)return null;await ge(o,"get prompt");const c=await o.json();return c.repo?c.repo:null}async createPrompt(t,a){const r=await this._getSettings();if(a!=null&&a.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[s,o,c]=fa(t);if(!await this._currentTenantIsOwner(s))throw await this._ownerConflictError("create a prompt",s);const f={repo_handle:o,...(a==null?void 0:a.description)&&{description:a.description},...(a==null?void 0:a.readme)&&{readme:a.readme},...(a==null?void 0:a.tags)&&{tags:a.tags},is_public:!!(a!=null&&a.isPublic)},p=await this.caller.call(le(this.debug),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(f),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(p,"create prompt");const{repo:h}=await p.json();return h}async createCommit(t,a,r){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[s,o,c]=fa(t),f=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${s}/${o}`):r==null?void 0:r.parentCommitHash,p={manifest:JSON.parse(JSON.stringify(a)),parent_commit:f},h=await this.caller.call(le(this.debug),`${this.apiUrl}/commits/${s}/${o}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(h,"create commit");const y=await h.json();return this._getPromptUrl(`${s}/${o}${y.commit_hash?`:${y.commit_hash}`:""}`)}async updateExamplesMultipart(t,a=[]){return this._updateExamplesMultipart(t,a)}async _updateExamplesMultipart(t,a=[]){var f;if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const p of a){const h=p.id,y={...p.metadata&&{metadata:p.metadata},...p.split&&{split:p.split}},_=zt(y,`Serializing body for example with id: ${h}`),b=new Blob([_],{type:"application/json"});if(r.append(h,b),p.inputs){const w=zt(p.inputs,`Serializing inputs for example with id: ${h}`),S=new Blob([w],{type:"application/json"});r.append(`${h}.inputs`,S)}if(p.outputs){const w=zt(p.outputs,`Serializing outputs whle updating example with id: ${h}`),S=new Blob([w],{type:"application/json"});r.append(`${h}.outputs`,S)}if(p.attachments)for(const[w,S]of Object.entries(p.attachments)){let T,R;Array.isArray(S)?[T,R]=S:(T=S.mimeType,R=S.data);const k=new Blob([R],{type:`${T}; length=${R.byteLength}`});r.append(`${h}.attachment.${w}`,k)}if(p.attachments_operations){const w=zt(p.attachments_operations,`Serializing attachments while updating example with id: ${h}`),S=new Blob([w],{type:"application/json"});r.append(`${h}.attachments_operations`,S)}}const s=t??((f=a[0])==null?void 0:f.dataset_id);return await(await this.caller.call(le(this.debug),`${this.apiUrl}/v1/platform/datasets/${s}/examples`,{method:"PATCH",headers:this.headers,body:r})).json()}async uploadExamplesMultipart(t,a=[]){return this._uploadExamplesMultipart(t,a)}async _uploadExamplesMultipart(t,a=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const c of a){const f=(c.id??vt()).toString(),p={created_at:c.created_at,...c.metadata&&{metadata:c.metadata},...c.split&&{split:c.split},...c.source_run_id&&{source_run_id:c.source_run_id},...c.use_source_run_io&&{use_source_run_io:c.use_source_run_io},...c.use_source_run_attachments&&{use_source_run_attachments:c.use_source_run_attachments}},h=zt(p,`Serializing body for uploaded example with id: ${f}`),y=new Blob([h],{type:"application/json"});if(r.append(f,y),c.inputs){const _=zt(c.inputs,`Serializing inputs for uploaded example with id: ${f}`),b=new Blob([_],{type:"application/json"});r.append(`${f}.inputs`,b)}if(c.outputs){const _=zt(c.outputs,`Serializing outputs for uploaded example with id: ${f}`),b=new Blob([_],{type:"application/json"});r.append(`${f}.outputs`,b)}if(c.attachments)for(const[_,b]of Object.entries(c.attachments)){let w,S;Array.isArray(b)?[w,S]=b:(w=b.mimeType,S=b.data);const T=new Blob([S],{type:`${w}; length=${S.byteLength}`});r.append(`${f}.attachment.${_}`,T)}}const s=await this.caller.call(le(this.debug),`${this.apiUrl}/v1/platform/datasets/${t}/examples`,{method:"POST",headers:this.headers,body:r});return await ge(s,"upload examples"),await s.json()}async updatePrompt(t,a){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[r,s]=fa(t);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const o={};if((a==null?void 0:a.description)!==void 0&&(o.description=a.description),(a==null?void 0:a.readme)!==void 0&&(o.readme=a.readme),(a==null?void 0:a.tags)!==void 0&&(o.tags=a.tags),(a==null?void 0:a.isPublic)!==void 0&&(o.is_public=a.isPublic),(a==null?void 0:a.isArchived)!==void 0&&(o.is_archived=a.isArchived),Object.keys(o).length===0)throw new Error("No valid update options provided");const c=await this.caller.call(le(this.debug),`${this.apiUrl}/repos/${r}/${s}`,{method:"PATCH",body:JSON.stringify(o),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ge(c,"update prompt"),c.json()}async deletePrompt(t){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[a,r,s]=fa(t);if(!await this._currentTenantIsOwner(a))throw await this._ownerConflictError("delete a prompt",a);return await(await this.caller.call(le(this.debug),`${this.apiUrl}/repos/${a}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(t,a){const[r,s,o]=fa(t),c=await this.caller.call(le(this.debug),`${this.apiUrl}/commits/${r}/${s}/${o}${a!=null&&a.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ge(c,"pull prompt commit");const f=await c.json();return{owner:r,repo:s,commit_hash:f.commit_hash,manifest:f.manifest,examples:f.examples}}async _pullPrompt(t,a){const r=await this.pullPromptCommit(t,{includeModel:a==null?void 0:a.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(t,a){return await this.promptExists(t)?a&&Object.keys(a).some(s=>s!=="object")&&await this.updatePrompt(t,{description:a==null?void 0:a.description,readme:a==null?void 0:a.readme,tags:a==null?void 0:a.tags,isPublic:a==null?void 0:a.isPublic}):await this.createPrompt(t,{description:a==null?void 0:a.description,readme:a==null?void 0:a.readme,tags:a==null?void 0:a.tags,isPublic:a==null?void 0:a.isPublic}),a!=null&&a.object?await this.createCommit(t,a==null?void 0:a.object,{parentCommitHash:a==null?void 0:a.parentCommitHash}):await this._getPromptUrl(t)}async clonePublicDataset(t,a={}){const{sourceApiUrl:r=this.apiUrl,datasetName:s}=a,[o,c]=this.parseTokenOrUrl(t,r),f=new ns({apiUrl:o,apiKey:"placeholder"}),p=await f.readSharedDataset(c),h=s||p.name;try{if(await this.hasDataset({datasetId:h})){console.log(`Dataset ${h} already exists in your tenant. Skipping.`);return}}catch{}const y=await f.listSharedExamples(c),_=await this.createDataset(h,{description:p.description,dataType:p.data_type||"kv",inputsSchema:p.inputs_schema_definition??void 0,outputsSchema:p.outputs_schema_definition??void 0});try{await this.createExamples({inputs:y.map(b=>b.inputs),outputs:y.flatMap(b=>b.outputs?[b.outputs]:[]),datasetId:_.id})}catch(b){throw console.error(`An error occurred while creating dataset ${h}. You should delete it manually.`),b}}parseTokenOrUrl(t,a,r=2,s="dataset"){try{return pe(t),[a,t]}catch{}try{const c=new URL(t).pathname.split("/").filter(f=>f!=="");if(c.length>=r){const f=c[c.length-r];return[a,f]}else throw new Error(`Invalid public ${s} URL: ${t}`)}catch{throw new Error(`Invalid public ${s} URL or token: ${t}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:t})=>t),this.batchIngestCaller.queue.onIdle()])}}function Qg(u){return"dataset_id"in u||"dataset_name"in u}const C_="0.3.30";var Xi={};let Dn;const oS=()=>typeof window<"u"&&typeof window.document<"u",cS=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",dS=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),N_=()=>typeof Deno<"u",fS=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!N_(),hS=()=>Dn||(oS()?Dn="browser":fS()?Dn="node":cS()?Dn="webworker":dS()?Dn="jsdom":N_()?Dn="deno":Dn="other",Dn);let Cd;function j_(){if(Cd===void 0){const u=hS(),t=yS();Cd={library:"langsmith",runtime:u,sdk:"langsmith-js",sdk_version:C_,...t}}return Cd}function mS(){const u=pS()||{},t={},a=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,s]of Object.entries(u))(r.startsWith("LANGCHAIN_")||r.startsWith("LANGSMITH_"))&&typeof s=="string"&&!a.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?t.revision_id=s:t[r]=s);return t}function pS(){try{return typeof process<"u"&&Xi?Object.entries(Xi).reduce((u,[t,a])=>(u[t]=String(a),u),{}):void 0}catch{return}}function ya(u){try{return typeof process<"u"?Xi==null?void 0:Xi[u]:void 0}catch{return}}function _n(u){return ya(`LANGSMITH_${u}`)||ya(`LANGCHAIN_${u}`)}let Nd;function yS(){if(Nd!==void 0)return Nd;const u=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(const a of u){const r=ya(a);r!==void 0&&(t[a]=r)}return Nd=t,t}const gS=u=>!!["TRACING_V2","TRACING"].find(a=>_n(a)==="true"),jd=Symbol.for("lc:context_variables");function _S(u){return u.replace(/[-:.]/g,"")}function bS(u,t,a=1){const r=a.toFixed(0).slice(0,3).padStart(3,"0");return _S(`${new Date(u).toISOString().slice(0,-1)}${r}Z`)+t}class Hu{constructor(t,a,r){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=t,this.tags=a,this.project_name=r}static fromHeader(t){const a=t.split(",");let r={},s=[],o;for(const c of a){const[f,p]=c.split("="),h=decodeURIComponent(p);f==="langsmith-metadata"?r=JSON.parse(h):f==="langsmith-tags"?s=h.split(","):f==="langsmith-project"&&(o=h)}return new Hu(r,s,o)}toHeader(){const t=[];return this.metadata&&Object.keys(this.metadata).length>0&&t.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&t.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&t.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),t.join(",")}}class Pt{constructor(t){var f;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),L_(t)){Object.assign(this,{...t});return}const a=Pt.getDefaultConfig(),{metadata:r,...s}=t,o=s.client??Pt.getSharedClient(),c={...r,...(f=s==null?void 0:s.extra)==null?void 0:f.metadata};if(s.extra={...s.extra,metadata:c},Object.assign(this,{...a,...s,client:o}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const p=bS(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+p:this.dotted_order=p}}set metadata(t){var a;this.extra={...this.extra,metadata:{...(a=this.extra)==null?void 0:a.metadata,...t}}}get metadata(){var t;return(t=this.extra)==null?void 0:t.metadata}static getDefaultConfig(){return{id:vt(),run_type:"chain",project_name:_n("PROJECT")??ya("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:ya("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:ya("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return Pt.sharedClient||(Pt.sharedClient=new ns),Pt.sharedClient}createChild(t){var p,h,y,_,b,w;const a=this.child_execution_order+1,r=new Pt({...t,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:a,child_execution_order:a});jd in this&&(r[jd]=this[jd]);const s=Symbol.for("lc:child_config"),o=((p=t.extra)==null?void 0:p[s])??this.extra[s];if(wS(o)){const S={...o},T=vS(S.callbacks)?(y=(h=S.callbacks).copy)==null?void 0:y.call(h):void 0;T&&(Object.assign(T,{_parentRunId:r.id}),(w=(b=(_=T.handlers)==null?void 0:_.find(k_))==null?void 0:b.updateFromRunTree)==null||w.call(b,r),S.callbacks=T),r.extra[s]=S}const c=new Set;let f=this;for(;f!=null&&!c.has(f.id);)c.add(f.id),f.child_execution_order=Math.max(f.child_execution_order,a),f=f.parent_run;return this.child_runs.push(r),r}async end(t,a,r=Date.now(),s){this.outputs=this.outputs??t,this.error=this.error??a,this.end_time=this.end_time??r,s&&Object.keys(s).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...s}}:{metadata:s})}_convertToCreate(t,a,r=!0){var p;const s=t.extra??{};if(s.runtime||(s.runtime={}),a)for(const[h,y]of Object.entries(a))s.runtime[h]||(s.runtime[h]=y);let o,c;return r?(c=(p=t.parent_run)==null?void 0:p.id,o=[]):(o=t.child_runs.map(h=>this._convertToCreate(h,a,r)),c=void 0),{id:t.id,name:t.name,start_time:t.start_time,end_time:t.end_time,run_type:t.run_type,reference_example_id:t.reference_example_id,extra:s,serialized:t.serialized,error:t.error,inputs:t.inputs,outputs:t.outputs,session_name:t.project_name,child_runs:o,parent_run_id:c,trace_id:t.trace_id,dotted_order:t.dotted_order,tags:t.tags,attachments:t.attachments}}async postRun(t=!0){try{const a=j_(),r=await this._convertToCreate(this,a,!0);if(await this.client.createRun(r),!t){T_("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const s of this.child_runs)await s.postRun(!1)}}catch(a){console.error(`Error in postRun for run ${this.id}:`,a)}}async patchRun(){var t;try{const a={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(t=this.parent_run)==null?void 0:t.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};await this.client.updateRun(this.id,a)}catch(a){console.error(`Error in patchRun for run ${this.id}`,a)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(t){this.events||(this.events=[]),typeof t=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:t}):this.events.push({...t,time:t.time??new Date().toISOString()})}static fromRunnableConfig(t,a){var h,y,_,b;const r=t==null?void 0:t.callbacks;let s,o,c,f=gS();if(r){const w=((h=r==null?void 0:r.getParentRunId)==null?void 0:h.call(r))??"",S=(y=r==null?void 0:r.handlers)==null?void 0:y.find(T=>(T==null?void 0:T.name)=="langchain_tracer");s=(_=S==null?void 0:S.getRun)==null?void 0:_.call(S,w),o=S==null?void 0:S.projectName,c=S==null?void 0:S.client,f=f||!!S}return s?new Pt({name:s.name,id:s.id,trace_id:s.trace_id,dotted_order:s.dotted_order,client:c,tracingEnabled:f,project_name:o,tags:[...new Set(((s==null?void 0:s.tags)??[]).concat((t==null?void 0:t.tags)??[]))],extra:{metadata:{...(b=s==null?void 0:s.extra)==null?void 0:b.metadata,...t==null?void 0:t.metadata}}}).createChild(a):new Pt({...a,client:c,tracingEnabled:f,project_name:o})}static fromDottedOrder(t){return this.fromHeaders({"langsmith-trace":t})}static fromHeaders(t,a){var h;const r="get"in t&&typeof t.get=="function"?{"langsmith-trace":t.get("langsmith-trace"),baggage:t.get("baggage")}:t,s=r["langsmith-trace"];if(!s||typeof s!="string")return;const o=s.trim(),c=o.split(".").map(y=>{const[_,b]=y.split("Z");return{strTime:_,time:Date.parse(_+"Z"),uuid:b}}),f=c[0].uuid,p={...a,name:(a==null?void 0:a.name)??"parent",run_type:(a==null?void 0:a.run_type)??"chain",start_time:(a==null?void 0:a.start_time)??Date.now(),id:(h=c.at(-1))==null?void 0:h.uuid,trace_id:f,dotted_order:o};if(r.baggage&&typeof r.baggage=="string"){const y=Hu.fromHeader(r.baggage);p.metadata=y.metadata,p.tags=y.tags,p.project_name=y.project_name}return new Pt(p)}toHeaders(t){var r;const a={"langsmith-trace":this.dotted_order,baggage:new Hu((r=this.extra)==null?void 0:r.metadata,this.tags,this.project_name).toHeader()};if(t)for(const[s,o]of Object.entries(a))t.set(s,o);return a}}Object.defineProperty(Pt,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function L_(u){return u!==void 0&&typeof u.createChild=="function"&&typeof u.postRun=="function"}function k_(u){return typeof u=="object"&&u!=null&&typeof u.name=="string"&&u.name==="langchain_tracer"}function Fg(u){return Array.isArray(u)&&u.some(t=>k_(t))}function vS(u){return typeof u=="object"&&u!=null&&Array.isArray(u.handlers)}function wS(u){var t;return u!==void 0&&typeof u.callbacks=="object"&&(Fg((t=u.callbacks)==null?void 0:t.handlers)||Fg(u.callbacks))}let SS=class{getStore(){}run(t,a){return a()}};const Ld=Symbol.for("ls:tracing_async_local_storage"),ES=new SS;let TS=class{getInstance(){return globalThis[Ld]??ES}initializeGlobalInstance(t){globalThis[Ld]===void 0&&(globalThis[Ld]=t)}};const OS=new TS;function AS(u=!1){const t=OS.getInstance().getStore();if(!u&&!L_(t))throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return t}function mf(u){return typeof u=="function"&&"langsmith:traceable"in u}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const RS=Object.prototype.hasOwnProperty;function xS(u,t){return RS.call(u,t)}function CS(u){if(Array.isArray(u)){const a=new Array(u.length);for(let r=0;r<a.length;r++)a[r]=""+r;return a}if(Object.keys)return Object.keys(u);let t=[];for(let a in u)xS(u,a)&&t.push(a);return t}function Ir(u){switch(typeof u){case"object":return JSON.parse(JSON.stringify(u));case"undefined":return null;default:return u}}function Fd(u){let t=0;const a=u.length;let r;for(;t<a;){if(r=u.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function NS(u){return u.replace(/~1/g,"/").replace(/~0/g,"~")}function Jd(u){if(u===void 0)return!0;if(u){if(Array.isArray(u)){for(let a=0,r=u.length;a<r;a++)if(Jd(u[a]))return!0}else if(typeof u=="object"){const a=CS(u),r=a.length;for(var t=0;t<r;t++)if(Jd(u[a[t]]))return!0}}return!1}function Jg(u,t){const a=[u];for(const r in t){const s=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof s<"u"&&a.push(`${r}: ${s}`)}return a.join(`
`)}class jS extends Error{constructor(t,a,r,s,o){super(Jg(t,{name:a,index:r,operation:s,tree:o})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.setPrototypeOf(this,new.target.prototype),this.message=Jg(t,{name:a,index:r,operation:s,tree:o})}}const et=jS,kr={add:function(u,t,a){return u[t]=this.value,{newDocument:a}},remove:function(u,t,a){var r=u[t];return delete u[t],{newDocument:a,removed:r}},replace:function(u,t,a){var r=u[t];return u[t]=this.value,{newDocument:a,removed:r}},move:function(u,t,a){let r=Kd(a,this.path);r&&(r=Ir(r));const s=Qi(a,{op:"remove",path:this.from}).removed;return Qi(a,{op:"add",path:this.path,value:s}),{newDocument:a,removed:r}},copy:function(u,t,a){const r=Kd(a,this.from);return Qi(a,{op:"add",path:this.path,value:Ir(r)}),{newDocument:a}},test:function(u,t,a){return{newDocument:a,test:Zu(u[t],this.value)}},_get:function(u,t,a){return this.value=u[t],{newDocument:a}}};var LS={add:function(u,t,a){return Fd(t)?u.splice(t,0,this.value):u[t]=this.value,{newDocument:a,index:t}},remove:function(u,t,a){var r=u.splice(t,1);return{newDocument:a,removed:r[0]}},replace:function(u,t,a){var r=u[t];return u[t]=this.value,{newDocument:a,removed:r}},move:kr.move,copy:kr.copy,test:kr.test,_get:kr._get};function Kd(u,t){if(t=="")return u;var a={op:"_get",path:t};return Qi(u,a),a.value}function Qi(u,t,a=!1,r=!0,s=!0,o=0){if(a&&(typeof a=="function"?a(t,0,u,t.path):Wd(t,0)),t.path===""){let c={newDocument:u};if(t.op==="add")return c.newDocument=t.value,c;if(t.op==="replace")return c.newDocument=t.value,c.removed=u,c;if(t.op==="move"||t.op==="copy")return c.newDocument=Kd(u,t.from),t.op==="move"&&(c.removed=u),c;if(t.op==="test"){if(c.test=Zu(u,t.value),c.test===!1)throw new et("Test operation failed","TEST_OPERATION_FAILED",o,t,u);return c.newDocument=u,c}else{if(t.op==="remove")return c.removed=u,c.newDocument=null,c;if(t.op==="_get")return t.value=u,c;if(a)throw new et("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,u);return c}}else{r||(u=Ir(u));const f=(t.path||"").split("/");let p=u,h=1,y=f.length,_,b,w;for(typeof a=="function"?w=a:w=Wd;;){if(b=f[h],b&&b.indexOf("~")!=-1&&(b=NS(b)),s&&(b=="__proto__"||b=="prototype"&&h>0&&f[h-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(a&&_===void 0&&(p[b]===void 0?_=f.slice(0,h).join("/"):h==y-1&&(_=t.path),_!==void 0&&w(t,0,u,_)),h++,Array.isArray(p)){if(b==="-")b=p.length;else{if(a&&!Fd(b))throw new et("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,u);Fd(b)&&(b=~~b)}if(h>=y){if(a&&t.op==="add"&&b>p.length)throw new et("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,u);const S=LS[t.op].call(t,p,b,u);if(S.test===!1)throw new et("Test operation failed","TEST_OPERATION_FAILED",o,t,u);return S}}else if(h>=y){const S=kr[t.op].call(t,p,b,u);if(S.test===!1)throw new et("Test operation failed","TEST_OPERATION_FAILED",o,t,u);return S}if(p=p[b],a&&h<y&&(!p||typeof p!="object"))throw new et("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,u)}}}function Gu(u,t,a,r=!0,s=!0){if(a&&!Array.isArray(t))throw new et("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(u=Ir(u));const o=new Array(t.length);for(let c=0,f=t.length;c<f;c++)o[c]=Qi(u,t[c],a,!0,s,c),u=o[c].newDocument;return o.newDocument=u,o}function Wd(u,t,a,r){if(typeof u!="object"||u===null||Array.isArray(u))throw new et("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,u,a);if(kr[u.op]){if(typeof u.path!="string")throw new et("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,u,a);if(u.path.indexOf("/")!==0&&u.path.length>0)throw new et('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,u,a);if((u.op==="move"||u.op==="copy")&&typeof u.from!="string")throw new et("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,u,a);if((u.op==="add"||u.op==="replace"||u.op==="test")&&u.value===void 0)throw new et("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,u,a);if((u.op==="add"||u.op==="replace"||u.op==="test")&&Jd(u.value))throw new et("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,u,a);if(a){if(u.op=="add"){var s=u.path.split("/").length,o=r.split("/").length;if(s!==o+1&&s!==o)throw new et("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,u,a)}else if(u.op==="replace"||u.op==="remove"||u.op==="_get"){if(u.path!==r)throw new et("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,u,a)}else if(u.op==="move"||u.op==="copy"){var c={op:"_get",path:u.from,value:void 0},f=kS([c],a);if(f&&f.name==="OPERATION_PATH_UNRESOLVABLE")throw new et("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,u,a)}}}else throw new et("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,u,a)}function kS(u,t,a){try{if(!Array.isArray(u))throw new et("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Gu(Ir(t),Ir(u),a||!0);else{a=a||Wd;for(var r=0;r<u.length;r++)a(u[r],r,t,void 0)}}catch(s){if(s instanceof et)return s;throw s}}function Zu(u,t){if(u===t)return!0;if(u&&t&&typeof u=="object"&&typeof t=="object"){var a=Array.isArray(u),r=Array.isArray(t),s,o,c;if(a&&r){if(o=u.length,o!=t.length)return!1;for(s=o;s--!==0;)if(!Zu(u[s],t[s]))return!1;return!0}if(a!=r)return!1;var f=Object.keys(u);if(o=f.length,o!==Object.keys(t).length)return!1;for(s=o;s--!==0;)if(!t.hasOwnProperty(f[s]))return!1;for(s=o;s--!==0;)if(c=f[s],!Zu(u[c],t[c]))return!1;return!0}return u!==u&&t!==t}var kd,Kg;function $S(){return Kg||(Kg=1,kd=function(u,t){if(typeof u!="string")throw new TypeError("Expected a string");return t=typeof t>"u"?"_":t,u.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}),kd}var DS=$S();const MS=ss(DS);var ju={exports:{}},Wg;function US(){if(Wg)return ju.exports;Wg=1;const u=/[\p{Lu}]/u,t=/[\p{Ll}]/u,a=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,o=new RegExp("^"+s.source),c=new RegExp(s.source+r.source,"gu"),f=new RegExp("\\d+"+r.source,"gu"),p=(b,w,S)=>{let T=!1,R=!1,k=!1;for(let q=0;q<b.length;q++){const N=b[q];T&&u.test(N)?(b=b.slice(0,q)+"-"+b.slice(q),T=!1,k=R,R=!0,q++):R&&k&&t.test(N)?(b=b.slice(0,q-1)+"-"+b.slice(q-1),k=R,R=!1,T=!0):(T=w(N)===N&&S(N)!==N,k=R,R=S(N)===N&&w(N)!==N)}return b},h=(b,w)=>(a.lastIndex=0,b.replace(a,S=>w(S))),y=(b,w)=>(c.lastIndex=0,f.lastIndex=0,b.replace(c,(S,T)=>w(T)).replace(f,S=>w(S))),_=(b,w)=>{if(!(typeof b=="string"||Array.isArray(b)))throw new TypeError("Expected the input to be `string | string[]`");if(w={pascalCase:!1,preserveConsecutiveUppercase:!1,...w},Array.isArray(b)?b=b.map(k=>k.trim()).filter(k=>k.length).join("-"):b=b.trim(),b.length===0)return"";const S=w.locale===!1?k=>k.toLowerCase():k=>k.toLocaleLowerCase(w.locale),T=w.locale===!1?k=>k.toUpperCase():k=>k.toLocaleUpperCase(w.locale);return b.length===1?w.pascalCase?T(b):S(b):(b!==S(b)&&(b=p(b,S,T)),b=b.replace(o,""),w.preserveConsecutiveUppercase?b=h(b,S):b=S(b),w.pascalCase&&(b=T(b.charAt(0))+b.slice(1)),y(b,T))};return ju.exports=_,ju.exports.default=_,ju.exports}US();function IS(u,t){return(t==null?void 0:t[u])||MS(u)}function zS(u,t,a){const r={};for(const s in u)Object.hasOwn(u,s)&&(r[t(s,a)]=u[s]);return r}function e_(u){return Array.isArray(u)?[...u]:{...u}}function PS(u,t){const a=e_(u);for(const[r,s]of Object.entries(t)){const[o,...c]=r.split(".").reverse();let f=a;for(const p of c.reverse()){if(f[p]===void 0)break;f[p]=e_(f[p]),f=f[p]}f[o]!==void 0&&(f[o]={lc:1,type:"secret",id:[s]})}return a}function $_(u){const t=Object.getPrototypeOf(u);return typeof u.lc_name=="function"&&(typeof t.lc_name!="function"||u.lc_name()!==t.lc_name())?u.lc_name():u.name}class zr{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,$_(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(t,...a){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(t||{}).filter(([r])=>{var s;return(s=this.lc_serializable_keys)==null?void 0:s.includes(r)})):this.lc_kwargs=t??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof zr||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const t={},a={},r=Object.keys(this.lc_kwargs).reduce((s,o)=>(s[o]=o in this?this[o]:this.lc_kwargs[o],s),{});for(let s=Object.getPrototypeOf(this);s;s=Object.getPrototypeOf(s))Object.assign(t,Reflect.get(s,"lc_aliases",this)),Object.assign(a,Reflect.get(s,"lc_secrets",this)),Object.assign(r,Reflect.get(s,"lc_attributes",this));return Object.keys(a).forEach(s=>{let o=this,c=r;const[f,...p]=s.split(".").reverse();for(const h of p.reverse()){if(!(h in o)||o[h]===void 0)return;(!(h in c)||c[h]===void 0)&&(typeof o[h]=="object"&&o[h]!=null?c[h]={}:Array.isArray(o[h])&&(c[h]=[])),o=o[h],c=c[h]}f in o&&o[f]!==void 0&&(c[f]=c[f]||o[f])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:zS(Object.keys(a).length?PS(r,a):r,IS,t)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}var $d={};const qS=()=>typeof window<"u"&&typeof window.document<"u",BS=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",HS=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),pf=()=>typeof Deno<"u",GS=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!pf(),ZS=()=>{let u;return qS()?u="browser":GS()?u="node":BS()?u="webworker":HS()?u="jsdom":pf()?u="deno":u="other",u};let Dd;async function VS(){return Dd===void 0&&(Dd={library:"langchain-js",runtime:ZS()}),Dd}function ga(u){try{return typeof process<"u"?$d==null?void 0:$d[u]:pf()?Deno==null?void 0:Deno.env.get(u):void 0}catch{return}}class YS{}class ls extends YS{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,$_(this.constructor)]}constructor(t){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:ga("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=t||{},t&&(this.ignoreLLM=t.ignoreLLM??this.ignoreLLM,this.ignoreChain=t.ignoreChain??this.ignoreChain,this.ignoreAgent=t.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=t.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=t.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=t.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(t._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return zr.prototype.toJSON.call(this)}toJSONNotImplemented(){return zr.prototype.toJSONNotImplemented.call(this)}static fromMethods(t){class a extends ls{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:vt()}),Object.assign(this,t)}}return new a}}const XS=u=>{const t=u;return t!==void 0&&typeof t.copy=="function"&&typeof t.name=="string"&&typeof t.awaitHandlers=="boolean"};function Md(u,t){return u&&!Array.isArray(u)&&typeof u=="object"?u:{[t]:u}}function QS(u){return u.replace(/[-:.]/g,"")}function FS(u,t,a){const r=a.toFixed(0).slice(0,3).padStart(3,"0");return QS(`${new Date(u).toISOString().slice(0,-1)}${r}Z`)+t}function Gi(u){return typeof u._addRunToRunMap=="function"}class os extends ls{constructor(t){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(t){return t instanceof Error?t.message+(t!=null&&t.stack?`

${t.stack}`:""):typeof t=="string"?t:`${t}`}_addChildRun(t,a){t.child_runs.push(a)}_addRunToRunMap(t){const a=FS(t.start_time,t.id,t.execution_order),r={...t};if(r.parent_run_id!==void 0){const s=this.runMap.get(r.parent_run_id);s&&(this._addChildRun(s,r),s.child_execution_order=Math.max(s.child_execution_order,r.child_execution_order),r.trace_id=s.trace_id,s.dotted_order!==void 0&&(r.dotted_order=[s.dotted_order,a].join(".")))}else r.trace_id=r.id,r.dotted_order=a;return this.runMap.set(r.id,r),r}async _endTrace(t){var r;const a=t.parent_run_id!==void 0&&this.runMap.get(t.parent_run_id);a?a.child_execution_order=Math.max(a.child_execution_order,t.child_execution_order):await this.persistRun(t),this.runMap.delete(t.id),await((r=this.onRunUpdate)==null?void 0:r.call(this,t))}_getExecutionOrder(t){const a=t!==void 0&&this.runMap.get(t);return a?a.child_execution_order+1:1}_createRunForLLMStart(t,a,r,s,o,c,f,p){const h=this._getExecutionOrder(s),y=Date.now(),_=f?{...o,metadata:f}:o,b={id:r,name:p??t.id[t.id.length-1],parent_run_id:s,start_time:y,serialized:t,events:[{name:"start",time:new Date(y).toISOString()}],inputs:{prompts:a},execution_order:h,child_runs:[],child_execution_order:h,run_type:"llm",extra:_??{},tags:c||[]};return this._addRunToRunMap(b)}async handleLLMStart(t,a,r,s,o,c,f,p){var y,_;const h=this.runMap.get(r)??this._createRunForLLMStart(t,a,r,s,o,c,f,p);return await((y=this.onRunCreate)==null?void 0:y.call(this,h)),await((_=this.onLLMStart)==null?void 0:_.call(this,h)),h}_createRunForChatModelStart(t,a,r,s,o,c,f,p){const h=this._getExecutionOrder(s),y=Date.now(),_=f?{...o,metadata:f}:o,b={id:r,name:p??t.id[t.id.length-1],parent_run_id:s,start_time:y,serialized:t,events:[{name:"start",time:new Date(y).toISOString()}],inputs:{messages:a},execution_order:h,child_runs:[],child_execution_order:h,run_type:"llm",extra:_??{},tags:c||[]};return this._addRunToRunMap(b)}async handleChatModelStart(t,a,r,s,o,c,f,p){var y,_;const h=this.runMap.get(r)??this._createRunForChatModelStart(t,a,r,s,o,c,f,p);return await((y=this.onRunCreate)==null?void 0:y.call(this,h)),await((_=this.onLLMStart)==null?void 0:_.call(this,h)),h}async handleLLMEnd(t,a,r,s,o){var f;const c=this.runMap.get(a);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error("No LLM run to end.");return c.end_time=Date.now(),c.outputs=t,c.events.push({name:"end",time:new Date(c.end_time).toISOString()}),c.extra={...c.extra,...o},await((f=this.onLLMEnd)==null?void 0:f.call(this,c)),await this._endTrace(c),c}async handleLLMError(t,a,r,s,o){var f;const c=this.runMap.get(a);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error("No LLM run to end.");return c.end_time=Date.now(),c.error=this.stringifyError(t),c.events.push({name:"error",time:new Date(c.end_time).toISOString()}),c.extra={...c.extra,...o},await((f=this.onLLMError)==null?void 0:f.call(this,c)),await this._endTrace(c),c}_createRunForChainStart(t,a,r,s,o,c,f,p){const h=this._getExecutionOrder(s),y=Date.now(),_={id:r,name:p??t.id[t.id.length-1],parent_run_id:s,start_time:y,serialized:t,events:[{name:"start",time:new Date(y).toISOString()}],inputs:a,execution_order:h,child_execution_order:h,run_type:f??"chain",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(_)}async handleChainStart(t,a,r,s,o,c,f,p){var y,_;const h=this.runMap.get(r)??this._createRunForChainStart(t,a,r,s,o,c,f,p);return await((y=this.onRunCreate)==null?void 0:y.call(this,h)),await((_=this.onChainStart)==null?void 0:_.call(this,h)),h}async handleChainEnd(t,a,r,s,o){var f;const c=this.runMap.get(a);if(!c)throw new Error("No chain run to end.");return c.end_time=Date.now(),c.outputs=Md(t,"output"),c.events.push({name:"end",time:new Date(c.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(c.inputs=Md(o.inputs,"input")),await((f=this.onChainEnd)==null?void 0:f.call(this,c)),await this._endTrace(c),c}async handleChainError(t,a,r,s,o){var f;const c=this.runMap.get(a);if(!c)throw new Error("No chain run to end.");return c.end_time=Date.now(),c.error=this.stringifyError(t),c.events.push({name:"error",time:new Date(c.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(c.inputs=Md(o.inputs,"input")),await((f=this.onChainError)==null?void 0:f.call(this,c)),await this._endTrace(c),c}_createRunForToolStart(t,a,r,s,o,c,f){const p=this._getExecutionOrder(s),h=Date.now(),y={id:r,name:f??t.id[t.id.length-1],parent_run_id:s,start_time:h,serialized:t,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{input:a},execution_order:p,child_execution_order:p,run_type:"tool",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(y)}async handleToolStart(t,a,r,s,o,c,f){var h,y;const p=this.runMap.get(r)??this._createRunForToolStart(t,a,r,s,o,c,f);return await((h=this.onRunCreate)==null?void 0:h.call(this,p)),await((y=this.onToolStart)==null?void 0:y.call(this,p)),p}async handleToolEnd(t,a){var s;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:t},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((s=this.onToolEnd)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleToolError(t,a){var s;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(t),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((s=this.onToolError)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleAgentAction(t,a){var o;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const s=r;s.actions=s.actions||[],s.actions.push(t),s.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:t}}),await((o=this.onAgentAction)==null?void 0:o.call(this,r))}async handleAgentEnd(t,a){var s;const r=this.runMap.get(a);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:t}}),await((s=this.onAgentEnd)==null?void 0:s.call(this,r)))}_createRunForRetrieverStart(t,a,r,s,o,c,f){const p=this._getExecutionOrder(s),h=Date.now(),y={id:r,name:f??t.id[t.id.length-1],parent_run_id:s,start_time:h,serialized:t,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{query:a},execution_order:p,child_execution_order:p,run_type:"retriever",child_runs:[],extra:c?{metadata:c}:{},tags:o||[]};return this._addRunToRunMap(y)}async handleRetrieverStart(t,a,r,s,o,c,f){var h,y;const p=this.runMap.get(r)??this._createRunForRetrieverStart(t,a,r,s,o,c,f);return await((h=this.onRunCreate)==null?void 0:h.call(this,p)),await((y=this.onRetrieverStart)==null?void 0:y.call(this,p)),p}async handleRetrieverEnd(t,a){var s;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:t},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((s=this.onRetrieverEnd)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(t,a){var s;const r=this.runMap.get(a);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(t),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((s=this.onRetrieverError)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleText(t,a){var s;const r=this.runMap.get(a);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:t}}),await((s=this.onText)==null?void 0:s.call(this,r)))}async handleLLMNewToken(t,a,r,s,o,c){var p;const f=this.runMap.get(r);if(!f||(f==null?void 0:f.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return f.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:t,idx:a,chunk:c==null?void 0:c.chunk}}),await((p=this.onLLMNewToken)==null?void 0:p.call(this,f,t,{chunk:c==null?void 0:c.chunk})),f}}var $u={exports:{}};$u.exports;var t_;function JS(){return t_||(t_=1,function(u){const a=(o=0)=>c=>`\x1B[${38+o};5;${c}m`,r=(o=0)=>(c,f,p)=>`\x1B[${38+o};2;${c};${f};${p}m`;function s(){const o=new Map,c={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};c.color.gray=c.color.blackBright,c.bgColor.bgGray=c.bgColor.bgBlackBright,c.color.grey=c.color.blackBright,c.bgColor.bgGrey=c.bgColor.bgBlackBright;for(const[f,p]of Object.entries(c)){for(const[h,y]of Object.entries(p))c[h]={open:`\x1B[${y[0]}m`,close:`\x1B[${y[1]}m`},p[h]=c[h],o.set(y[0],y[1]);Object.defineProperty(c,f,{value:p,enumerable:!1})}return Object.defineProperty(c,"codes",{value:o,enumerable:!1}),c.color.close="\x1B[39m",c.bgColor.close="\x1B[49m",c.color.ansi256=a(),c.color.ansi16m=r(),c.bgColor.ansi256=a(10),c.bgColor.ansi16m=r(10),Object.defineProperties(c,{rgbToAnsi256:{value:(f,p,h)=>f===p&&p===h?f<8?16:f>248?231:Math.round((f-8)/247*24)+232:16+36*Math.round(f/255*5)+6*Math.round(p/255*5)+Math.round(h/255*5),enumerable:!1},hexToRgb:{value:f=>{const p=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(f.toString(16));if(!p)return[0,0,0];let{colorString:h}=p.groups;h.length===3&&(h=h.split("").map(_=>_+_).join(""));const y=Number.parseInt(h,16);return[y>>16&255,y>>8&255,y&255]},enumerable:!1},hexToAnsi256:{value:f=>c.rgbToAnsi256(...c.hexToRgb(f)),enumerable:!1}}),c}Object.defineProperty(u,"exports",{enumerable:!0,get:s})}($u)),$u.exports}var KS=JS();const D_=ss(KS);function _t(u,t){return`${u.open}${t}${u.close}`}function Wt(u,t){try{return JSON.stringify(u,null,2)}catch{return t}}function n_(u){return typeof u=="string"?u.trim():u==null?u:Wt(u,u.toString())}function ha(u){if(!u.end_time)return"";const t=u.end_time-u.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}const{color:Ct}=D_;class a_ extends os{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(t){return Promise.resolve()}getParents(t){const a=[];let r=t;for(;r.parent_run_id;){const s=this.runMap.get(r.parent_run_id);if(s)a.push(s),r=s;else break}return a}getBreadcrumbs(t){const r=[...this.getParents(t).reverse(),t].map((s,o,c)=>{const f=`${s.execution_order}:${s.run_type}:${s.name}`;return o===c.length-1?_t(D_.bold,f):f}).join(" > ");return _t(Ct.grey,r)}onChainStart(t){const a=this.getBreadcrumbs(t);console.log(`${_t(Ct.green,"[chain/start]")} [${a}] Entering Chain run with input: ${Wt(t.inputs,"[inputs]")}`)}onChainEnd(t){const a=this.getBreadcrumbs(t);console.log(`${_t(Ct.cyan,"[chain/end]")} [${a}] [${ha(t)}] Exiting Chain run with output: ${Wt(t.outputs,"[outputs]")}`)}onChainError(t){const a=this.getBreadcrumbs(t);console.log(`${_t(Ct.red,"[chain/error]")} [${a}] [${ha(t)}] Chain run errored with error: ${Wt(t.error,"[error]")}`)}onLLMStart(t){const a=this.getBreadcrumbs(t),r="prompts"in t.inputs?{prompts:t.inputs.prompts.map(s=>s.trim())}:t.inputs;console.log(`${_t(Ct.green,"[llm/start]")} [${a}] Entering LLM run with input: ${Wt(r,"[inputs]")}`)}onLLMEnd(t){const a=this.getBreadcrumbs(t);console.log(`${_t(Ct.cyan,"[llm/end]")} [${a}] [${ha(t)}] Exiting LLM run with output: ${Wt(t.outputs,"[response]")}`)}onLLMError(t){const a=this.getBreadcrumbs(t);console.log(`${_t(Ct.red,"[llm/error]")} [${a}] [${ha(t)}] LLM run errored with error: ${Wt(t.error,"[error]")}`)}onToolStart(t){const a=this.getBreadcrumbs(t);console.log(`${_t(Ct.green,"[tool/start]")} [${a}] Entering Tool run with input: "${n_(t.inputs.input)}"`)}onToolEnd(t){var r;const a=this.getBreadcrumbs(t);console.log(`${_t(Ct.cyan,"[tool/end]")} [${a}] [${ha(t)}] Exiting Tool run with output: "${n_((r=t.outputs)==null?void 0:r.output)}"`)}onToolError(t){const a=this.getBreadcrumbs(t);console.log(`${_t(Ct.red,"[tool/error]")} [${a}] [${ha(t)}] Tool run errored with error: ${Wt(t.error,"[error]")}`)}onRetrieverStart(t){const a=this.getBreadcrumbs(t);console.log(`${_t(Ct.green,"[retriever/start]")} [${a}] Entering Retriever run with input: ${Wt(t.inputs,"[inputs]")}`)}onRetrieverEnd(t){const a=this.getBreadcrumbs(t);console.log(`${_t(Ct.cyan,"[retriever/end]")} [${a}] [${ha(t)}] Exiting Retriever run with output: ${Wt(t.outputs,"[outputs]")}`)}onRetrieverError(t){const a=this.getBreadcrumbs(t);console.log(`${_t(Ct.red,"[retriever/error]")} [${a}] [${ha(t)}] Retriever run errored with error: ${Wt(t.error,"[error]")}`)}onAgentAction(t){const a=t,r=this.getBreadcrumbs(t);console.log(`${_t(Ct.blue,"[agent/action]")} [${r}] Agent selected action: ${Wt(a.actions[a.actions.length-1],"[action]")}`)}}function WS(u){return!!(u&&typeof u=="object"&&"type"in u&&u.type==="tool_call")}class eE extends Error{constructor(t,a){super(t),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=a}}function tE(u){if(typeof u>"u")return null;try{return JSON.parse(u)}catch{}let t="";const a=[];let r=!1,s=!1;for(let o of u){if(r)o==='"'&&!s?r=!1:o===`
`&&!s?o="\\n":o==="\\"?s=!s:s=!1;else if(o==='"')r=!0,s=!1;else if(o==="{")a.push("}");else if(o==="[")a.push("]");else if(o==="}"||o==="]")if(a&&a[a.length-1]===o)a.pop();else return null;t+=o}r&&(t+='"');for(let o=a.length-1;o>=0;o-=1)t+=a[o];try{return JSON.parse(t)}catch{return null}}function r_(u){return typeof u=="object"&&u!==null&&"type"in u&&typeof u.type=="string"&&"source_type"in u&&(u.source_type==="url"||u.source_type==="base64"||u.source_type==="text"||u.source_type==="id")}function nE(u,t){return typeof u=="string"?u===""?t:typeof t=="string"?u+t:Array.isArray(t)&&t.some(a=>r_(a))?[{type:"text",source_type:"text",text:u},...t]:[{type:"text",text:u},...t]:Array.isArray(t)?yf(u,t)??[...u,...t]:t===""?u:Array.isArray(u)&&u.some(a=>r_(a))?[...u,{type:"file",source_type:"text",text:t}]:[...u,{type:"text",text:t}]}function aE(u,t){function a(r,s){if(typeof r!="object"||r===null||r===void 0)return r;if(s>=t)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(c=>a(c,s+1));const o={};for(const c of Object.keys(r))o[c]=a(r[c],s+1);return o}return JSON.stringify(a(u,0),null,2)}class rE extends zr{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(t=>typeof t=="string"?t:t.type==="text"?t.text:"").join(""):""}getType(){return this._getType()}constructor(t,a){typeof t=="string"&&(t={content:t,additional_kwargs:a,response_metadata:{}}),t.additional_kwargs||(t.additional_kwargs={}),t.response_metadata||(t.response_metadata={}),super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=t.name,this.content=t.content,this.additional_kwargs=t.additional_kwargs,this.response_metadata=t.response_metadata,this.id=t.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(t){this.id=t,this.lc_kwargs.id=t}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](t){if(t===null)return this;const a=aE(this._printableFields,Math.max(4,t));return`${this.constructor.lc_name()} ${a}`}}function Vu(u,t){const a={...u};for(const[r,s]of Object.entries(t))if(a[r]==null)a[r]=s;else{if(s==null)continue;if(typeof a[r]!=typeof s||Array.isArray(a[r])!==Array.isArray(s))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof a[r]=="string"){if(r==="type")continue;a[r]+=s}else if(typeof a[r]=="object"&&!Array.isArray(a[r]))a[r]=Vu(a[r],s);else if(Array.isArray(a[r]))a[r]=yf(a[r],s);else{if(a[r]===s)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return a}function yf(u,t){if(!(u===void 0&&t===void 0)){if(u===void 0||t===void 0)return u||t;{const a=[...u];for(const r of t)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const s=a.findIndex(o=>o.index===r.index);s!==-1?a[s]=Vu(a[s],r):a.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;a.push(r)}return a}}}class iE extends rE{}class il extends iE{constructor(t){let a;if(typeof t=="string")a={content:t,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(t.tool_call_chunks===void 0)a={...t,tool_calls:t.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:t.usage_metadata!==void 0?t.usage_metadata:void 0};else{const r=[],s=[];for(const o of t.tool_call_chunks){let c={};try{if(c=tE(o.args||"{}"),c===null||typeof c!="object"||Array.isArray(c))throw new Error("Malformed tool call chunk args.");r.push({name:o.name??"",args:c,id:o.id,type:"tool_call"})}catch{s.push({name:o.name,args:o.args,id:o.id,error:"Malformed args.",type:"invalid_tool_call"})}}a={...t,tool_calls:r,invalid_tool_calls:s,usage_metadata:t.usage_metadata!==void 0?t.usage_metadata:void 0}}super(a),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=a.tool_call_chunks??this.tool_call_chunks,this.tool_calls=a.tool_calls??this.tool_calls,this.invalid_tool_calls=a.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=a.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(t){var r,s,o,c,f,p,h,y,_,b,w,S,T,R,k,q,N,Y,I,K,re,J,Me,Be,Qe,He,Et,W,V,C,U,G,Q,E,M,H,Z,ee,oe,ce;const a={content:nE(this.content,t.content),additional_kwargs:Vu(this.additional_kwargs,t.additional_kwargs),response_metadata:Vu(this.response_metadata,t.response_metadata),tool_call_chunks:[],id:this.id??t.id};if(this.tool_call_chunks!==void 0||t.tool_call_chunks!==void 0){const Fe=yf(this.tool_call_chunks,t.tool_call_chunks);Fe!==void 0&&Fe.length>0&&(a.tool_call_chunks=Fe)}if(this.usage_metadata!==void 0||t.usage_metadata!==void 0){const Fe={...(((s=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:s.audio)!==void 0||((c=(o=t.usage_metadata)==null?void 0:o.input_token_details)==null?void 0:c.audio)!==void 0)&&{audio:(((p=(f=this.usage_metadata)==null?void 0:f.input_token_details)==null?void 0:p.audio)??0)+(((y=(h=t.usage_metadata)==null?void 0:h.input_token_details)==null?void 0:y.audio)??0)},...(((b=(_=this.usage_metadata)==null?void 0:_.input_token_details)==null?void 0:b.cache_read)!==void 0||((S=(w=t.usage_metadata)==null?void 0:w.input_token_details)==null?void 0:S.cache_read)!==void 0)&&{cache_read:(((R=(T=this.usage_metadata)==null?void 0:T.input_token_details)==null?void 0:R.cache_read)??0)+(((q=(k=t.usage_metadata)==null?void 0:k.input_token_details)==null?void 0:q.cache_read)??0)},...(((Y=(N=this.usage_metadata)==null?void 0:N.input_token_details)==null?void 0:Y.cache_creation)!==void 0||((K=(I=t.usage_metadata)==null?void 0:I.input_token_details)==null?void 0:K.cache_creation)!==void 0)&&{cache_creation:(((J=(re=this.usage_metadata)==null?void 0:re.input_token_details)==null?void 0:J.cache_creation)??0)+(((Be=(Me=t.usage_metadata)==null?void 0:Me.input_token_details)==null?void 0:Be.cache_creation)??0)}},Ue={...(((He=(Qe=this.usage_metadata)==null?void 0:Qe.output_token_details)==null?void 0:He.audio)!==void 0||((W=(Et=t.usage_metadata)==null?void 0:Et.output_token_details)==null?void 0:W.audio)!==void 0)&&{audio:(((C=(V=this.usage_metadata)==null?void 0:V.output_token_details)==null?void 0:C.audio)??0)+(((G=(U=t.usage_metadata)==null?void 0:U.output_token_details)==null?void 0:G.audio)??0)},...(((E=(Q=this.usage_metadata)==null?void 0:Q.output_token_details)==null?void 0:E.reasoning)!==void 0||((H=(M=t.usage_metadata)==null?void 0:M.output_token_details)==null?void 0:H.reasoning)!==void 0)&&{reasoning:(((ee=(Z=this.usage_metadata)==null?void 0:Z.output_token_details)==null?void 0:ee.reasoning)??0)+(((ce=(oe=t.usage_metadata)==null?void 0:oe.output_token_details)==null?void 0:ce.reasoning)??0)}},Ht=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Sa=t.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},Za={input_tokens:Ht.input_tokens+Sa.input_tokens,output_tokens:Ht.output_tokens+Sa.output_tokens,total_tokens:Ht.total_tokens+Sa.total_tokens,...Object.keys(Fe).length>0&&{input_token_details:Fe},...Object.keys(Ue).length>0&&{output_token_details:Ue}};a.usage_metadata=Za}return new il(a)}}function sE(u,t="Human",a="AI"){const r=[];for(const s of u){let o;if(s._getType()==="human")o=t;else if(s._getType()==="ai")o=a;else if(s._getType()==="system")o="System";else if(s._getType()==="function")o="Function";else if(s._getType()==="tool")o="Tool";else if(s._getType()==="generic")o=s.role;else throw new Error(`Got unsupported message type: ${s._getType()}`);const c=s.name?`${s.name}, `:"",f=typeof s.content=="string"?s.content:JSON.stringify(s.content,null,2);r.push(`${o}: ${c}${f}`)}return r.join(`
`)}let Ud;const uE=()=>{if(Ud===void 0){const u=ga("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};Ud=new ns(u)}return Ud};class Fi extends os{constructor(t={}){super(t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:a,projectName:r,client:s}=t;this.projectName=r??ga("LANGCHAIN_PROJECT")??ga("LANGCHAIN_SESSION"),this.exampleId=a,this.client=s??uE();const o=Fi.getTraceableRunTree();o&&this.updateFromRunTree(o)}async _convertToCreate(t,a=void 0){return{...t,extra:{...t.extra,runtime:await VS()},child_runs:void 0,session_name:this.projectName,reference_example_id:t.parent_run_id?void 0:a}}async persistRun(t){}async onRunCreate(t){const a=await this._convertToCreate(t,this.exampleId);await this.client.createRun(a)}async onRunUpdate(t){const a={end_time:t.end_time,error:t.error,outputs:t.outputs,events:t.events,inputs:t.inputs,trace_id:t.trace_id,dotted_order:t.dotted_order,parent_run_id:t.parent_run_id,extra:t.extra,session_name:this.projectName};await this.client.updateRun(t.id,a)}getRun(t){return this.runMap.get(t)}updateFromRunTree(t){let a=t;const r=new Set;for(;a.parent_run&&!(r.has(a.id)||(r.add(a.id),!a.parent_run));)a=a.parent_run;r.clear();const s=[a];for(;s.length>0;){const o=s.shift();!o||r.has(o.id)||(r.add(o.id),this.runMap.set(o.id,o),o.child_runs&&s.push(...o.child_runs))}this.client=t.client??this.client,this.projectName=t.project_name??this.projectName,this.exampleId=t.reference_example_id??this.exampleId}convertToRunTree(t){const a={},r=[];for(const[s,o]of this.runMap){const c=new Pt({...o,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});a[s]=c,r.push([s,o.dotted_order])}r.sort((s,o)=>!s[1]||!o[1]?0:s[1].localeCompare(o[1]));for(const[s]of r){const o=this.runMap.get(s),c=a[s];if(!(!o||!c)&&o.parent_run_id){const f=a[o.parent_run_id];f&&(f.child_runs.push(c),c.parent_run=f)}}return a[t]}static getTraceableRunTree(){try{return AS(!0)}catch{return}}}const M_=Symbol.for("ls:tracing_async_local_storage"),Du=Symbol.for("lc:context_variables"),lE=u=>{globalThis[M_]=u},as=()=>globalThis[M_];let Ji;function oE(){const u="default"in In?In.default:In;return new u({autoStart:!0,concurrency:1})}function cE(){return typeof Ji>"u"&&(Ji=oE()),Ji}async function at(u,t){if(t===!0){const a=as();a!==void 0?await a.run(void 0,async()=>u()):await u()}else Ji=cE(),Ji.add(async()=>{const a=as();a!==void 0?await a.run(void 0,async()=>u()):await u()})}const dE=u=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(a=>ga(a)==="true");function U_(u){var r;const t=as();if(t===void 0)return;const a=t.getStore();return(r=a==null?void 0:a[Du])==null?void 0:r[u]}const fE=Symbol("lc:configure_hooks"),hE=()=>U_(fE)||[];class mE{setHandler(t){return this.setHandlers([t])}}class sl{constructor(t,a,r,s,o,c,f,p){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:f}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:p})}get parentRunId(){return this._parentRunId}async handleText(t){await Promise.all(this.handlers.map(a=>at(async()=>{var r;try{await((r=a.handleText)==null?void 0:r.call(a,t,this.runId,this._parentRunId,this.tags))}catch(s){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleText: ${s}`),a.raiseError)throw s}},a.awaitHandlers)))}async handleCustomEvent(t,a,r,s,o){await Promise.all(this.handlers.map(c=>at(async()=>{var f;try{await((f=c.handleCustomEvent)==null?void 0:f.call(c,t,a,this.runId,this.tags,this.metadata))}catch(p){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleCustomEvent: ${p}`),c.raiseError)throw p}},c.awaitHandlers)))}}class pE extends sl{getChild(t){const a=new ln(this.runId);return a.setHandlers(this.inheritableHandlers),a.addTags(this.inheritableTags),a.addMetadata(this.inheritableMetadata),t&&a.addTags([t],!1),a}async handleRetrieverEnd(t){await Promise.all(this.handlers.map(a=>at(async()=>{var r;if(!a.ignoreRetriever)try{await((r=a.handleRetrieverEnd)==null?void 0:r.call(a,t,this.runId,this._parentRunId,this.tags))}catch(s){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleRetriever`),a.raiseError)throw s}},a.awaitHandlers)))}async handleRetrieverError(t){await Promise.all(this.handlers.map(a=>at(async()=>{var r;if(!a.ignoreRetriever)try{await((r=a.handleRetrieverError)==null?void 0:r.call(a,t,this.runId,this._parentRunId,this.tags))}catch(s){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleRetrieverError: ${s}`),a.raiseError)throw t}},a.awaitHandlers)))}}class i_ extends sl{async handleLLMNewToken(t,a,r,s,o,c){await Promise.all(this.handlers.map(f=>at(async()=>{var p;if(!f.ignoreLLM)try{await((p=f.handleLLMNewToken)==null?void 0:p.call(f,t,a??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,c))}catch(h){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleLLMNewToken: ${h}`),f.raiseError)throw h}},f.awaitHandlers)))}async handleLLMError(t,a,r,s,o){await Promise.all(this.handlers.map(c=>at(async()=>{var f;if(!c.ignoreLLM)try{await((f=c.handleLLMError)==null?void 0:f.call(c,t,this.runId,this._parentRunId,this.tags,o))}catch(p){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleLLMError: ${p}`),c.raiseError)throw p}},c.awaitHandlers)))}async handleLLMEnd(t,a,r,s,o){await Promise.all(this.handlers.map(c=>at(async()=>{var f;if(!c.ignoreLLM)try{await((f=c.handleLLMEnd)==null?void 0:f.call(c,t,this.runId,this._parentRunId,this.tags,o))}catch(p){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleLLMEnd: ${p}`),c.raiseError)throw p}},c.awaitHandlers)))}}class yE extends sl{getChild(t){const a=new ln(this.runId);return a.setHandlers(this.inheritableHandlers),a.addTags(this.inheritableTags),a.addMetadata(this.inheritableMetadata),t&&a.addTags([t],!1),a}async handleChainError(t,a,r,s,o){await Promise.all(this.handlers.map(c=>at(async()=>{var f;if(!c.ignoreChain)try{await((f=c.handleChainError)==null?void 0:f.call(c,t,this.runId,this._parentRunId,this.tags,o))}catch(p){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleChainError: ${p}`),c.raiseError)throw p}},c.awaitHandlers)))}async handleChainEnd(t,a,r,s,o){await Promise.all(this.handlers.map(c=>at(async()=>{var f;if(!c.ignoreChain)try{await((f=c.handleChainEnd)==null?void 0:f.call(c,t,this.runId,this._parentRunId,this.tags,o))}catch(p){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleChainEnd: ${p}`),c.raiseError)throw p}},c.awaitHandlers)))}async handleAgentAction(t){await Promise.all(this.handlers.map(a=>at(async()=>{var r;if(!a.ignoreAgent)try{await((r=a.handleAgentAction)==null?void 0:r.call(a,t,this.runId,this._parentRunId,this.tags))}catch(s){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleAgentAction: ${s}`),a.raiseError)throw s}},a.awaitHandlers)))}async handleAgentEnd(t){await Promise.all(this.handlers.map(a=>at(async()=>{var r;if(!a.ignoreAgent)try{await((r=a.handleAgentEnd)==null?void 0:r.call(a,t,this.runId,this._parentRunId,this.tags))}catch(s){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleAgentEnd: ${s}`),a.raiseError)throw s}},a.awaitHandlers)))}}class gE extends sl{getChild(t){const a=new ln(this.runId);return a.setHandlers(this.inheritableHandlers),a.addTags(this.inheritableTags),a.addMetadata(this.inheritableMetadata),t&&a.addTags([t],!1),a}async handleToolError(t){await Promise.all(this.handlers.map(a=>at(async()=>{var r;if(!a.ignoreAgent)try{await((r=a.handleToolError)==null?void 0:r.call(a,t,this.runId,this._parentRunId,this.tags))}catch(s){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleToolError: ${s}`),a.raiseError)throw s}},a.awaitHandlers)))}async handleToolEnd(t){await Promise.all(this.handlers.map(a=>at(async()=>{var r;if(!a.ignoreAgent)try{await((r=a.handleToolEnd)==null?void 0:r.call(a,t,this.runId,this._parentRunId,this.tags))}catch(s){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleToolEnd: ${s}`),a.raiseError)throw s}},a.awaitHandlers)))}}class ln extends mE{constructor(t,a){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(a==null?void 0:a.handlers)??this.handlers,this.inheritableHandlers=(a==null?void 0:a.inheritableHandlers)??this.inheritableHandlers,this.tags=(a==null?void 0:a.tags)??this.tags,this.inheritableTags=(a==null?void 0:a.inheritableTags)??this.inheritableTags,this.metadata=(a==null?void 0:a.metadata)??this.metadata,this.inheritableMetadata=(a==null?void 0:a.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=t}getParentRunId(){return this._parentRunId}async handleLLMStart(t,a,r=void 0,s=void 0,o=void 0,c=void 0,f=void 0,p=void 0){return Promise.all(a.map(async(h,y)=>{const _=y===0&&r?r:vt();return await Promise.all(this.handlers.map(b=>{if(!b.ignoreLLM)return Gi(b)&&b._createRunForLLMStart(t,[h],_,this._parentRunId,o,this.tags,this.metadata,p),at(async()=>{var w;try{await((w=b.handleLLMStart)==null?void 0:w.call(b,t,[h],_,this._parentRunId,o,this.tags,this.metadata,p))}catch(S){if((b.raiseError?console.error:console.warn)(`Error in handler ${b.constructor.name}, handleLLMStart: ${S}`),b.raiseError)throw S}},b.awaitHandlers)})),new i_(_,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(t,a,r=void 0,s=void 0,o=void 0,c=void 0,f=void 0,p=void 0){return Promise.all(a.map(async(h,y)=>{const _=y===0&&r?r:vt();return await Promise.all(this.handlers.map(b=>{if(!b.ignoreLLM)return Gi(b)&&b._createRunForChatModelStart(t,[h],_,this._parentRunId,o,this.tags,this.metadata,p),at(async()=>{var w,S;try{if(b.handleChatModelStart)await((w=b.handleChatModelStart)==null?void 0:w.call(b,t,[h],_,this._parentRunId,o,this.tags,this.metadata,p));else if(b.handleLLMStart){const T=sE(h);await((S=b.handleLLMStart)==null?void 0:S.call(b,t,[T],_,this._parentRunId,o,this.tags,this.metadata,p))}}catch(T){if((b.raiseError?console.error:console.warn)(`Error in handler ${b.constructor.name}, handleLLMStart: ${T}`),b.raiseError)throw T}},b.awaitHandlers)})),new i_(_,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(t,a,r=vt(),s=void 0,o=void 0,c=void 0,f=void 0){return await Promise.all(this.handlers.map(p=>{if(!p.ignoreChain)return Gi(p)&&p._createRunForChainStart(t,a,r,this._parentRunId,this.tags,this.metadata,s,f),at(async()=>{var h;try{await((h=p.handleChainStart)==null?void 0:h.call(p,t,a,r,this._parentRunId,this.tags,this.metadata,s,f))}catch(y){if((p.raiseError?console.error:console.warn)(`Error in handler ${p.constructor.name}, handleChainStart: ${y}`),p.raiseError)throw y}},p.awaitHandlers)})),new yE(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(t,a,r=vt(),s=void 0,o=void 0,c=void 0,f=void 0){return await Promise.all(this.handlers.map(p=>{if(!p.ignoreAgent)return Gi(p)&&p._createRunForToolStart(t,a,r,this._parentRunId,this.tags,this.metadata,f),at(async()=>{var h;try{await((h=p.handleToolStart)==null?void 0:h.call(p,t,a,r,this._parentRunId,this.tags,this.metadata,f))}catch(y){if((p.raiseError?console.error:console.warn)(`Error in handler ${p.constructor.name}, handleToolStart: ${y}`),p.raiseError)throw y}},p.awaitHandlers)})),new gE(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(t,a,r=vt(),s=void 0,o=void 0,c=void 0,f=void 0){return await Promise.all(this.handlers.map(p=>{if(!p.ignoreRetriever)return Gi(p)&&p._createRunForRetrieverStart(t,a,r,this._parentRunId,this.tags,this.metadata,f),at(async()=>{var h;try{await((h=p.handleRetrieverStart)==null?void 0:h.call(p,t,a,r,this._parentRunId,this.tags,this.metadata,f))}catch(y){if((p.raiseError?console.error:console.warn)(`Error in handler ${p.constructor.name}, handleRetrieverStart: ${y}`),p.raiseError)throw y}},p.awaitHandlers)})),new pE(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(t,a,r,s,o){await Promise.all(this.handlers.map(c=>at(async()=>{var f;if(!c.ignoreCustomEvent)try{await((f=c.handleCustomEvent)==null?void 0:f.call(c,t,a,r,this.tags,this.metadata))}catch(p){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleCustomEvent: ${p}`),c.raiseError)throw p}},c.awaitHandlers)))}addHandler(t,a=!0){this.handlers.push(t),a&&this.inheritableHandlers.push(t)}removeHandler(t){this.handlers=this.handlers.filter(a=>a!==t),this.inheritableHandlers=this.inheritableHandlers.filter(a=>a!==t)}setHandlers(t,a=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of t)this.addHandler(r,a)}addTags(t,a=!0){this.removeTags(t),this.tags.push(...t),a&&this.inheritableTags.push(...t)}removeTags(t){this.tags=this.tags.filter(a=>!t.includes(a)),this.inheritableTags=this.inheritableTags.filter(a=>!t.includes(a))}addMetadata(t,a=!0){this.metadata={...this.metadata,...t},a&&(this.inheritableMetadata={...this.inheritableMetadata,...t})}removeMetadata(t){for(const a of Object.keys(t))delete this.metadata[a],delete this.inheritableMetadata[a]}copy(t=[],a=!0){const r=new ln(this._parentRunId);for(const s of this.handlers){const o=this.inheritableHandlers.includes(s);r.addHandler(s,o)}for(const s of this.tags){const o=this.inheritableTags.includes(s);r.addTags([s],o)}for(const s of Object.keys(this.metadata)){const o=Object.keys(this.inheritableMetadata).includes(s);r.addMetadata({[s]:this.metadata[s]},o)}for(const s of t)r.handlers.filter(o=>o.name==="console_callback_handler").some(o=>o.name===s.name)||r.addHandler(s,a);return r}static fromHandlers(t){class a extends ls{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:vt()}),Object.assign(this,t)}}const r=new this;return r.addHandler(new a),r}static configure(t,a,r,s,o,c,f){return this._configureSync(t,a,r,s,o,c,f)}static _configureSync(t,a,r,s,o,c,f){var b,w;let p;(t||a)&&(Array.isArray(t)||!t?(p=new ln,p.setHandlers((t==null?void 0:t.map(Yu))??[],!0)):p=t,p=p.copy(Array.isArray(a)?a.map(Yu):a==null?void 0:a.handlers,!1));const h=ga("LANGCHAIN_VERBOSE")==="true"||(f==null?void 0:f.verbose),y=((b=Fi.getTraceableRunTree())==null?void 0:b.tracingEnabled)||dE(),_=y||(ga("LANGCHAIN_TRACING")??!1);if(h||_){if(p||(p=new ln),h&&!p.handlers.some(S=>S.name===a_.prototype.name)){const S=new a_;p.addHandler(S,!0)}if(_&&!p.handlers.some(S=>S.name==="langchain_tracer")&&y){const S=new Fi;p.addHandler(S,!0),p._parentRunId=((w=Fi.getTraceableRunTree())==null?void 0:w.id)??p._parentRunId}}for(const{contextVar:S,inheritable:T=!0,handlerClass:R,envVar:k}of hE()){const q=k&&ga(k)==="true"&&R;let N;const Y=S!==void 0?U_(S):void 0;Y&&XS(Y)?N=Y:q&&(N=new R({})),N!==void 0&&(p||(p=new ln),p.handlers.some(I=>I.name===N.name)||p.addHandler(N,T))}return(r||s)&&p&&(p.addTags(r??[]),p.addTags(s??[],!1)),(o||c)&&p&&(p.addMetadata(o??{}),p.addMetadata(c??{},!1)),p}}function Yu(u){return"name"in u?u:ls.fromMethods(u)}class _E{getStore(){}run(t,a){return a()}enterWith(t){}}const bE=new _E,s_=Symbol.for("lc:child_config");class vE{getInstance(){return as()??bE}getRunnableConfig(){var a,r;return(r=(a=this.getInstance().getStore())==null?void 0:a.extra)==null?void 0:r[s_]}runWithConfig(t,a,r){var y;const s=ln._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata),o=this.getInstance(),c=o.getStore(),f=s==null?void 0:s.getParentRunId(),p=(y=s==null?void 0:s.handlers)==null?void 0:y.find(_=>(_==null?void 0:_.name)==="langchain_tracer");let h;return p&&f?h=p.convertToRunTree(f):r||(h=new Pt({name:"<runnable_lambda>",tracingEnabled:!1})),h&&(h.extra={...h.extra,[s_]:t}),c!==void 0&&c[Du]!==void 0&&(h===void 0&&(h={}),h[Du]=c[Du]),o.run(h,a)}initializeGlobalInstance(t){as()===void 0&&lE(t)}}const va=new vE,Id=25;async function on(u){return ln._configureSync(u==null?void 0:u.callbacks,void 0,u==null?void 0:u.tags,void 0,u==null?void 0:u.metadata)}function u_(...u){const t={};for(const a of u.filter(r=>!!r))for(const r of Object.keys(a))if(r==="metadata")t[r]={...t[r],...a[r]};else if(r==="tags"){const s=t[r]??[];t[r]=[...new Set(s.concat(a[r]??[]))]}else if(r==="configurable")t[r]={...t[r],...a[r]};else if(r==="timeout")t.timeout===void 0?t.timeout=a.timeout:a.timeout!==void 0&&(t.timeout=Math.min(t.timeout,a.timeout));else if(r==="signal")t.signal===void 0?t.signal=a.signal:a.signal!==void 0&&("any"in AbortSignal?t.signal=AbortSignal.any([t.signal,a.signal]):t.signal=a.signal);else if(r==="callbacks"){const s=t.callbacks,o=a.callbacks;if(Array.isArray(o))if(!s)t.callbacks=o;else if(Array.isArray(s))t.callbacks=s.concat(o);else{const c=s.copy();for(const f of o)c.addHandler(Yu(f),!0);t.callbacks=c}else if(o)if(!s)t.callbacks=o;else if(Array.isArray(s)){const c=o.copy();for(const f of s)c.addHandler(Yu(f),!0);t.callbacks=c}else t.callbacks=new ln(o._parentRunId,{handlers:s.handlers.concat(o.handlers),inheritableHandlers:s.inheritableHandlers.concat(o.inheritableHandlers),tags:Array.from(new Set(s.tags.concat(o.tags))),inheritableTags:Array.from(new Set(s.inheritableTags.concat(o.inheritableTags))),metadata:{...s.metadata,...o.metadata}})}else{const s=r;t[s]=a[s]??t[s]}return t}const wE=new Set(["string","number","boolean"]);function De(u){var r;const t=va.getRunnableConfig();let a={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(t){const{runId:s,runName:o,...c}=t;a=Object.entries(c).reduce((f,[p,h])=>(h!==void 0&&(f[p]=h),f),a)}if(u&&(a=Object.entries(u).reduce((s,[o,c])=>(c!==void 0&&(s[o]=c),s),a)),a!=null&&a.configurable)for(const s of Object.keys(a.configurable))wE.has(typeof a.configurable[s])&&!((r=a.metadata)!=null&&r[s])&&(a.metadata||(a.metadata={}),a.metadata[s]=a.configurable[s]);if(a.timeout!==void 0){if(a.timeout<=0)throw new Error("Timeout must be a positive number");const s=AbortSignal.timeout(a.timeout);a.signal!==void 0?"any"in AbortSignal&&(a.signal=AbortSignal.any([a.signal,s])):a.signal=s,delete a.timeout}return a}function yt(u={},{callbacks:t,maxConcurrency:a,recursionLimit:r,runName:s,configurable:o,runId:c}={}){const f=De(u);return t!==void 0&&(delete f.runName,f.callbacks=t),r!==void 0&&(f.recursionLimit=r),a!==void 0&&(f.maxConcurrency=a),s!==void 0&&(f.runName=s),o!==void 0&&(f.configurable={...f.configurable,...o}),c!==void 0&&delete f.runId,f}function Pr(u){return u?{configurable:u.configurable,recursionLimit:u.recursionLimit,callbacks:u.callbacks,tags:u.tags,metadata:u.metadata,maxConcurrency:u.maxConcurrency,timeout:u.timeout,signal:u.signal}:void 0}async function wa(u,t){if(t===void 0)return u;let a;return Promise.race([u.catch(r=>{if(!(t!=null&&t.aborted))throw r}),new Promise((r,s)=>{a=()=>{s(new Error("Aborted"))},t.addEventListener("abort",a),t.aborted&&s(new Error("Aborted"))})]).finally(()=>t.removeEventListener("abort",a))}class Bt extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const t=await this.reader.read();return t.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:t.value}}catch(t){throw this.reader.releaseLock(),t}}async return(){if(this.ensureReader(),this.locked){const t=this.reader.cancel();this.reader.releaseLock(),await t}return{done:!0,value:void 0}}async throw(t){if(this.ensureReader(),this.locked){const a=this.reader.cancel();this.reader.releaseLock(),await a}throw t}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(t){const a=t.getReader();return new Bt({start(r){return s();function s(){return a.read().then(({done:o,value:c})=>{if(o){r.close();return}return r.enqueue(c),s()})}},cancel(){a.releaseLock()}})}static fromAsyncGenerator(t){return new Bt({async pull(a){const{value:r,done:s}=await t.next();s&&a.close(),a.enqueue(r)},async cancel(a){await t.return(a)}})}}function I_(u,t=2){const a=Array.from({length:t},()=>[]);return a.map(async function*(s){for(;;)if(s.length===0){const o=await u.next();for(const c of a)c.push(o)}else{if(s[0].done)return;yield s.shift().value}})}function zn(u,t){if(Array.isArray(u)&&Array.isArray(t))return u.concat(t);if(typeof u=="string"&&typeof t=="string")return u+t;if(typeof u=="number"&&typeof t=="number")return u+t;if("concat"in u&&typeof u.concat=="function")return u.concat(t);if(typeof u=="object"&&typeof t=="object"){const a={...u};for(const[r,s]of Object.entries(t))r in a&&!Array.isArray(a[r])?a[r]=zn(a[r],s):a[r]=s;return a}else throw new Error(`Cannot concat ${typeof u} and ${typeof t}`)}class Br{constructor(t){var a;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=t.generator,this.config=t.config,this.signal=t.signal??((a=this.config)==null?void 0:a.signal),this.setup=new Promise((r,s)=>{va.runWithConfig(Pr(t.config),async()=>{this.firstResult=t.generator.next(),t.startSetup?this.firstResult.then(t.startSetup).then(r,s):this.firstResult.then(o=>r(void 0),s)},!0)})}async next(...t){var a;return(a=this.signal)==null||a.throwIfAborted(),this.firstResultUsed?va.runWithConfig(Pr(this.config),this.signal?async()=>wa(this.generator.next(...t),this.signal):async()=>this.generator.next(...t),!0):(this.firstResultUsed=!0,this.firstResult)}async return(t){return this.generator.return(t)}async throw(t){return this.generator.throw(t)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function SE(u,t,a,r,...s){const o=new Br({generator:t,startSetup:a,signal:r}),c=await o.setup;return{output:u(o,c,...s),setup:c}}class pa{constructor(t){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=t.ops??[]}concat(t){const a=this.ops.concat(t.ops),r=Gu({},a);return new rs({ops:a,state:r[r.length-1].newDocument})}}class rs extends pa{constructor(t){super(t),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=t.state}concat(t){const a=this.ops.concat(t.ops),r=Gu(this.state,t.ops);return new rs({ops:a,state:r[r.length-1].newDocument})}static fromRunLogPatch(t){const a=Gu({},t.ops);return new rs({ops:t.ops,state:a[a.length-1].newDocument})}}const EE=u=>u.name==="log_stream_tracer";async function l_(u,t){if(t==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:a}=u;if(["retriever","llm","prompt"].includes(u.run_type))return a;if(!(Object.keys(a).length===1&&(a==null?void 0:a.input)===""))return a.input}async function o_(u,t){const{outputs:a}=u;return t==="original"||["retriever","llm","prompt"].includes(u.run_type)?a:a!==void 0&&Object.keys(a).length===1&&(a==null?void 0:a.output)!==void 0?a.output:a}function TE(u){return u!==void 0&&u.message!==void 0}class c_ extends os{constructor(t){super({_awaitHandler:!0,...t}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(t==null?void 0:t.autoClose)??!0,this.includeNames=t==null?void 0:t.includeNames,this.includeTypes=t==null?void 0:t.includeTypes,this.includeTags=t==null?void 0:t.includeTags,this.excludeNames=t==null?void 0:t.excludeNames,this.excludeTypes=t==null?void 0:t.excludeTypes,this.excludeTags=t==null?void 0:t.excludeTags,this._schemaFormat=(t==null?void 0:t._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Bt.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(t){}_includeRun(t){if(t.id===this.rootId)return!1;const a=t.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(t.run_type)),this.includeTags!==void 0&&(r=r||a.find(s=>{var o;return(o=this.includeTags)==null?void 0:o.includes(s)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(t.run_type)),this.excludeTags!==void 0&&(r=r&&a.every(s=>{var o;return!((o=this.excludeTags)!=null&&o.includes(s))})),r}async*tapOutputIterable(t,a){for await(const r of a){if(t!==this.rootId){const s=this.keyMapByRunId[t];s&&await this.writer.write(new pa({ops:[{op:"add",path:`/logs/${s}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(t){var s;if(this.rootId===void 0&&(this.rootId=t.id,await this.writer.write(new pa({ops:[{op:"replace",path:"",value:{id:t.id,name:t.name,type:t.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(t))return;this.counterMapByRunName[t.name]===void 0&&(this.counterMapByRunName[t.name]=0),this.counterMapByRunName[t.name]+=1;const a=this.counterMapByRunName[t.name];this.keyMapByRunId[t.id]=a===1?t.name:`${t.name}:${a}`;const r={id:t.id,name:t.name,type:t.run_type,tags:t.tags??[],metadata:((s=t.extra)==null?void 0:s.metadata)??{},start_time:new Date(t.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await l_(t,this._schemaFormat)),await this.writer.write(new pa({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[t.id]}`,value:r}]}))}async onRunUpdate(t){try{const a=this.keyMapByRunId[t.id];if(a===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${a}/inputs`,value:await l_(t,this._schemaFormat)}),r.push({op:"add",path:`/logs/${a}/final_output`,value:await o_(t,this._schemaFormat)}),t.end_time!==void 0&&r.push({op:"add",path:`/logs/${a}/end_time`,value:new Date(t.end_time).toISOString()});const s=new pa({ops:r});await this.writer.write(s)}finally{if(t.id===this.rootId){const a=new pa({ops:[{op:"replace",path:"/final_output",value:await o_(t,this._schemaFormat)}]});await this.writer.write(a),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(t,a,r){const s=this.keyMapByRunId[t.id];if(s===void 0)return;const o=t.inputs.messages!==void 0;let c;o?TE(r==null?void 0:r.chunk)?c=r==null?void 0:r.chunk:c=new il({id:`run-${t.id}`,content:a}):c=a;const f=new pa({ops:[{op:"add",path:`/logs/${s}/streamed_output_str/-`,value:a},{op:"add",path:`/logs/${s}/streamed_output/-`,value:c}]});await this.writer.write(f)}}class Xu{constructor(t){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=t.text,this.generationInfo=t.generationInfo}concat(t){return new Xu({text:this.text+t.text,generationInfo:{...this.generationInfo,...t.generationInfo}})}}function Lu({name:u,serialized:t}){return u!==void 0?u:(t==null?void 0:t.name)!==void 0?t.name:(t==null?void 0:t.id)!==void 0&&Array.isArray(t==null?void 0:t.id)?t.id[t.id.length-1]:"Unnamed"}const OE=u=>u.name==="event_stream_tracer";class AE extends os{constructor(t){super({_awaitHandler:!0,...t}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(t==null?void 0:t.autoClose)??!0,this.includeNames=t==null?void 0:t.includeNames,this.includeTypes=t==null?void 0:t.includeTypes,this.includeTags=t==null?void 0:t.includeTags,this.excludeNames=t==null?void 0:t.excludeNames,this.excludeTypes=t==null?void 0:t.excludeTypes,this.excludeTags=t==null?void 0:t.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Bt.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(t){}_includeRun(t){const a=t.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(t.runType)),this.includeTags!==void 0&&(r=r||a.find(s=>{var o;return(o=this.includeTags)==null?void 0:o.includes(s)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(t.runType)),this.excludeTags!==void 0&&(r=r&&a.every(s=>{var o;return!((o=this.excludeTags)!=null&&o.includes(s))})),r}async*tapOutputIterable(t,a){const r=await a.next();if(r.done)return;const s=this.runInfoMap.get(t);if(s===void 0){yield r.value;return}function o(f,p){return f==="llm"&&typeof p=="string"?new Xu({text:p}):p}let c=this.tappedPromises.get(t);if(c===void 0){let f;c=new Promise(p=>{f=p}),this.tappedPromises.set(t,c);try{const p={event:`on_${s.runType}_stream`,run_id:t,name:s.name,tags:s.tags,metadata:s.metadata,data:{}};await this.send({...p,data:{chunk:o(s.runType,r.value)}},s),yield r.value;for await(const h of a)s.runType!=="tool"&&s.runType!=="retriever"&&await this.send({...p,data:{chunk:o(s.runType,h)}},s),yield h}finally{f()}}else{yield r.value;for await(const f of a)yield f}}async send(t,a){this._includeRun(a)&&await this.writer.write(t)}async sendEndEvent(t,a){const r=this.tappedPromises.get(t.run_id);r!==void 0?r.then(()=>{this.send(t,a)}):await this.send(t,a)}async onLLMStart(t){var c,f;const a=Lu(t),r=t.inputs.messages!==void 0?"chat_model":"llm",s={tags:t.tags??[],metadata:((c=t.extra)==null?void 0:c.metadata)??{},name:a,runType:r,inputs:t.inputs};this.runInfoMap.set(t.id,s);const o=`on_${r}_start`;await this.send({event:o,data:{input:t.inputs},name:a,tags:t.tags??[],run_id:t.id,metadata:((f=t.extra)==null?void 0:f.metadata)??{}},s)}async onLLMNewToken(t,a,r){const s=this.runInfoMap.get(t.id);let o,c;if(s===void 0)throw new Error(`onLLMNewToken: Run ID ${t.id} not found in run map.`);if(this.runInfoMap.size!==1){if(s.runType==="chat_model")c="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?o=new il({content:a,id:`run-${t.id}`}):o=r.chunk.message;else if(s.runType==="llm")c="on_llm_stream",(r==null?void 0:r.chunk)===void 0?o=new Xu({text:a}):o=r.chunk;else throw new Error(`Unexpected run type ${s.runType}`);await this.send({event:c,data:{chunk:o},run_id:t.id,name:s.name,tags:s.tags,metadata:s.metadata},s)}}async onLLMEnd(t){var c,f,p;const a=this.runInfoMap.get(t.id);this.runInfoMap.delete(t.id);let r;if(a===void 0)throw new Error(`onLLMEnd: Run ID ${t.id} not found in run map.`);const s=(c=t.outputs)==null?void 0:c.generations;let o;if(a.runType==="chat_model"){for(const h of s??[]){if(o!==void 0)break;o=(f=h[0])==null?void 0:f.message}r="on_chat_model_end"}else if(a.runType==="llm")o={generations:s==null?void 0:s.map(h=>h.map(y=>({text:y.text,generationInfo:y.generationInfo}))),llmOutput:((p=t.outputs)==null?void 0:p.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${a.runType}`);await this.sendEndEvent({event:r,data:{output:o,input:a.inputs},run_id:t.id,name:a.name,tags:a.tags,metadata:a.metadata},a)}async onChainStart(t){var c,f;const a=Lu(t),r=t.run_type??"chain",s={tags:t.tags??[],metadata:((c=t.extra)==null?void 0:c.metadata)??{},name:a,runType:t.run_type};let o={};t.inputs.input===""&&Object.keys(t.inputs).length===1?(o={},s.inputs={}):t.inputs.input!==void 0?(o.input=t.inputs.input,s.inputs=t.inputs.input):(o.input=t.inputs,s.inputs=t.inputs),this.runInfoMap.set(t.id,s),await this.send({event:`on_${r}_start`,data:o,name:a,tags:t.tags??[],run_id:t.id,metadata:((f=t.extra)==null?void 0:f.metadata)??{}},s)}async onChainEnd(t){var f;const a=this.runInfoMap.get(t.id);if(this.runInfoMap.delete(t.id),a===void 0)throw new Error(`onChainEnd: Run ID ${t.id} not found in run map.`);const r=`on_${t.run_type}_end`,s=t.inputs??a.inputs??{},c={output:((f=t.outputs)==null?void 0:f.output)??t.outputs,input:s};s.input&&Object.keys(s).length===1&&(c.input=s.input,a.inputs=s.input),await this.sendEndEvent({event:r,data:c,run_id:t.id,name:a.name,tags:a.tags,metadata:a.metadata??{}},a)}async onToolStart(t){var s,o;const a=Lu(t),r={tags:t.tags??[],metadata:((s=t.extra)==null?void 0:s.metadata)??{},name:a,runType:"tool",inputs:t.inputs??{}};this.runInfoMap.set(t.id,r),await this.send({event:"on_tool_start",data:{input:t.inputs??{}},name:a,run_id:t.id,tags:t.tags??[],metadata:((o=t.extra)==null?void 0:o.metadata)??{}},r)}async onToolEnd(t){var s;const a=this.runInfoMap.get(t.id);if(this.runInfoMap.delete(t.id),a===void 0)throw new Error(`onToolEnd: Run ID ${t.id} not found in run map.`);if(a.inputs===void 0)throw new Error(`onToolEnd: Run ID ${t.id} is a tool call, and is expected to have traced inputs.`);const r=((s=t.outputs)==null?void 0:s.output)===void 0?t.outputs:t.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:a.inputs},run_id:t.id,name:a.name,tags:a.tags,metadata:a.metadata},a)}async onRetrieverStart(t){var o,c;const a=Lu(t),s={tags:t.tags??[],metadata:((o=t.extra)==null?void 0:o.metadata)??{},name:a,runType:"retriever",inputs:{query:t.inputs.query}};this.runInfoMap.set(t.id,s),await this.send({event:"on_retriever_start",data:{input:{query:t.inputs.query}},name:a,tags:t.tags??[],run_id:t.id,metadata:((c=t.extra)==null?void 0:c.metadata)??{}},s)}async onRetrieverEnd(t){var r;const a=this.runInfoMap.get(t.id);if(this.runInfoMap.delete(t.id),a===void 0)throw new Error(`onRetrieverEnd: Run ID ${t.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=t.outputs)==null?void 0:r.documents)??t.outputs,input:a.inputs},run_id:t.id,name:a.name,tags:a.tags,metadata:a.metadata},a)}async handleCustomEvent(t,a,r){const s=this.runInfoMap.get(r);if(s===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:t,tags:s.tags,metadata:s.metadata,data:a},s)}async finish(){const t=[...this.tappedPromises.values()];Promise.all(t).finally(()=>{this.writer.close()})}}const RE=[400,401,402,403,404,405,406,407,409],xE=u=>{var a,r;if(u.message.startsWith("Cancel")||u.message.startsWith("AbortError")||u.name==="AbortError"||(u==null?void 0:u.code)==="ECONNABORTED")throw u;const t=((a=u==null?void 0:u.response)==null?void 0:a.status)??(u==null?void 0:u.status);if(t&&RE.includes(+t))throw u;if(((r=u==null?void 0:u.error)==null?void 0:r.code)==="insufficient_quota"){const s=new Error(u==null?void 0:u.message);throw s.name="InsufficientQuotaError",s}};class CE{constructor(t){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,this.onFailedAttempt=t.onFailedAttempt??xE;const a="default"in In?In.default:In;this.queue=new a({concurrency:this.maxConcurrency})}call(t,...a){return this.queue.add(()=>qu(()=>t(...a).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(t,a,...r){return t.signal?Promise.race([this.call(a,...r),new Promise((s,o)=>{var c;(c=t.signal)==null||c.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(a,...r)}fetch(...t){return this.call(()=>fetch(...t).then(a=>a.ok?a:Promise.reject(a)))}}class z_ extends os{constructor({config:t,onStart:a,onEnd:r,onError:s}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=t,this.argOnStart=a,this.argOnEnd=r,this.argOnError=s}persistRun(t){return Promise.resolve()}async onRunCreate(t){this.rootId||(this.rootId=t.id,this.argOnStart&&await this.argOnStart(t,this.config))}async onRunUpdate(t){t.id===this.rootId&&(t.error?this.argOnError&&await this.argOnError(t,this.config):this.argOnEnd&&await this.argOnEnd(t,this.config))}}function gf(u){return u?u.lc_runnable:!1}class NE{constructor(t){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=t.includeNames,this.includeTypes=t.includeTypes,this.includeTags=t.includeTags,this.excludeNames=t.excludeNames,this.excludeTypes=t.excludeTypes,this.excludeTags=t.excludeTags}includeEvent(t,a){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const s=t.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(a)),this.includeTags!==void 0&&(r=r||s.some(o=>{var c;return(c=this.includeTags)==null?void 0:c.includes(o)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(a)),this.excludeTags!==void 0&&(r=r&&s.every(o=>{var c;return!((c=this.excludeTags)!=null&&c.includes(o))})),r}}const jE=Symbol("Let zodToJsonSchema decide on which parser to use"),LE={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},kE=u=>({...LE,...u}),$E=u=>{const t=kE(u),a=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:a,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function P_(u,t,a,r){r!=null&&r.errorMessages&&a&&(u.errorMessage={...u.errorMessage,[t]:a})}function je(u,t,a,r,s){u[t]=a,P_(u,t,r,s)}function DE(){return{}}function ME(u,t){var r,s,o;const a={type:"array"};return(r=u.type)!=null&&r._def&&((o=(s=u.type)==null?void 0:s._def)==null?void 0:o.typeName)!==F.ZodAny&&(a.items=xe(u.type._def,{...t,currentPath:[...t.currentPath,"items"]})),u.minLength&&je(a,"minItems",u.minLength.value,u.minLength.message,t),u.maxLength&&je(a,"maxItems",u.maxLength.value,u.maxLength.message,t),u.exactLength&&(je(a,"minItems",u.exactLength.value,u.exactLength.message,t),je(a,"maxItems",u.exactLength.value,u.exactLength.message,t)),a}function UE(u,t){const a={type:"integer",format:"int64"};if(!u.checks)return a;for(const r of u.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?je(a,"minimum",r.value,r.message,t):je(a,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(a.exclusiveMinimum=!0),je(a,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?je(a,"maximum",r.value,r.message,t):je(a,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(a.exclusiveMaximum=!0),je(a,"maximum",r.value,r.message,t));break;case"multipleOf":je(a,"multipleOf",r.value,r.message,t);break}return a}function IE(){return{type:"boolean"}}function q_(u,t){return xe(u.type._def,t)}const zE=(u,t)=>xe(u.innerType._def,t);function B_(u,t,a){const r=a??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,o)=>B_(u,t,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return PE(u,t)}}const PE=(u,t)=>{const a={type:"integer",format:"unix-time"};if(t.target==="openApi3")return a;for(const r of u.checks)switch(r.kind){case"min":je(a,"minimum",r.value,r.message,t);break;case"max":je(a,"maximum",r.value,r.message,t);break}return a};function qE(u,t){return{...xe(u.innerType._def,t),default:u.defaultValue()}}function BE(u,t){return t.effectStrategy==="input"?xe(u.schema._def,t):{}}function HE(u){return{type:"string",enum:Array.from(u.values)}}const GE=u=>"type"in u&&u.type==="string"?!1:"allOf"in u;function ZE(u,t){const a=[xe(u.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),xe(u.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(o=>!!o);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return a.forEach(o=>{if(GE(o))s.push(...o.allOf),o.unevaluatedProperties===void 0&&(r=void 0);else{let c=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:f,...p}=o;c=p}else r=void 0;s.push(c)}}),s.length?{allOf:s,...r}:void 0}function VE(u,t){const a=typeof u.value;return a!=="bigint"&&a!=="number"&&a!=="boolean"&&a!=="string"?{type:Array.isArray(u.value)?"array":"object"}:t.target==="openApi3"?{type:a==="bigint"?"integer":a,enum:[u.value]}:{type:a==="bigint"?"integer":a,const:u.value}}let zd;const rn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(zd===void 0&&(zd=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),zd),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function H_(u,t){const a={type:"string"};if(u.checks)for(const r of u.checks)switch(r.kind){case"min":je(a,"minLength",typeof a.minLength=="number"?Math.max(a.minLength,r.value):r.value,r.message,t);break;case"max":je(a,"maxLength",typeof a.maxLength=="number"?Math.min(a.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":sn(a,"email",r.message,t);break;case"format:idn-email":sn(a,"idn-email",r.message,t);break;case"pattern:zod":bt(a,rn.email,r.message,t);break}break;case"url":sn(a,"uri",r.message,t);break;case"uuid":sn(a,"uuid",r.message,t);break;case"regex":bt(a,r.regex,r.message,t);break;case"cuid":bt(a,rn.cuid,r.message,t);break;case"cuid2":bt(a,rn.cuid2,r.message,t);break;case"startsWith":bt(a,RegExp(`^${Pd(r.value,t)}`),r.message,t);break;case"endsWith":bt(a,RegExp(`${Pd(r.value,t)}$`),r.message,t);break;case"datetime":sn(a,"date-time",r.message,t);break;case"date":sn(a,"date",r.message,t);break;case"time":sn(a,"time",r.message,t);break;case"duration":sn(a,"duration",r.message,t);break;case"length":je(a,"minLength",typeof a.minLength=="number"?Math.max(a.minLength,r.value):r.value,r.message,t),je(a,"maxLength",typeof a.maxLength=="number"?Math.min(a.maxLength,r.value):r.value,r.message,t);break;case"includes":{bt(a,RegExp(Pd(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&sn(a,"ipv4",r.message,t),r.version!=="v4"&&sn(a,"ipv6",r.message,t);break}case"base64url":bt(a,rn.base64url,r.message,t);break;case"jwt":bt(a,rn.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&bt(a,rn.ipv4Cidr,r.message,t),r.version!=="v4"&&bt(a,rn.ipv6Cidr,r.message,t);break}case"emoji":bt(a,rn.emoji(),r.message,t);break;case"ulid":{bt(a,rn.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{sn(a,"binary",r.message,t);break}case"contentEncoding:base64":{je(a,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{bt(a,rn.base64,r.message,t);break}}break}case"nanoid":bt(a,rn.nanoid,r.message,t)}return a}function Pd(u,t){return t.patternStrategy==="escape"?XE(u):u}const YE=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function XE(u){let t="";for(let a=0;a<u.length;a++)YE.has(u[a])||(t+="\\"),t+=u[a];return t}function sn(u,t,a,r){var s;u.format||(s=u.anyOf)!=null&&s.some(o=>o.format)?(u.anyOf||(u.anyOf=[]),u.format&&(u.anyOf.push({format:u.format,...u.errorMessage&&r.errorMessages&&{errorMessage:{format:u.errorMessage.format}}}),delete u.format,u.errorMessage&&(delete u.errorMessage.format,Object.keys(u.errorMessage).length===0&&delete u.errorMessage)),u.anyOf.push({format:t,...a&&r.errorMessages&&{errorMessage:{format:a}}})):je(u,"format",t,a,r)}function bt(u,t,a,r){var s;u.pattern||(s=u.allOf)!=null&&s.some(o=>o.pattern)?(u.allOf||(u.allOf=[]),u.pattern&&(u.allOf.push({pattern:u.pattern,...u.errorMessage&&r.errorMessages&&{errorMessage:{pattern:u.errorMessage.pattern}}}),delete u.pattern,u.errorMessage&&(delete u.errorMessage.pattern,Object.keys(u.errorMessage).length===0&&delete u.errorMessage)),u.allOf.push({pattern:d_(t,r),...a&&r.errorMessages&&{errorMessage:{pattern:a}}})):je(u,"pattern",d_(t,r),a,r)}function d_(u,t){var p;if(!t.applyRegexFlags||!u.flags)return u.source;const a={i:u.flags.includes("i"),m:u.flags.includes("m"),s:u.flags.includes("s")},r=a.i?u.source.toLowerCase():u.source;let s="",o=!1,c=!1,f=!1;for(let h=0;h<r.length;h++){if(o){s+=r[h],o=!1;continue}if(a.i){if(c){if(r[h].match(/[a-z]/)){f?(s+=r[h],s+=`${r[h-2]}-${r[h]}`.toUpperCase(),f=!1):r[h+1]==="-"&&((p=r[h+2])!=null&&p.match(/[a-z]/))?(s+=r[h],f=!0):s+=`${r[h]}${r[h].toUpperCase()}`;continue}}else if(r[h].match(/[a-z]/)){s+=`[${r[h]}${r[h].toUpperCase()}]`;continue}}if(a.m){if(r[h]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(r[h]==="$"){s+=`($|(?=[\r
]))`;continue}}if(a.s&&r[h]==="."){s+=c?`${r[h]}\r
`:`[${r[h]}\r
]`;continue}s+=r[h],r[h]==="\\"?o=!0:c&&r[h]==="]"?c=!1:!c&&r[h]==="["&&(c=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),u.source}return s}function G_(u,t){var r,s,o,c,f,p;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=u.keyType)==null?void 0:r._def.typeName)===F.ZodEnum)return{type:"object",required:u.keyType._def.values,properties:u.keyType._def.values.reduce((h,y)=>({...h,[y]:xe(u.valueType._def,{...t,currentPath:[...t.currentPath,"properties",y]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const a={type:"object",additionalProperties:xe(u.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return a;if(((s=u.keyType)==null?void 0:s._def.typeName)===F.ZodString&&((o=u.keyType._def.checks)!=null&&o.length)){const{type:h,...y}=H_(u.keyType._def,t);return{...a,propertyNames:y}}else{if(((c=u.keyType)==null?void 0:c._def.typeName)===F.ZodEnum)return{...a,propertyNames:{enum:u.keyType._def.values}};if(((f=u.keyType)==null?void 0:f._def.typeName)===F.ZodBranded&&u.keyType._def.type._def.typeName===F.ZodString&&((p=u.keyType._def.type._def.checks)!=null&&p.length)){const{type:h,...y}=q_(u.keyType._def,t);return{...a,propertyNames:y}}}return a}function QE(u,t){if(t.mapStrategy==="record")return G_(u,t);const a=xe(u.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=xe(u.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[a,r],minItems:2,maxItems:2}}}function FE(u){const t=u.values,r=Object.keys(u.values).filter(o=>typeof t[t[o]]!="number").map(o=>t[o]),s=Array.from(new Set(r.map(o=>typeof o)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function JE(){return{not:{}}}function KE(u){return u.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Qu={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function WE(u,t){if(t.target==="openApi3")return f_(u,t);const a=u.options instanceof Map?Array.from(u.options.values()):u.options;if(a.every(r=>r._def.typeName in Qu&&(!r._def.checks||!r._def.checks.length))){const r=a.reduce((s,o)=>{const c=Qu[o._def.typeName];return c&&!s.includes(c)?[...s,c]:s},[]);return{type:r.length>1?r:r[0]}}else if(a.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=a.reduce((s,o)=>{const c=typeof o._def.value;switch(c){case"string":case"number":case"boolean":return[...s,c];case"bigint":return[...s,"integer"];case"object":if(o._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===a.length){const s=r.filter((o,c,f)=>f.indexOf(o)===c);return{type:s.length>1?s:s[0],enum:a.reduce((o,c)=>o.includes(c._def.value)?o:[...o,c._def.value],[])}}}else if(a.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:a.reduce((r,s)=>[...r,...s._def.values.filter(o=>!r.includes(o))],[])};return f_(u,t)}const f_=(u,t)=>{const a=(u.options instanceof Map?Array.from(u.options.values()):u.options).map((r,s)=>xe(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return a.length?{anyOf:a}:void 0};function e1(u,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(u.innerType._def.typeName)&&(!u.innerType._def.checks||!u.innerType._def.checks.length))return t.target==="openApi3"?{type:Qu[u.innerType._def.typeName],nullable:!0}:{type:[Qu[u.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=xe(u.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const a=xe(u.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return a&&{anyOf:[a,{type:"null"}]}}function t1(u,t){const a={type:"number"};if(!u.checks)return a;for(const r of u.checks)switch(r.kind){case"int":a.type="integer",P_(a,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?je(a,"minimum",r.value,r.message,t):je(a,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(a.exclusiveMinimum=!0),je(a,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?je(a,"maximum",r.value,r.message,t):je(a,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(a.exclusiveMaximum=!0),je(a,"maximum",r.value,r.message,t));break;case"multipleOf":je(a,"multipleOf",r.value,r.message,t);break}return a}function n1(u,t){const a=t.target==="openAi",r={type:"object",properties:{}},s=[],o=u.shape();for(const f in o){let p=o[f];if(p===void 0||p._def===void 0)continue;let h=r1(p);h&&a&&(p instanceof Un&&(p=p._def.innerType),p.isNullable()||(p=p.nullable()),h=!1);const y=xe(p._def,{...t,currentPath:[...t.currentPath,"properties",f],propertyPath:[...t.currentPath,"properties",f]});y!==void 0&&(r.properties[f]=y,h||s.push(f))}s.length&&(r.required=s);const c=a1(u,t);return c!==void 0&&(r.additionalProperties=c),r}function a1(u,t){if(u.catchall._def.typeName!=="ZodNever")return xe(u.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(u.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function r1(u){try{return u.isOptional()}catch{return!0}}const i1=(u,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return xe(u.innerType._def,t);const a=xe(u.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return a?{anyOf:[{not:{}},a]}:{}},s1=(u,t)=>{if(t.pipeStrategy==="input")return xe(u.in._def,t);if(t.pipeStrategy==="output")return xe(u.out._def,t);const a=xe(u.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=xe(u.out._def,{...t,currentPath:[...t.currentPath,"allOf",a?"1":"0"]});return{allOf:[a,r].filter(s=>s!==void 0)}};function u1(u,t){return xe(u.type._def,t)}function l1(u,t){const r={type:"array",uniqueItems:!0,items:xe(u.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return u.minSize&&je(r,"minItems",u.minSize.value,u.minSize.message,t),u.maxSize&&je(r,"maxItems",u.maxSize.value,u.maxSize.message,t),r}function o1(u,t){return u.rest?{type:"array",minItems:u.items.length,items:u.items.map((a,r)=>xe(a._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((a,r)=>r===void 0?a:[...a,r],[]),additionalItems:xe(u.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:u.items.length,maxItems:u.items.length,items:u.items.map((a,r)=>xe(a._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((a,r)=>r===void 0?a:[...a,r],[])}}function c1(){return{not:{}}}function d1(){return{}}const f1=(u,t)=>xe(u.innerType._def,t),h1=(u,t,a)=>{switch(t){case F.ZodString:return H_(u,a);case F.ZodNumber:return t1(u,a);case F.ZodObject:return n1(u,a);case F.ZodBigInt:return UE(u,a);case F.ZodBoolean:return IE();case F.ZodDate:return B_(u,a);case F.ZodUndefined:return c1();case F.ZodNull:return KE(a);case F.ZodArray:return ME(u,a);case F.ZodUnion:case F.ZodDiscriminatedUnion:return WE(u,a);case F.ZodIntersection:return ZE(u,a);case F.ZodTuple:return o1(u,a);case F.ZodRecord:return G_(u,a);case F.ZodLiteral:return VE(u,a);case F.ZodEnum:return HE(u);case F.ZodNativeEnum:return FE(u);case F.ZodNullable:return e1(u,a);case F.ZodOptional:return i1(u,a);case F.ZodMap:return QE(u,a);case F.ZodSet:return l1(u,a);case F.ZodLazy:return()=>u.getter()._def;case F.ZodPromise:return u1(u,a);case F.ZodNaN:case F.ZodNever:return JE();case F.ZodEffects:return BE(u,a);case F.ZodAny:return DE();case F.ZodUnknown:return d1();case F.ZodDefault:return qE(u,a);case F.ZodBranded:return q_(u,a);case F.ZodReadonly:return f1(u,a);case F.ZodCatch:return zE(u,a);case F.ZodPipeline:return s1(u,a);case F.ZodFunction:case F.ZodVoid:case F.ZodSymbol:return;default:return(r=>{})()}};function xe(u,t,a=!1){var f;const r=t.seen.get(u);if(t.override){const p=(f=t.override)==null?void 0:f.call(t,u,t,r,a);if(p!==jE)return p}if(r&&!a){const p=m1(r,t);if(p!==void 0)return p}const s={def:u,path:t.currentPath,jsonSchema:void 0};t.seen.set(u,s);const o=h1(u,u.typeName,t),c=typeof o=="function"?xe(o(),t):o;if(c&&y1(u,t,c),t.postProcess){const p=t.postProcess(c,u,t);return s.jsonSchema=c,p}return s.jsonSchema=c,c}const m1=(u,t)=>{switch(t.$refStrategy){case"root":return{$ref:u.path.join("/")};case"relative":return{$ref:p1(t.currentPath,u.path)};case"none":case"seen":return u.path.length<t.currentPath.length&&u.path.every((a,r)=>t.currentPath[r]===a)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},p1=(u,t)=>{let a=0;for(;a<u.length&&a<t.length&&u[a]===t[a];a++);return[(u.length-a).toString(),...t.slice(a)].join("/")},y1=(u,t,a)=>(u.description&&(a.description=u.description,t.markdownDescription&&(a.markdownDescription=u.description)),a),g1=(u,t)=>{const a=$E(t),r=void 0,s=t==null?void 0:t.name,o=xe(u._def,a,!1)??{},c=s===void 0?r?{...o,[a.definitionPath]:r}:o:{$ref:[...a.$refStrategy==="relative"?[]:a.basePath,a.definitionPath,s].join("/"),[a.definitionPath]:{...r,[s]:o}};return a.target==="jsonSchema7"?c.$schema="http://json-schema.org/draft-07/schema#":(a.target==="jsonSchema2019-09"||a.target==="openAi")&&(c.$schema="https://json-schema.org/draft/2019-09/schema#"),a.target==="openAi"&&("anyOf"in c||"oneOf"in c||"allOf"in c||"type"in c&&Array.isArray(c.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),c};function qd(u){return u.replace(/[^a-zA-Z-_0-9]/g,"_")}const _1=["*","_","`"];function b1(u){let t="";for(const[a,r]of Object.entries(u))t+=`	classDef ${a} ${r};
`;return t}function v1(u,t,a){const{firstNode:r,lastNode:s,nodeColors:o,withStyles:c=!0,curveStyle:f="linear",wrapLabelNWords:p=9}=a??{};let h=c?`%%{init: {'flowchart': {'curve': '${f}'}}}%%
graph TD;
`:`graph TD;
`;if(c){const w="default",S={[w]:"{0}({1})"};r!==void 0&&(S[r]="{0}([{1}]):::first"),s!==void 0&&(S[s]="{0}([{1}]):::last");for(const[T,R]of Object.entries(u)){const k=R.name.split(":").pop()??"";let N=_1.some(I=>k.startsWith(I)&&k.endsWith(I))?`<p>${k}</p>`:k;Object.keys(R.metadata??{}).length&&(N+=`<hr/><small><em>${Object.entries(R.metadata??{}).map(([I,K])=>`${I} = ${K}`).join(`
`)}</em></small>`);const Y=(S[T]??S[w]).replace("{0}",qd(T)).replace("{1}",N);h+=`	${Y}
`}}const y={};for(const w of t){const S=w.source.split(":"),T=w.target.split(":"),R=S.filter((k,q)=>k===T[q]).join(":");y[R]||(y[R]=[]),y[R].push(w)}const _=new Set;function b(w,S){const T=w.length===1&&w[0].source===w[0].target;if(S&&!T){const R=S.split(":").pop();if(_.has(R))throw new Error(`Found duplicate subgraph '${R}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);_.add(R),h+=`	subgraph ${R}
`}for(const R of w){const{source:k,target:q,data:N,conditional:Y}=R;let I="";if(N!==void 0){let K=N;const re=K.split(" ");re.length>p&&(K=Array.from({length:Math.ceil(re.length/p)},(J,Me)=>re.slice(Me*p,(Me+1)*p).join(" ")).join("&nbsp;<br>&nbsp;")),I=Y?` -. &nbsp;${K}&nbsp; .-> `:` -- &nbsp;${K}&nbsp; --> `}else I=Y?" -.-> ":" --> ";h+=`	${qd(k)}${I}${qd(q)};
`}for(const R in y)R.startsWith(`${S}:`)&&R!==S&&b(y[R],R);S&&!T&&(h+=`	end
`)}b(y[""]??[],"");for(const w in y)!w.includes(":")&&w!==""&&b(y[w],w);return c&&(h+=b1(o??{})),h}async function w1(u,t){let{backgroundColor:a="white"}=t??{};const r=btoa(u);a!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(a)||(a=`!${a}`));const s=`https://mermaid.ink/img/${r}?bgColor=${a}`,o=await fetch(s);if(!o.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${o.status}`,`Status text: ${o.statusText}`].join(`
`));return await o.blob()}function S1(u,t){if(u!==void 0&&!Yi(u))return u;if(gf(t))try{let a=t.getName();return a=a.startsWith("Runnable")?a.slice(8):a,a}catch{return t.getName()}else return t.name??"UnknownSchema"}function E1(u){return gf(u.data)?{type:"runnable",data:{id:u.data.lc_id,name:u.data.getName()}}:{type:"schema",data:{...g1(u.data.schema),title:u.data.name}}}class ul{constructor(t){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(t==null?void 0:t.nodes)??this.nodes,this.edges=(t==null?void 0:t.edges)??this.edges}toJSON(){const t={};return Object.values(this.nodes).forEach((a,r)=>{t[a.id]=Yi(a.id)?r:a.id}),{nodes:Object.values(this.nodes).map(a=>({id:t[a.id],...E1(a)})),edges:this.edges.map(a=>{const r={source:t[a.source],target:t[a.target]};return typeof a.data<"u"&&(r.data=a.data),typeof a.conditional<"u"&&(r.conditional=a.conditional),r})}}addNode(t,a,r){if(a!==void 0&&this.nodes[a]!==void 0)throw new Error(`Node with id ${a} already exists`);const s=a??vt(),o={id:s,data:t,name:S1(a,t),metadata:r};return this.nodes[s]=o,o}removeNode(t){delete this.nodes[t.id],this.edges=this.edges.filter(a=>a.source!==t.id&&a.target!==t.id)}addEdge(t,a,r,s){if(this.nodes[t.id]===void 0)throw new Error(`Source node ${t.id} not in graph`);if(this.nodes[a.id]===void 0)throw new Error(`Target node ${a.id} not in graph`);const o={source:t.id,target:a.id,data:r,conditional:s};return this.edges.push(o),o}firstNode(){return h_(this)}lastNode(){return m_(this)}extend(t,a=""){let r=a;Object.values(t.nodes).map(h=>h.id).every(Yi)&&(r="");const o=h=>r?`${r}:${h}`:h;Object.entries(t.nodes).forEach(([h,y])=>{this.nodes[o(h)]={...y,id:o(h)}});const c=t.edges.map(h=>({...h,source:o(h.source),target:o(h.target)}));this.edges=[...this.edges,...c];const f=t.firstNode(),p=t.lastNode();return[f?{id:o(f.id),data:f.data}:void 0,p?{id:o(p.id),data:p.data}:void 0]}trimFirstNode(){const t=this.firstNode();t&&h_(this,[t.id])&&this.removeNode(t)}trimLastNode(){const t=this.lastNode();t&&m_(this,[t.id])&&this.removeNode(t)}reid(){const t=Object.fromEntries(Object.values(this.nodes).map(s=>[s.id,s.name])),a=new Map;Object.values(t).forEach(s=>{a.set(s,(a.get(s)||0)+1)});const r=s=>{const o=t[s];return Yi(s)&&a.get(o)===1?o:s};return new ul({nodes:Object.fromEntries(Object.entries(this.nodes).map(([s,o])=>[r(s),{...o,id:r(s)}])),edges:this.edges.map(s=>({...s,source:r(s.source),target:r(s.target)}))})}drawMermaid(t){const{withStyles:a,curveStyle:r,nodeColors:s={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:o}=t??{},c=this.reid(),f=c.firstNode(),p=c.lastNode();return v1(c.nodes,c.edges,{firstNode:f==null?void 0:f.id,lastNode:p==null?void 0:p.id,withStyles:a,curveStyle:r,nodeColors:s,wrapLabelNWords:o})}async drawMermaidPng(t){const a=this.drawMermaid(t);return w1(a,{backgroundColor:t==null?void 0:t.backgroundColor})}}function h_(u,t=[]){const a=new Set(u.edges.filter(s=>!t.includes(s.source)).map(s=>s.target)),r=[];for(const s of Object.values(u.nodes))!t.includes(s.id)&&!a.has(s.id)&&r.push(s);return r.length===1?r[0]:void 0}function m_(u,t=[]){const a=new Set(u.edges.filter(s=>!t.includes(s.target)).map(s=>s.source)),r=[];for(const s of Object.values(u.nodes))!t.includes(s.id)&&!a.has(s.id)&&r.push(s);return r.length===1?r[0]:void 0}function T1(u){const t=new TextEncoder,a=new ReadableStream({async start(r){for await(const s of u)r.enqueue(t.encode(`event: data
data: ${JSON.stringify(s)}

`));r.enqueue(t.encode(`event: end

`)),r.close()}});return Bt.fromReadableStream(a)}function p_(u){return typeof u=="object"&&u!==null&&typeof u[Symbol.iterator]=="function"&&typeof u.next=="function"}const O1=u=>u!=null&&typeof u=="object"&&"next"in u&&typeof u.next=="function";function ef(u){return typeof u=="object"&&u!==null&&typeof u[Symbol.asyncIterator]=="function"}function*y_(u,t){for(;;){const{value:a,done:r}=va.runWithConfig(Pr(u),t.next.bind(t),!0);if(r)break;yield a}}async function*tf(u,t){const a=t[Symbol.asyncIterator]();for(;;){const{value:r,done:s}=await va.runWithConfig(Pr(u),a.next.bind(t),!0);if(s)break;yield r}}function lt(u,t){return u&&!Array.isArray(u)&&!(u instanceof Date)&&typeof u=="object"?u:{[t]:u}}class wt extends zr{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(t){const a=this.name??this.constructor.lc_name()??this.constructor.name;return t?`${a}${t}`:a}bind(t){return new Ha({bound:this,kwargs:t,config:{}})}map(){return new Fu({bound:this})}withRetry(t){return new Z_({bound:this,kwargs:{},config:{},maxAttemptNumber:t==null?void 0:t.stopAfterAttempt,...t})}withConfig(t){return new Ha({bound:this,config:t,kwargs:{}})}withFallbacks(t){const a=Array.isArray(t)?t:t.fallbacks;return new R1({runnable:this,fallbacks:a})}_getOptionsList(t,a=0){if(Array.isArray(t)&&t.length!==a)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${t.length} options for ${a} inputs`);if(Array.isArray(t))return t.map(De);if(a>1&&!Array.isArray(t)&&t.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(t).filter(([s])=>s!=="runId"));return Array.from({length:a},(s,o)=>De(o===0?t:r))}return Array.from({length:a},()=>De(t))}async batch(t,a,r){var p;const s=this._getOptionsList(a??{},t.length),o=((p=s[0])==null?void 0:p.maxConcurrency)??(r==null?void 0:r.maxConcurrency),c=new CE({maxConcurrency:o,onFailedAttempt:h=>{throw h}}),f=t.map((h,y)=>c.call(async()=>{try{return await this.invoke(h,s[y])}catch(_){if(r!=null&&r.returnExceptions)return _;throw _}}));return Promise.all(f)}async*_streamIterator(t,a){yield this.invoke(t,a)}async stream(t,a){const r=De(a),s=new Br({generator:this._streamIterator(t,r),config:r});return await s.setup,Bt.fromAsyncGenerator(s)}_separateRunnableConfigFromCallOptions(t){let a;t===void 0?a=De(t):a=De({callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,runName:t.runName,configurable:t.configurable,recursionLimit:t.recursionLimit,maxConcurrency:t.maxConcurrency,runId:t.runId,timeout:t.timeout,signal:t.signal});const r={...t};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[a,r]}async _callWithConfig(t,a,r){const s=De(r),o=await on(s),c=await(o==null?void 0:o.handleChainStart(this.toJSON(),lt(a,"input"),s.runId,s==null?void 0:s.runType,void 0,void 0,(s==null?void 0:s.runName)??this.getName()));delete s.runId;let f;try{const p=t.call(this,a,s,c);f=await wa(p,r==null?void 0:r.signal)}catch(p){throw await(c==null?void 0:c.handleChainError(p)),p}return await(c==null?void 0:c.handleChainEnd(lt(f,"output"))),f}async _batchWithConfig(t,a,r,s){var h;const o=this._getOptionsList(r??{},a.length),c=await Promise.all(o.map(on)),f=await Promise.all(c.map(async(y,_)=>{const b=await(y==null?void 0:y.handleChainStart(this.toJSON(),lt(a[_],"input"),o[_].runId,o[_].runType,void 0,void 0,o[_].runName??this.getName()));return delete o[_].runId,b}));let p;try{const y=t.call(this,a,o,f,s);p=await wa(y,(h=o==null?void 0:o[0])==null?void 0:h.signal)}catch(y){throw await Promise.all(f.map(_=>_==null?void 0:_.handleChainError(y))),y}return await Promise.all(f.map(y=>y==null?void 0:y.handleChainEnd(lt(p,"output")))),p}async*_transformStreamWithConfig(t,a,r){let s,o=!0,c,f=!0;const p=De(r),h=await on(p);async function*y(){for await(const b of t){if(o)if(s===void 0)s=b;else try{s=zn(s,b)}catch{s=void 0,o=!1}yield b}}let _;try{const b=await SE(a.bind(this),y(),async()=>h==null?void 0:h.handleChainStart(this.toJSON(),{input:""},p.runId,p.runType,void 0,void 0,p.runName??this.getName()),r==null?void 0:r.signal,p);delete p.runId,_=b.setup;const w=_==null?void 0:_.handlers.find(OE);let S=b.output;w!==void 0&&_!==void 0&&(S=w.tapOutputIterable(_.runId,S));const T=_==null?void 0:_.handlers.find(EE);T!==void 0&&_!==void 0&&(S=T.tapOutputIterable(_.runId,S));for await(const R of S)if(yield R,f)if(c===void 0)c=R;else try{c=zn(c,R)}catch{c=void 0,f=!1}}catch(b){throw await(_==null?void 0:_.handleChainError(b,void 0,void 0,void 0,{inputs:lt(s,"input")})),b}await(_==null?void 0:_.handleChainEnd(c??{},void 0,void 0,void 0,{inputs:lt(s,"input")}))}getGraph(t){const a=new ul,r=a.addNode({name:`${this.getName()}Input`,schema:zy()}),s=a.addNode(this),o=a.addNode({name:`${this.getName()}Output`,schema:zy()});return a.addEdge(r,s),a.addEdge(s,o),a}pipe(t){return new qa({first:this,last:Ba(t)})}pick(t){return this.pipe(new C1(t))}assign(t){return this.pipe(new x1(new cs({steps:t})))}async*transform(t,a){let r;for await(const s of t)r===void 0?r=s:r=zn(r,s);yield*this._streamIterator(r,De(a))}async*streamLog(t,a,r){const s=new c_({...r,autoClose:!1,_schemaFormat:"original"}),o=De(a);yield*this._streamLog(t,s,o)}async*_streamLog(t,a,r){const{callbacks:s}=r;if(s===void 0)r.callbacks=[a];else if(Array.isArray(s))r.callbacks=s.concat([a]);else{const p=s.copy();p.addHandler(a,!0),r.callbacks=p}const o=this.stream(t,r);async function c(){try{const p=await o;for await(const h of p){const y=new pa({ops:[{op:"add",path:"/streamed_output/-",value:h}]});await a.writer.write(y)}}finally{await a.writer.close()}}const f=c();try{for await(const p of a)yield p}finally{await f}}streamEvents(t,a,r){let s;if(a.version==="v1")s=this._streamEventsV1(t,a,r);else if(a.version==="v2")s=this._streamEventsV2(t,a,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return a.encoding==="text/event-stream"?T1(s):Bt.fromAsyncGenerator(s)}async*_streamEventsV2(t,a,r){var S;const s=new AE({...r,autoClose:!1}),o=De(a),c=o.runId??vt();o.runId=c;const f=o.callbacks;if(f===void 0)o.callbacks=[s];else if(Array.isArray(f))o.callbacks=f.concat(s);else{const T=f.copy();T.addHandler(s,!0),o.callbacks=T}const p=new AbortController,h=this;async function y(){try{let T;a!=null&&a.signal?"any"in AbortSignal?T=AbortSignal.any([p.signal,a.signal]):(T=a.signal,a.signal.addEventListener("abort",()=>{p.abort()},{once:!0})):T=p.signal;const R=await h.stream(t,{...o,signal:T}),k=s.tapOutputIterable(c,R);for await(const q of k)if(p.signal.aborted)break}finally{await s.finish()}}const _=y();let b=!1,w;try{for await(const T of s){if(!b){T.data.input=t,b=!0,w=T.run_id,yield T;continue}T.run_id===w&&T.event.endsWith("_end")&&(S=T.data)!=null&&S.input&&delete T.data.input,yield T}}finally{p.abort(),await _}}async*_streamEventsV1(t,a,r){let s,o=!1;const c=De(a),f=c.tags??[],p=c.metadata??{},h=c.runName??this.getName(),y=new c_({...r,autoClose:!1,_schemaFormat:"streaming_events"}),_=new NE({...r}),b=this._streamLog(t,y,c);for await(const S of b){if(s?s=s.concat(S):s=rs.fromRunLogPatch(S),s.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!o){o=!0;const q={...s.state},N={run_id:q.id,event:`on_${q.type}_start`,name:h,tags:f,metadata:p,data:{input:t}};_.includeEvent(N,q.type)&&(yield N)}const T=S.ops.filter(q=>q.path.startsWith("/logs/")).map(q=>q.path.split("/")[2]),R=[...new Set(T)];for(const q of R){let N,Y={};const I=s.state.logs[q];if(I.end_time===void 0?I.streamed_output.length>0?N="stream":N="start":N="end",N==="start")I.inputs!==void 0&&(Y.input=I.inputs);else if(N==="end")I.inputs!==void 0&&(Y.input=I.inputs),Y.output=I.final_output;else if(N==="stream"){const K=I.streamed_output.length;if(K!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${K} instead. Encountered in: "${I.name}"`);Y={chunk:I.streamed_output[0]},I.streamed_output=[]}yield{event:`on_${I.type}_${N}`,name:I.name,run_id:I.id,tags:I.tags,metadata:I.metadata,data:Y}}const{state:k}=s;if(k.streamed_output.length>0){const q=k.streamed_output.length;if(q!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${q} instead. Encountered in: "${k.name}"`);const N={chunk:k.streamed_output[0]};k.streamed_output=[];const Y={event:`on_${k.type}_stream`,run_id:k.id,tags:f,metadata:p,name:h,data:N};_.includeEvent(Y,k.type)&&(yield Y)}}const w=s==null?void 0:s.state;if(w!==void 0){const S={event:`on_${w.type}_end`,name:h,run_id:w.id,tags:f,metadata:p,data:{output:w.final_output}};_.includeEvent(S,w.type)&&(yield S)}}static isRunnable(t){return gf(t)}withListeners({onStart:t,onEnd:a,onError:r}){return new Ha({bound:this,config:{},configFactories:[s=>({callbacks:[new z_({config:s,onStart:t,onEnd:a,onError:r})]})]})}asTool(t){return N1(this,t)}}class Ha extends wt{static lc_name(){return"RunnableBinding"}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=t.bound,this.kwargs=t.kwargs,this.config=t.config,this.configFactories=t.configFactories}getName(t){return this.bound.getName(t)}async _mergeConfig(...t){const a=u_(this.config,...t);return u_(a,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(a))):[])}bind(t){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...t},config:this.config})}withConfig(t){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...t}})}withRetry(t){return new Z_({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:t==null?void 0:t.stopAfterAttempt,...t})}async invoke(t,a){return this.bound.invoke(t,await this._mergeConfig(De(a),this.kwargs))}async batch(t,a,r){const s=Array.isArray(a)?await Promise.all(a.map(async o=>this._mergeConfig(De(o),this.kwargs))):await this._mergeConfig(De(a),this.kwargs);return this.bound.batch(t,s,r)}async*_streamIterator(t,a){yield*this.bound._streamIterator(t,await this._mergeConfig(De(a),this.kwargs))}async stream(t,a){return this.bound.stream(t,await this._mergeConfig(De(a),this.kwargs))}async*transform(t,a){yield*this.bound.transform(t,await this._mergeConfig(De(a),this.kwargs))}streamEvents(t,a,r){const s=this,o=async function*(){yield*s.bound.streamEvents(t,{...await s._mergeConfig(De(a),s.kwargs),version:a.version},r)};return Bt.fromAsyncGenerator(o())}static isRunnableBinding(t){return t.bound&&wt.isRunnable(t.bound)}withListeners({onStart:t,onEnd:a,onError:r}){return new Ha({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[s=>({callbacks:[new z_({config:s,onStart:t,onEnd:a,onError:r})]})]})}}class Fu extends wt{static lc_name(){return"RunnableEach"}constructor(t){super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=t.bound}bind(t){return new Fu({bound:this.bound.bind(t)})}async invoke(t,a){return this._callWithConfig(this._invoke.bind(this),t,a)}async _invoke(t,a,r){return this.bound.batch(t,yt(a,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:t,onEnd:a,onError:r}){return new Fu({bound:this.bound.withListeners({onStart:t,onEnd:a,onError:r})})}}class Z_ extends Ha{static lc_name(){return"RunnableRetry"}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=t.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=t.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(t,a,r){const s=t>1?`retry:attempt:${t}`:void 0;return yt(a,{callbacks:r==null?void 0:r.getChild(s)})}async _invoke(t,a,r){return qu(s=>super.invoke(t,this._patchConfigForRetry(s,a,r)),{onFailedAttempt:s=>this.onFailedAttempt(s,t),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(t,a){return this._callWithConfig(this._invoke.bind(this),t,a)}async _batch(t,a,r,s){const o={};try{await qu(async c=>{const f=t.map((b,w)=>w).filter(b=>o[b.toString()]===void 0||o[b.toString()]instanceof Error),p=f.map(b=>t[b]),h=f.map(b=>this._patchConfigForRetry(c,a==null?void 0:a[b],r==null?void 0:r[b])),y=await super.batch(p,h,{...s,returnExceptions:!0});let _;for(let b=0;b<y.length;b+=1){const w=y[b],S=f[b];w instanceof Error&&_===void 0&&(_=w,_.input=p[b]),o[S.toString()]=w}if(_)throw _;return y},{onFailedAttempt:c=>this.onFailedAttempt(c,c.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(c){if((s==null?void 0:s.returnExceptions)!==!0)throw c}return Object.keys(o).sort((c,f)=>parseInt(c,10)-parseInt(f,10)).map(c=>o[parseInt(c,10)])}async batch(t,a,r){return this._batchWithConfig(this._batch.bind(this),t,a,r)}}class qa extends wt{static lc_name(){return"RunnableSequence"}constructor(t){super(t),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=t.first,this.middle=t.middle??this.middle,this.last=t.last,this.name=t.name,this.omitSequenceTags=t.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(t,a){var p;const r=De(a),s=await on(r),o=await(s==null?void 0:s.handleChainStart(this.toJSON(),lt(t,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let c=t,f;try{const h=[this.first,...this.middle];for(let y=0;y<h.length;y+=1){const b=h[y].invoke(c,yt(r,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${y+1}`)}));c=await wa(b,a==null?void 0:a.signal)}if((p=a==null?void 0:a.signal)!=null&&p.aborted)throw new Error("Aborted");f=await this.last.invoke(c,yt(r,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(h){throw await(o==null?void 0:o.handleChainError(h)),h}return await(o==null?void 0:o.handleChainEnd(lt(f,"output"))),f}async batch(t,a,r){var p;const s=this._getOptionsList(a??{},t.length),o=await Promise.all(s.map(on)),c=await Promise.all(o.map(async(h,y)=>{const _=await(h==null?void 0:h.handleChainStart(this.toJSON(),lt(t[y],"input"),s[y].runId,void 0,void 0,void 0,s[y].runName));return delete s[y].runId,_}));let f=t;try{for(let h=0;h<this.steps.length;h+=1){const _=this.steps[h].batch(f,c.map((b,w)=>{const S=b==null?void 0:b.getChild(this.omitSequenceTags?void 0:`seq:step:${h+1}`);return yt(s[w],{callbacks:S})}),r);f=await wa(_,(p=s[0])==null?void 0:p.signal)}}catch(h){throw await Promise.all(c.map(y=>y==null?void 0:y.handleChainError(h))),h}return await Promise.all(c.map(h=>h==null?void 0:h.handleChainEnd(lt(f,"output")))),f}async*_streamIterator(t,a){var _;const r=await on(a),{runId:s,...o}=a??{},c=await(r==null?void 0:r.handleChainStart(this.toJSON(),lt(t,"input"),s,void 0,void 0,void 0,o==null?void 0:o.runName)),f=[this.first,...this.middle,this.last];let p=!0,h;async function*y(){yield t}try{let b=f[0].transform(y(),yt(o,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let w=1;w<f.length;w+=1)b=await f[w].transform(b,yt(o,{callbacks:c==null?void 0:c.getChild(this.omitSequenceTags?void 0:`seq:step:${w+1}`)}));for await(const w of b)if((_=a==null?void 0:a.signal)==null||_.throwIfAborted(),yield w,p)if(h===void 0)h=w;else try{h=zn(h,w)}catch{h=void 0,p=!1}}catch(b){throw await(c==null?void 0:c.handleChainError(b)),b}await(c==null?void 0:c.handleChainEnd(lt(h,"output")))}getGraph(t){const a=new ul;let r=null;return this.steps.forEach((s,o)=>{const c=s.getGraph(t);o!==0&&c.trimFirstNode(),o!==this.steps.length-1&&c.trimLastNode(),a.extend(c);const f=c.firstNode();if(!f)throw new Error(`Runnable ${s} has no first node`);r&&a.addEdge(r,f),r=c.lastNode()}),a}pipe(t){return qa.isRunnableSequence(t)?new qa({first:this.first,middle:this.middle.concat([this.last,t.first,...t.middle]),last:t.last,name:this.name??t.name}):new qa({first:this.first,middle:[...this.middle,this.last],last:Ba(t),name:this.name})}static isRunnableSequence(t){return Array.isArray(t.middle)&&wt.isRunnable(t)}static from([t,...a],r){let s={};return typeof r=="string"?s.name=r:r!==void 0&&(s=r),new qa({...s,first:Ba(t),middle:a.slice(0,-1).map(Ba),last:Ba(a[a.length-1])})}}class cs extends wt{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[a,r]of Object.entries(t.steps))this.steps[a]=Ba(r)}static from(t){return new cs({steps:t})}async invoke(t,a){const r=De(a),s=await on(r),o=await(s==null?void 0:s.handleChainStart(this.toJSON(),{input:t},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const c={};try{const f=Object.entries(this.steps).map(async([p,h])=>{c[p]=await h.invoke(t,yt(r,{callbacks:o==null?void 0:o.getChild(`map:key:${p}`)}))});await wa(Promise.all(f),a==null?void 0:a.signal)}catch(f){throw await(o==null?void 0:o.handleChainError(f)),f}return await(o==null?void 0:o.handleChainEnd(c)),c}async*_transform(t,a,r){const s={...this.steps},o=I_(t,Object.keys(s).length),c=new Map(Object.entries(s).map(([f,p],h)=>{const y=p.transform(o[h],yt(r,{callbacks:a==null?void 0:a.getChild(`map:key:${f}`)}));return[f,y.next().then(_=>({key:f,gen:y,result:_}))]}));for(;c.size;){const f=Promise.race(c.values()),{key:p,result:h,gen:y}=await wa(f,r==null?void 0:r.signal);c.delete(p),h.done||(yield{[p]:h.value},c.set(p,y.next().then(_=>({key:p,gen:y,result:_}))))}}transform(t,a){return this._transformStreamWithConfig(t,this._transform.bind(this),a)}async stream(t,a){async function*r(){yield t}const s=De(a),o=new Br({generator:this.transform(r(),s),config:s});return await o.setup,Bt.fromAsyncGenerator(o)}}class _f extends wt{constructor(t){if(super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!mf(t.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=t.func}async invoke(t,a){const[r]=this._getOptionsList(a??{},1),s=await on(r),o=this.func(yt(r,{callbacks:s}),t);return wa(o,r==null?void 0:r.signal)}async*_streamIterator(t,a){var o,c;const[r]=this._getOptionsList(a??{},1),s=await this.invoke(t,a);if(ef(s)){for await(const f of s)(o=r==null?void 0:r.signal)==null||o.throwIfAborted(),yield f;return}if(O1(s)){for(;;){(c=r==null?void 0:r.signal)==null||c.throwIfAborted();const f=s.next();if(f.done)break;yield f.value}return}yield s}static from(t){return new _f({func:t})}}function A1(u){if(mf(u))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class ll extends wt{static lc_name(){return"RunnableLambda"}constructor(t){if(mf(t.func))return _f.from(t.func);super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),A1(t.func),this.func=t.func}static from(t){return new ll({func:t})}async _invoke(t,a,r){return new Promise((s,o)=>{const c=yt(a,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((a==null?void 0:a.recursionLimit)??Id)-1});va.runWithConfig(Pr(c),async()=>{var f,p;try{let h=await this.func(t,{...c});if(h&&wt.isRunnable(h)){if((a==null?void 0:a.recursionLimit)===0)throw new Error("Recursion limit reached.");h=await h.invoke(t,{...c,recursionLimit:(c.recursionLimit??Id)-1})}else if(ef(h)){let y;for await(const _ of tf(c,h))if((f=a==null?void 0:a.signal)==null||f.throwIfAborted(),y===void 0)y=_;else try{y=zn(y,_)}catch{y=_}h=y}else if(p_(h)){let y;for(const _ of y_(c,h))if((p=a==null?void 0:a.signal)==null||p.throwIfAborted(),y===void 0)y=_;else try{y=zn(y,_)}catch{y=_}h=y}s(h)}catch(h){o(h)}})})}async invoke(t,a){return this._callWithConfig(this._invoke.bind(this),t,a)}async*_transform(t,a,r){var f,p;let s;for await(const h of t)if(s===void 0)s=h;else try{s=zn(s,h)}catch{s=h}const o=yt(r,{callbacks:a==null?void 0:a.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??Id)-1}),c=await new Promise((h,y)=>{va.runWithConfig(Pr(o),async()=>{try{const _=await this.func(s,{...o,config:o});h(_)}catch(_){y(_)}})});if(c&&wt.isRunnable(c)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const h=await c.stream(s,o);for await(const y of h)yield y}else if(ef(c))for await(const h of tf(o,c))(f=r==null?void 0:r.signal)==null||f.throwIfAborted(),yield h;else if(p_(c))for(const h of y_(o,c))(p=r==null?void 0:r.signal)==null||p.throwIfAborted(),yield h;else yield c}transform(t,a){return this._transformStreamWithConfig(t,this._transform.bind(this),a)}async stream(t,a){async function*r(){yield t}const s=De(a),o=new Br({generator:this.transform(r(),s),config:s});return await o.setup,Bt.fromAsyncGenerator(o)}}class R1 extends wt{static lc_name(){return"RunnableWithFallbacks"}constructor(t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=t.runnable,this.fallbacks=t.fallbacks}*runnables(){yield this.runnable;for(const t of this.fallbacks)yield t}async invoke(t,a){const r=De(a),s=await on(r),{runId:o,...c}=r,f=await(s==null?void 0:s.handleChainStart(this.toJSON(),lt(t,"input"),o,void 0,void 0,void 0,c==null?void 0:c.runName)),p=yt(c,{callbacks:f==null?void 0:f.getChild()});return await va.runWithConfig(p,async()=>{var _;let y;for(const b of this.runnables()){(_=r==null?void 0:r.signal)==null||_.throwIfAborted();try{const w=await b.invoke(t,p);return await(f==null?void 0:f.handleChainEnd(lt(w,"output"))),w}catch(w){y===void 0&&(y=w)}}throw y===void 0?new Error("No error stored at end of fallback."):(await(f==null?void 0:f.handleChainError(y)),y)})}async*_streamIterator(t,a){var _;const r=De(a),s=await on(r),{runId:o,...c}=r,f=await(s==null?void 0:s.handleChainStart(this.toJSON(),lt(t,"input"),o,void 0,void 0,void 0,c==null?void 0:c.runName));let p,h;for(const b of this.runnables()){(_=r==null?void 0:r.signal)==null||_.throwIfAborted();const w=yt(c,{callbacks:f==null?void 0:f.getChild()});try{const S=await b.stream(t,w);h=tf(w,S);break}catch(S){p===void 0&&(p=S)}}if(h===void 0){const b=p??new Error("No error stored at end of fallback.");throw await(f==null?void 0:f.handleChainError(b)),b}let y;try{for await(const b of h){yield b;try{y=y===void 0?y:zn(y,b)}catch{y=void 0}}}catch(b){throw await(f==null?void 0:f.handleChainError(b)),b}await(f==null?void 0:f.handleChainEnd(lt(y,"output")))}async batch(t,a,r){var p;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const s=this._getOptionsList(a??{},t.length),o=await Promise.all(s.map(h=>on(h))),c=await Promise.all(o.map(async(h,y)=>{const _=await(h==null?void 0:h.handleChainStart(this.toJSON(),lt(t[y],"input"),s[y].runId,void 0,void 0,void 0,s[y].runName));return delete s[y].runId,_}));let f;for(const h of this.runnables()){(p=s[0].signal)==null||p.throwIfAborted();try{const y=await h.batch(t,c.map((_,b)=>yt(s[b],{callbacks:_==null?void 0:_.getChild()})),r);return await Promise.all(c.map((_,b)=>_==null?void 0:_.handleChainEnd(lt(y[b],"output")))),y}catch(y){f===void 0&&(f=y)}}throw f?(await Promise.all(c.map(h=>h==null?void 0:h.handleChainError(f))),f):new Error("No error stored at end of fallbacks.")}}function Ba(u){if(typeof u=="function")return new ll({func:u});if(wt.isRunnable(u))return u;if(!Array.isArray(u)&&typeof u=="object"){const t={};for(const[a,r]of Object.entries(u))t[a]=Ba(r);return new cs({steps:t})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class x1 extends wt{static lc_name(){return"RunnableAssign"}constructor(t){t instanceof cs&&(t={mapper:t}),super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=t.mapper}async invoke(t,a){const r=await this.mapper.invoke(t,a);return{...t,...r}}async*_transform(t,a,r){const s=this.mapper.getStepsKeys(),[o,c]=I_(t),f=this.mapper.transform(c,yt(r,{callbacks:a==null?void 0:a.getChild()})),p=f.next();for await(const h of o){if(typeof h!="object"||Array.isArray(h))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof h}`);const y=Object.fromEntries(Object.entries(h).filter(([_])=>!s.includes(_)));Object.keys(y).length>0&&(yield y)}yield(await p).value;for await(const h of f)yield h}transform(t,a){return this._transformStreamWithConfig(t,this._transform.bind(this),a)}async stream(t,a){async function*r(){yield t}const s=De(a),o=new Br({generator:this.transform(r(),s),config:s});return await o.setup,Bt.fromAsyncGenerator(o)}}class C1 extends wt{static lc_name(){return"RunnablePick"}constructor(t){(typeof t=="string"||Array.isArray(t))&&(t={keys:t}),super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=t.keys}async _pick(t){if(typeof this.keys=="string")return t[this.keys];{const a=this.keys.map(r=>[r,t[r]]).filter(r=>r[1]!==void 0);return a.length===0?void 0:Object.fromEntries(a)}}async invoke(t,a){return this._callWithConfig(this._pick.bind(this),t,a)}async*_transform(t){for await(const a of t){const r=await this._pick(a);r!==void 0&&(yield r)}}transform(t,a){return this._transformStreamWithConfig(t,this._transform.bind(this),a)}async stream(t,a){async function*r(){yield t}const s=De(a),o=new Br({generator:this.transform(r(),s),config:s});return await o.setup,Bt.fromAsyncGenerator(o)}}class g_ extends Ha{constructor(t){const a=qa.from([ll.from(async r=>{let s;if(WS(r))try{s=await this.schema.parseAsync(r.args)}catch{throw new eE("Received tool input did not match expected schema",JSON.stringify(r.args))}else s=r;return s}).withConfig({runName:`${t.name}:parse_input`}),t.bound]).withConfig({runName:t.name});super({bound:a,config:t.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=t.name,this.description=t.description,this.schema=t.schema}static lc_name(){return"RunnableToolLike"}}function N1(u,t){var s;const a=t.name??u.getName(),r=t.description??((s=t.schema)==null?void 0:s.description);return t.schema.constructor===Mn?new g_({name:a,description:r,schema:r0({input:a0()}).transform(o=>o.input),bound:u}):new g_({name:a,description:r,schema:t.schema,bound:u})}class j1 extends wt{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","documents","transformers"]})}invoke(t,a){return this.transformDocuments(t)}}var Zi={},__;function L1(){if(__)return Zi;__=1,Zi.byteLength=f,Zi.toByteArray=h,Zi.fromByteArray=b;for(var u=[],t=[],a=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=r.length;s<o;++s)u[s]=r[s],t[r.charCodeAt(s)]=s;t[45]=62,t[95]=63;function c(w){var S=w.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=w.indexOf("=");T===-1&&(T=S);var R=T===S?0:4-T%4;return[T,R]}function f(w){var S=c(w),T=S[0],R=S[1];return(T+R)*3/4-R}function p(w,S,T){return(S+T)*3/4-T}function h(w){var S,T=c(w),R=T[0],k=T[1],q=new a(p(w,R,k)),N=0,Y=k>0?R-4:R,I;for(I=0;I<Y;I+=4)S=t[w.charCodeAt(I)]<<18|t[w.charCodeAt(I+1)]<<12|t[w.charCodeAt(I+2)]<<6|t[w.charCodeAt(I+3)],q[N++]=S>>16&255,q[N++]=S>>8&255,q[N++]=S&255;return k===2&&(S=t[w.charCodeAt(I)]<<2|t[w.charCodeAt(I+1)]>>4,q[N++]=S&255),k===1&&(S=t[w.charCodeAt(I)]<<10|t[w.charCodeAt(I+1)]<<4|t[w.charCodeAt(I+2)]>>2,q[N++]=S>>8&255,q[N++]=S&255),q}function y(w){return u[w>>18&63]+u[w>>12&63]+u[w>>6&63]+u[w&63]}function _(w,S,T){for(var R,k=[],q=S;q<T;q+=3)R=(w[q]<<16&16711680)+(w[q+1]<<8&65280)+(w[q+2]&255),k.push(y(R));return k.join("")}function b(w){for(var S,T=w.length,R=T%3,k=[],q=16383,N=0,Y=T-R;N<Y;N+=q)k.push(_(w,N,N+q>Y?Y:N+q));return R===1?(S=w[T-1],k.push(u[S>>2]+u[S<<4&63]+"==")):R===2&&(S=(w[T-2]<<8)+w[T-1],k.push(u[S>>10]+u[S>>4&63]+u[S<<2&63]+"=")),k.join("")}return Zi}var k1=L1();const $1=ss(k1);var D1=Object.defineProperty,M1=(u,t,a)=>t in u?D1(u,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[t]=a,U1=(u,t,a)=>(M1(u,t+"",a),a);function I1(u,t){let a=Array.from({length:u.length},(r,s)=>({start:s,end:s+1}));for(;a.length>1;){let r=null;for(let s=0;s<a.length-1;s++){const o=u.slice(a[s].start,a[s+1].end),c=t.get(o.join(","));c!=null&&(r==null||c<r[0])&&(r=[c,s])}if(r!=null){const s=r[1];a[s]={start:a[s].start,end:a[s+1].end},a.splice(s+1,1)}else break}return a}function z1(u,t){return u.length===1?[t.get(u.join(","))]:I1(u,t).map(a=>t.get(u.slice(a.start,a.end).join(","))).filter(a=>a!=null)}function P1(u){return u.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var nf=class{constructor(u,t){da(this,"specialTokens");da(this,"inverseSpecialTokens");da(this,"patStr");da(this,"textEncoder",new TextEncoder);da(this,"textDecoder",new TextDecoder("utf-8"));da(this,"rankMap",new Map);da(this,"textMap",new Map);this.patStr=u.pat_str;const a=u.bpe_ranks.split(`
`).filter(Boolean).reduce((r,s)=>{const[o,c,...f]=s.split(" "),p=Number.parseInt(c,10);return f.forEach((h,y)=>r[h]=p+y),r},{});for(const[r,s]of Object.entries(a)){const o=$1.toByteArray(r);this.rankMap.set(o.join(","),s),this.textMap.set(s,o)}this.specialTokens={...u.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[s,o])=>(r[o]=this.textEncoder.encode(s),r),{})}encode(u,t=[],a="all"){const r=new RegExp(this.patStr,"ug"),s=nf.specialTokenRegex(Object.keys(this.specialTokens)),o=[],c=new Set(t==="all"?Object.keys(this.specialTokens):t),f=new Set(a==="all"?Object.keys(this.specialTokens).filter(h=>!c.has(h)):a);if(f.size>0){const h=nf.specialTokenRegex([...f]),y=u.match(h);if(y!=null)throw new Error(`The text contains a special token that is not allowed: ${y[0]}`)}let p=0;for(;;){let h=null,y=p;for(;s.lastIndex=y,h=s.exec(u),!(h==null||c.has(h[0]));)y=h.index+1;const _=(h==null?void 0:h.index)??u.length;for(const w of u.substring(p,_).matchAll(r)){const S=this.textEncoder.encode(w[0]),T=this.rankMap.get(S.join(","));if(T!=null){o.push(T);continue}o.push(...z1(S,this.rankMap))}if(h==null)break;let b=this.specialTokens[h[0]];o.push(b),p=h.index+h[0].length}return o}decode(u){const t=[];let a=0;for(let o=0;o<u.length;++o){const c=u[o],f=this.textMap.get(c)??this.inverseSpecialTokens[c];f!=null&&(t.push(f),a+=f.length)}const r=new Uint8Array(a);let s=0;for(const o of t)r.set(o,s),s+=o.length;return this.textDecoder.decode(r)}},q1=nf;U1(q1,"specialTokenRegex",u=>new RegExp(u.map(t=>P1(t)).join("|"),"g"));class B1 extends j1{constructor(t){if(super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers","text_splitters"]}),Object.defineProperty(this,"chunkSize",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),Object.defineProperty(this,"chunkOverlap",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(this,"keepSeparator",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lengthFunction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chunkSize=(t==null?void 0:t.chunkSize)??this.chunkSize,this.chunkOverlap=(t==null?void 0:t.chunkOverlap)??this.chunkOverlap,this.keepSeparator=(t==null?void 0:t.keepSeparator)??this.keepSeparator,this.lengthFunction=(t==null?void 0:t.lengthFunction)??(a=>a.length),this.chunkOverlap>=this.chunkSize)throw new Error("Cannot have chunkOverlap >= chunkSize")}async transformDocuments(t,a={}){return this.splitDocuments(t,a)}splitOnSeparator(t,a){let r;if(a)if(this.keepSeparator){const s=a.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");r=t.split(new RegExp(`(?=${s})`))}else r=t.split(a);else r=t.split("");return r.filter(s=>s!=="")}async createDocuments(t,a=[],r={}){const s=a.length>0?a:[...Array(t.length)].map(()=>({})),{chunkHeader:o="",chunkOverlapHeader:c="(cont'd) ",appendChunkOverlapHeader:f=!1}=r,p=new Array;for(let h=0;h<t.length;h+=1){const y=t[h];let _=1,b=null,w=-1;for(const S of await this.splitText(y)){let T=o;const R=y.indexOf(S,w+1);if(b===null){const Y=this.numberOfNewLines(y,0,R);_+=Y}else{const Y=w+await this.lengthFunction(b);if(Y<R){const I=this.numberOfNewLines(y,Y,R);_+=I}else if(Y>R){const I=this.numberOfNewLines(y,R,Y);_-=I}f&&(T+=c)}const k=this.numberOfNewLines(S),q=s[h].loc&&typeof s[h].loc=="object"?{...s[h].loc}:{};q.lines={from:_,to:_+k};const N={...s[h],loc:q};T+=S,p.push(new Nw({pageContent:T,metadata:N})),_+=k,b=S,w=R}}return p}numberOfNewLines(t,a,r){return(t.slice(a,r).match(/\n/g)||[]).length}async splitDocuments(t,a={}){const r=t.filter(c=>c.pageContent!==void 0),s=r.map(c=>c.pageContent),o=r.map(c=>c.metadata);return this.createDocuments(s,o,a)}joinDocs(t,a){const r=t.join(a).trim();return r===""?null:r}async mergeSplits(t,a){const r=[],s=[];let o=0;for(const f of t){const p=await this.lengthFunction(f);if(o+p+s.length*a.length>this.chunkSize&&(o>this.chunkSize&&console.warn(`Created a chunk of size ${o}, +
which is longer than the specified ${this.chunkSize}`),s.length>0)){const h=this.joinDocs(s,a);for(h!==null&&r.push(h);o>this.chunkOverlap||o+p+s.length*a.length>this.chunkSize&&o>0;)o-=await this.lengthFunction(s[0]),s.shift()}s.push(f),o+=p}const c=this.joinDocs(s,a);return c!==null&&r.push(c),r}}class Ju extends B1{static lc_name(){return"RecursiveCharacterTextSplitter"}constructor(t){super(t),Object.defineProperty(this,"separators",{enumerable:!0,configurable:!0,writable:!0,value:[`

`,`
`," ",""]}),this.separators=(t==null?void 0:t.separators)??this.separators,this.keepSeparator=(t==null?void 0:t.keepSeparator)??!0}async _splitText(t,a){const r=[];let s=a[a.length-1],o;for(let h=0;h<a.length;h+=1){const y=a[h];if(y===""){s=y;break}if(t.includes(y)){s=y,o=a.slice(h+1);break}}const c=this.splitOnSeparator(t,s);let f=[];const p=this.keepSeparator?"":s;for(const h of c)if(await this.lengthFunction(h)<this.chunkSize)f.push(h);else{if(f.length){const y=await this.mergeSplits(f,p);r.push(...y),f=[]}if(!o)r.push(h);else{const y=await this._splitText(h,o);r.push(...y)}}if(f.length){const h=await this.mergeSplits(f,p);r.push(...h)}return r}async splitText(t){return this._splitText(t,this.separators)}static fromLanguage(t,a){return new Ju({...a,separators:Ju.getSeparatorsForLanguage(t)})}static getSeparatorsForLanguage(t){if(t==="cpp")return[`
class `,`
void `,`
int `,`
float `,`
double `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];if(t==="go")return[`
func `,`
var `,`
const `,`
type `,`
if `,`
for `,`
switch `,`
case `,`

`,`
`," ",""];if(t==="java")return[`
class `,`
public `,`
protected `,`
private `,`
static `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];if(t==="js")return[`
function `,`
const `,`
let `,`
var `,`
class `,`
if `,`
for `,`
while `,`
switch `,`
case `,`
default `,`

`,`
`," ",""];if(t==="php")return[`
function `,`
class `,`
if `,`
foreach `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];if(t==="proto")return[`
message `,`
service `,`
enum `,`
option `,`
import `,`
syntax `,`

`,`
`," ",""];if(t==="python")return[`
class `,`
def `,`
	def `,`

`,`
`," ",""];if(t==="rst")return[`
===
`,`
---
`,`
***
`,`
.. `,`

`,`
`," ",""];if(t==="ruby")return[`
def `,`
class `,`
if `,`
unless `,`
while `,`
for `,`
do `,`
begin `,`
rescue `,`

`,`
`," ",""];if(t==="rust")return[`
fn `,`
const `,`
let `,`
if `,`
while `,`
for `,`
loop `,`
match `,`
const `,`

`,`
`," ",""];if(t==="scala")return[`
class `,`
object `,`
def `,`
val `,`
var `,`
if `,`
for `,`
while `,`
match `,`
case `,`

`,`
`," ",""];if(t==="swift")return[`
func `,`
class `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];if(t==="markdown")return[`
## `,`
### `,`
#### `,`
##### `,`
###### `,"```\n\n",`

***

`,`

---

`,`

___

`,`

`,`
`," ",""];if(t==="latex")return[`
\\chapter{`,`
\\section{`,`
\\subsection{`,`
\\subsubsection{`,`
\\begin{enumerate}`,`
\\begin{itemize}`,`
\\begin{description}`,`
\\begin{list}`,`
\\begin{quote}`,`
\\begin{quotation}`,`
\\begin{verse}`,`
\\begin{verbatim}`,`
\\begin{align}`,"$$","$",`

`,`
`," ",""];if(t==="html")return["<body>","<div>","<p>","<br>","<li>","<h1>","<h2>","<h3>","<h4>","<h5>","<h6>","<span>","<table>","<tr>","<td>","<th>","<ul>","<ol>","<header>","<footer>","<nav>","<head>","<style>","<script>","<meta>","<title>"," ",""];if(t==="sol")return[`
pragma `,`
using `,`
contract `,`
interface `,`
library `,`
constructor `,`
type `,`
function `,`
event `,`
modifier `,`
error `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do while `,`
assembly `,`

`,`
`," ",""];throw new Error(`Language ${t} is not supported.`)}}async function H1(u,t=500,a=50){return await new Ju({chunkSize:t,chunkOverlap:a}).splitText(u)}async function G1(u,t){var s,o,c;const a="https://asteroide.ing.uc.cl/v1/chat/completions",r=`Tu ROL es de responder preguntas basandote en tus conocimientos y ayudandote con el contexto que se te proporciona.

    Estas preguntas provienen de un usuario que esta interactuando con un ChatBOT (Tu).

    Responde en espaol claro y conciso la siguiente pregunta. 

    Debes usar el texto base que est en ingles (tu mismo debes traducirlo y comprenderlo) como ayuda para tu respuesta. 

    Haz inferencias simples si el contenido lo permite.

    Si no hay suficiente informacin, o el texto base est vaco, pide una reformulacin o menciona que no tienes datos suficientes.

    IMPORTANTE: [Este proceso debe ser transparente para el usuario que realiza las consultas.
    NO PUEDES mencionar nada fuera de la respuesta que vayas a generar.
    Debes priorizar responder lo que sea que pregunte el usuario, que estar bajo Pregunta del usuario
    NO PARTAS RESPONDIENDO LA PREGUNTA CON la respuesta es: o la respuesta es la siguiente:. Solo responde al usuario derechamente.]

    Texto base:
    ${u}

    Pregunta del usuario:
    ${t}`;console.log("Procesando con prompt:",r);try{const f=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"integracion",messages:[{role:"user",content:r}],temperature:1,top_k:5,num_ctx:512,repeat_last_n:10})});if(!f.ok){const h=await f.text();return console.error(`LLM API Error ${f.status}: ${h}`),`Error del servidor LLM (${f.status})`}return((c=(o=(s=(await f.json()).choices)==null?void 0:s[0])==null?void 0:o.message)==null?void 0:c.content)??"Error al generar respuesta."}catch(f){return console.error("Error al llamar a la API del LLM:",f),"Error de red al llamar al LLM."}}var Ku={isNone:function(){return!0},orElse:function(u){return u},orCall:function(u){return u()},orNull:function(){return null},orThrow:function(u){throw u===void 0&&(u="Unexpected null value"),new TypeError(u)},map:function(){return Ku},get:function(){return Ku}},V_=function(){function u(t){this.value=t}return u.prototype.isNone=function(){return!1},u.prototype.orElse=function(){return this.value},u.prototype.orCall=function(){return this.value},u.prototype.orNull=function(){return this.value},u.prototype.orThrow=function(){return this.value},u.prototype.map=function(t){return se(t(this.value))},u.prototype.get=function(t){return this.map(function(a){return a[t]})},u}();function Z1(u){return u===Ku||u instanceof V_}function se(u){return Z1(u)?u:u==null?Ku:V1(u)}function V1(u){if(u==null)throw new TypeError("some() does not accept null or undefined");return new V_(u)}class Wu extends Error{constructor(t){super(t.statusText),Object.setPrototypeOf(this,new.target.prototype),this.headers=t.headers,this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.data=t.data}}let af,Y_;"rawJSON"in JSON&&(af=function(u,t,a){if(Number.isInteger(t)&&!Number.isSafeInteger(t))try{return BigInt(a.source)}catch{return t}return t},Y_=function(u,t){return typeof t=="bigint"?JSON.rawJSON(String(t)):t});const bf=u=>u==="post"||u==="put"||u==="patch"||u==="delete";function Y1(u){const t=[],a=(r,s)=>`${encodeURIComponent(r)}=${encodeURIComponent(String(s))}`;return Object.keys(u).forEach(r=>{const s=u[r];s!=null&&(Array.isArray(s)?s.forEach(o=>t.push(a(r,o))):t.push(a(r,s)))}),t.length>0?`?${t.join("&")}`:""}function X1(u,t){return u.replace(/\{([^}]+)\}/g,(a,r)=>{const s=encodeURIComponent(t[r]);return delete t[r],s})}function Q1(u,t,a){let r={};return bf(u)?a.forEach(s=>{r[s]=t[s],delete t[s]}):r={...t},Y1(r)}function F1(u,t){const a=new Headers(t);return u!==void 0&&!(u instanceof FormData)&&!a.has("Content-Type")&&a.append("Content-Type","application/json"),a.has("Accept")||a.append("Accept","application/json"),a}function J1(u,t){if(!bf(u))return;const a=t instanceof FormData?t:JSON.stringify(t,Y_);return u==="delete"&&a==="{}"?void 0:a}function K1(u,t){const a=new Headers(u==null?void 0:u.headers),r=new Headers(t==null?void 0:t.headers);for(const s of r.keys()){const o=r.get(s);o!=null&&a.set(s,o)}return{...u,...t,headers:a}}function W1(u){var p,h;const t=Object.assign(Array.isArray(u.payload)?[]:{},u.payload),a=X1(u.path,t),r=Q1(u.method,t,u.queryParams),s=J1(u.method,t),o=bf(u.method)?F1(s,(p=u.init)==null?void 0:p.headers):new Headers((h=u.init)==null?void 0:h.headers),c=u.baseUrl+a+r,f={...u.init,method:u.method.toUpperCase(),headers:o,body:s};return{url:c,init:f}}async function eT(u){if(u.status===204)return;const t=u.headers.get("content-type"),a=await u.text();if(t&&t.includes("application/json"))return JSON.parse(a,af);try{return JSON.parse(a,af)}catch{return a}}async function tT(u,t){const a=await fetch(u,t),r=await eT(a),s={headers:a.headers,url:a.url,ok:a.ok,status:a.status,statusText:a.statusText,data:r};if(s.ok)return s;throw new Wu(s)}function nT(u,t){const a=async(r,s,o)=>{if(u==null||r===u.length)return t(s,o);const c=u[r];return await c(s,o,(f,p)=>a(r+1,f,p))};return(r,s)=>a(0,r,s)}async function aT(u){const{url:t,init:a}=W1(u);return await u.fetch(t,a)}function rT(u){const t=async(a,r)=>{try{return await u(a,r)}catch(s){throw s instanceof Wu?new t.Error(s):s}};return t.Error=class extends Wu{constructor(a){super(a),Object.setPrototypeOf(this,new.target.prototype)}getActualType(){return{status:this.status,data:this.data}}},t}function iT(){let u="",t={};const a=[],r=nT(a,tT);return{configure:s=>{u=s.baseUrl||"",t=s.init||{},a.splice(0),a.push(...s.use||[])},use:s=>a.push(s),path:s=>({method:o=>({create:c=>rT((f,p)=>aT({baseUrl:u||"",path:s,method:o,queryParams:Object.keys(c||{}),payload:f,init:K1(t,p),fetch:r}))})})}}const sT={for:()=>iT()},uT=200;class is extends Error{constructor(t){super(t),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}class vf extends is{static forResponse(t){const a=`${t.status}`,r=t.statusText?`(${t.statusText})`:"(Unrecognized Status Code)",s=`${a} ${r}`.trim(),o=t.data?JSON.stringify(t.data,null,2):null;let c="";o&&(c=o.length<=uT?o:o.slice(0,-4)+" ...");const f=`Raw response content:
${c}`;return new vf(`Unexpected Response: ${s}
${f}`)}}class ku extends is{}class lT extends is{}class oT extends is{constructor(t,a){super(t);const r=Number(a);if(isNaN(r))throw new is(`Invalid retryAfter value: ${a}`);this.retry_after=r,Object.setPrototypeOf(this,new.target.prototype)}}function cT(u){return{createShardKey:u.path("/collections/{collection_name}/shards").method("put").create({timeout:!0}),deleteShardKey:u.path("/collections/{collection_name}/shards/delete").method("post").create({timeout:!0}),root:u.path("/").method("get").create(),telemetry:u.path("/telemetry").method("get").create(),metrics:u.path("/metrics").method("get").create(),getLocks:u.path("/locks").method("get").create(),postLocks:u.path("/locks").method("post").create(),healthz:u.path("/healthz").method("get").create(),livez:u.path("/livez").method("get").create(),readyz:u.path("/readyz").method("get").create(),getIssues:u.path("/issues").method("get").create(),clearIssues:u.path("/issues").method("delete").create(),clusterStatus:u.path("/cluster").method("get").create(),recoverCurrentPeer:u.path("/cluster/recover").method("post").create(),removePeer:u.path("/cluster/peer/{peer_id}").method("delete").create({force:!0}),getCollections:u.path("/collections").method("get").create(),getCollection:u.path("/collections/{collection_name}").method("get").create(),createCollection:u.path("/collections/{collection_name}").method("put").create({timeout:!0}),deleteCollection:u.path("/collections/{collection_name}").method("delete").create({timeout:!0}),updateCollection:u.path("/collections/{collection_name}").method("patch").create({timeout:!0}),updateAliases:u.path("/collections/aliases").method("post").create({timeout:!0}),createFieldIndex:u.path("/collections/{collection_name}/index").method("put").create({wait:!0,ordering:!0}),collectionExists:u.path("/collections/{collection_name}/exists").method("get").create(),deleteFieldIndex:u.path("/collections/{collection_name}/index/{field_name}").method("delete").create({wait:!0,ordering:!0}),collectionClusterInfo:u.path("/collections/{collection_name}/cluster").method("get").create(),updateCollectionCluster:u.path("/collections/{collection_name}/cluster").method("post").create({timeout:!0}),getCollectionAliases:u.path("/collections/{collection_name}/aliases").method("get").create(),getCollectionsAliases:u.path("/aliases").method("get").create(),recoverFromUploadedSnapshot:u.path("/collections/{collection_name}/snapshots/upload").method("post").create({wait:!0,priority:!0,checksum:!0}),recoverFromSnapshot:u.path("/collections/{collection_name}/snapshots/recover").method("put").create({wait:!0}),listSnapshots:u.path("/collections/{collection_name}/snapshots").method("get").create(),createSnapshot:u.path("/collections/{collection_name}/snapshots").method("post").create({wait:!0}),getSnapshot:u.path("/collections/{collection_name}/snapshots/{snapshot_name}").method("get").create(),deleteSnapshot:u.path("/collections/{collection_name}/snapshots/{snapshot_name}").method("delete").create({wait:!0}),listFullSnapshots:u.path("/snapshots").method("get").create(),createFullSnapshot:u.path("/snapshots").method("post").create({wait:!0}),getFullSnapshot:u.path("/snapshots/{snapshot_name}").method("get").create(),deleteFullSnapshot:u.path("/snapshots/{snapshot_name}").method("delete").create({wait:!0}),recoverShardFromUploadedSnapshot:u.path("/collections/{collection_name}/shards/{shard_id}/snapshots/upload").method("post").create({wait:!0,priority:!0,checksum:!0}),recoverShardFromSnapshot:u.path("/collections/{collection_name}/shards/{shard_id}/snapshots/recover").method("put").create({wait:!0}),listShardSnapshots:u.path("/collections/{collection_name}/shards/{shard_id}/snapshots").method("get").create(),createShardSnapshot:u.path("/collections/{collection_name}/shards/{shard_id}/snapshots").method("post").create({wait:!0}),getShardSnapshot:u.path("/collections/{collection_name}/shards/{shard_id}/snapshots/{snapshot_name}").method("get").create(),deleteShardSnapshot:u.path("/collections/{collection_name}/shards/{shard_id}/snapshots/{snapshot_name}").method("delete").create({wait:!0}),getPoint:u.path("/collections/{collection_name}/points/{id}").method("get").create(),upsertPoints:u.path("/collections/{collection_name}/points").method("put").create({wait:!0,ordering:!0}),getPoints:u.path("/collections/{collection_name}/points").method("post").create({consistency:!0,timeout:!0}),deletePoints:u.path("/collections/{collection_name}/points/delete").method("post").create({wait:!0,ordering:!0}),updateVectors:u.path("/collections/{collection_name}/points/vectors").method("put").create({wait:!0,ordering:!0}),deleteVectors:u.path("/collections/{collection_name}/points/vectors/delete").method("post").create({wait:!0,ordering:!0}),overwritePayload:u.path("/collections/{collection_name}/points/payload").method("put").create({wait:!0,ordering:!0}),setPayload:u.path("/collections/{collection_name}/points/payload").method("post").create({wait:!0,ordering:!0}),deletePayload:u.path("/collections/{collection_name}/points/payload/delete").method("post").create({wait:!0,ordering:!0}),clearPayload:u.path("/collections/{collection_name}/points/payload/clear").method("post").create({wait:!0,ordering:!0}),batchUpdate:u.path("/collections/{collection_name}/points/batch").method("post").create({wait:!0,ordering:!0}),scrollPoints:u.path("/collections/{collection_name}/points/scroll").method("post").create({consistency:!0,timeout:!0}),searchPoints:u.path("/collections/{collection_name}/points/search").method("post").create({consistency:!0,timeout:!0}),searchBatchPoints:u.path("/collections/{collection_name}/points/search/batch").method("post").create({consistency:!0,timeout:!0}),searchPointGroups:u.path("/collections/{collection_name}/points/search/groups").method("post").create({consistency:!0,timeout:!0}),recommendPoints:u.path("/collections/{collection_name}/points/recommend").method("post").create({consistency:!0,timeout:!0}),recommendBatchPoints:u.path("/collections/{collection_name}/points/recommend/batch").method("post").create({consistency:!0,timeout:!0}),recommendPointGroups:u.path("/collections/{collection_name}/points/recommend/groups").method("post").create({consistency:!0,timeout:!0}),discoverPoints:u.path("/collections/{collection_name}/points/discover").method("post").create({consistency:!0,timeout:!0}),discoverBatchPoints:u.path("/collections/{collection_name}/points/discover/batch").method("post").create({consistency:!0,timeout:!0}),countPoints:u.path("/collections/{collection_name}/points/count").method("post").create({timeout:!0}),facet:u.path("/collections/{collection_name}/facet").method("post").create({timeout:!0,consistency:!0}),queryPoints:u.path("/collections/{collection_name}/points/query").method("post").create({consistency:!0,timeout:!0}),queryBatchPoints:u.path("/collections/{collection_name}/points/query/batch").method("post").create({consistency:!0,timeout:!0}),queryPointsGroups:u.path("/collections/{collection_name}/points/query/groups").method("post").create({consistency:!0,timeout:!0}),searchMatrixPairs:u.path("/collections/{collection_name}/points/search/matrix/pairs").method("post").create({consistency:!0,timeout:!0}),searchMatrixOffsets:u.path("/collections/{collection_name}/points/search/matrix/offsets").method("post").create({consistency:!0,timeout:!0})}}function dT(u,t){const a=fT(u,t);return cT(a)}function fT(u,{headers:t,timeout:a,connections:r}){const s=[];Number.isFinite(a)&&s.push(async(c,f,p)=>{const h=new AbortController,y=setTimeout(()=>h.abort(),a);try{return await p(c,Object.assign(f,{signal:h.signal}))}catch(_){throw _ instanceof Error&&_.name==="AbortError"?new lT(_.message):_}finally{clearTimeout(y)}}),s.push(async(c,f,p)=>{var y;let h;try{if(h=await p(c,f),h.status===200||h.status===201)return h}catch(_){if(_ instanceof Wu&&_.status===429){const b=(y=_.headers.get("retry-after"))==null?void 0:y[0];if(b)throw new oT(_.message,b)}throw _}throw vf.forResponse(h)});const o=sT.for();return o.configure({baseUrl:u,init:{headers:t,dispatcher:void 0},use:s}),o}const Bd="1.14.1",rf={parseVersion(u){if(!u)throw new Error("Version is null");let t,a;if([t,a]=u.split(".",2),t=parseInt(t,10),a=parseInt(a,10),isNaN(t)||isNaN(a))throw new Error(`Unable to parse version, expected format: x.y[.z], found: ${u}`);return{major:t,minor:a}},isCompatible(u,t){if(!u||!t)return console.debug(`Unable to compare versions with null values. Client: ${u}, Server: ${t}`),!1;if(u===t)return!0;try{const a=rf.parseVersion(u),r=rf.parseVersion(t);return a.major===r.major&&Math.abs(a.minor-r.minor)<=1}catch(a){return console.debug(`Unable to compare versions: ${a}`),!1}}};class hT{constructor({url:t,host:a,apiKey:r,https:s,prefix:o,port:c=6333,timeout:f=3e5,checkCompatibility:p=!0,...h}={}){if(this._https=s??typeof r=="string",this._scheme=this._https?"https":"http",this._prefix=o??"",this._prefix.length>0&&!this._prefix.startsWith("/")&&(this._prefix=`/${this._prefix}`),t&&a)throw new ku(`Only one of \`url\`, \`host\` params can be set. Url is ${t}, host is ${a}`);if(a&&(a.startsWith("http://")||a.startsWith("https://")||/:\d+$/.test(a)))throw new ku("The `host` param is not expected to contain neither protocol (http:// or https://) nor port (:6333).\nTry to use the `url` parameter instead.");if(t){if(!(t.startsWith("http://")||t.startsWith("https://")))throw new ku("The `url` param expected to contain a valid URL starting with a protocol (http:// or https://).");const T=new URL(t);if(this._host=T.hostname,this._port=T.port?Number(T.port):c,this._scheme=T.protocol.replace(":",""),this._prefix.length>0&&T.pathname!=="/")throw new ku(`Prefix can be set either in \`url\` or in \`prefix\`.
url is ${t}, prefix is ${T.pathname}`)}else this._port=c,this._host=a??"127.0.0.1";const y=new Headers([["user-agent","qdrant-js/"+String(Bd)]]),_=h.headers??{};Object.keys(_).forEach(T=>{_[T]&&y.set(T,String(_[T]))}),typeof r=="string"&&(this._scheme==="http"&&console.warn("Api key is used with unsecure connection."),y.set("api-key",r));const b=this._port?`${this._host}:${this._port}`:this._host;this._restUri=`${this._scheme}://${b}${this._prefix}`;const w=h.maxConnections,S={headers:y,timeout:f,connections:w};this._openApiClient=dT(this._restUri,S),p&&this._openApiClient.root({}).then(T=>{const R=T.data.version;rf.isCompatible(Bd,R)||console.warn(`Client version ${Bd} is incompatible with server version ${R}. Major versions should match and minor version difference must not exceed 1. Set checkCompatibility=false to skip version check.`)}).catch(()=>{console.warn("Failed to obtain server version. Unable to check client-server compatibility. Set checkCompatibility=false to skip version check.")})}api(){return this._openApiClient}async searchBatch(t,{searches:a,consistency:r,timeout:s}){const o=await this._openApiClient.searchBatchPoints({collection_name:t,consistency:r,timeout:s,searches:a});return se(o.data.result).orThrow("Search batch returned empty")}async search(t,{shard_key:a,vector:r,limit:s=10,offset:o=0,filter:c,params:f,with_payload:p=!0,with_vector:h=!1,score_threshold:y,consistency:_,timeout:b}){const w=await this._openApiClient.searchPoints({collection_name:t,consistency:_,timeout:b,shard_key:a,vector:r,limit:s,offset:o,filter:c,params:f,with_payload:p,with_vector:h,score_threshold:y});return se(w.data.result).orThrow("Search returned empty")}async recommendBatch(t,{searches:a,consistency:r,timeout:s}){const o=await this._openApiClient.recommendBatchPoints({collection_name:t,searches:a,consistency:r,timeout:s});return se(o.data.result).orElse([])}async recommend_batch(t,{searches:a,consistency:r,timeout:s}){const o=await this._openApiClient.recommendBatchPoints({collection_name:t,searches:a,consistency:r,timeout:s});return se(o.data.result).orElse([])}async recommend(t,{shard_key:a,positive:r,negative:s,strategy:o,filter:c,params:f,limit:p=10,offset:h=0,with_payload:y=!0,with_vector:_=!1,score_threshold:b,using:w,lookup_from:S,consistency:T,timeout:R}){const k=await this._openApiClient.recommendPoints({collection_name:t,limit:p,shard_key:a,positive:r,negative:s,strategy:o,filter:c,params:f,offset:h,with_payload:y,with_vector:_,score_threshold:b,using:w,lookup_from:S,consistency:T,timeout:R});return se(k.data.result).orThrow("Recommend points API returned empty")}async scroll(t,{shard_key:a,filter:r,consistency:s,timeout:o,limit:c=10,offset:f,with_payload:p=!0,with_vector:h=!1,order_by:y}={}){const _=await this._openApiClient.scrollPoints({collection_name:t,shard_key:a,limit:c,offset:f,filter:r,with_payload:p,with_vector:h,order_by:y,consistency:s,timeout:o});return se(_.data.result).orThrow("Scroll points API returned empty")}async count(t,{shard_key:a,filter:r,exact:s=!0,timeout:o}={}){const c=await this._openApiClient.countPoints({collection_name:t,shard_key:a,filter:r,exact:s,timeout:o});return se(c.data.result).orThrow("Count points returned empty")}async collectionClusterInfo(t){const a=await this._openApiClient.collectionClusterInfo({collection_name:t});return se(a.data.result).orThrow("Collection cluster info returned empty")}async updateVectors(t,{wait:a=!0,ordering:r,points:s,shard_key:o}){const c=await this._openApiClient.updateVectors({collection_name:t,wait:a,ordering:r,points:s,shard_key:o});return se(c.data.result).orThrow("Update vectors returned empty")}async deleteVectors(t,{wait:a=!0,ordering:r,points:s,filter:o,vector:c,shard_key:f}){const p=await this._openApiClient.deleteVectors({collection_name:t,wait:a,ordering:r,points:s,filter:o,vector:c,shard_key:f});return se(p.data.result).orThrow("Delete vectors returned empty")}async searchPointGroups(t,{consistency:a,timeout:r,shard_key:s,vector:o,filter:c,params:f,with_payload:p=null,with_vector:h=null,score_threshold:y,group_by:_,group_size:b,limit:w}){const S=await this._openApiClient.searchPointGroups({collection_name:t,consistency:a,timeout:r,shard_key:s,vector:o,filter:c,params:f,with_payload:p,with_vector:h,score_threshold:y,group_by:_,group_size:b,limit:w});return se(S.data.result).orThrow("Search point groups returned empty")}async recommendPointGroups(t,{consistency:a,timeout:r,shard_key:s,positive:o,strategy:c,negative:f=[],filter:p,params:h,with_payload:y=null,with_vector:_=null,score_threshold:b,using:w=null,lookup_from:S=null,group_by:T,group_size:R,limit:k}){const q=await this._openApiClient.recommendPointGroups({collection_name:t,consistency:a,timeout:r,shard_key:s,positive:o,negative:f,strategy:c,filter:p,params:h,with_payload:y,with_vector:_,score_threshold:b,using:w,lookup_from:S,group_by:T,group_size:R,limit:k});return se(q.data.result).orThrow("Recommend point groups API returned empty")}async upsert(t,{wait:a=!0,ordering:r,...s}){const o=await this._openApiClient.upsertPoints({collection_name:t,wait:a,ordering:r,...s});return se(o.data.result).orThrow("Upsert returned empty")}async retrieve(t,{shard_key:a,ids:r,with_payload:s=!0,with_vector:o,consistency:c,timeout:f}){const p=await this._openApiClient.getPoints({collection_name:t,shard_key:a,ids:r,with_payload:s,with_vector:o,consistency:c,timeout:f});return se(p.data.result).orThrow("Retrieve API returned empty")}async delete(t,{wait:a,ordering:r,...s}){const o=await this._openApiClient.deletePoints({collection_name:t,wait:a,ordering:r,...s});return se(o.data.result).orThrow("Delete points returned empty")}async setPayload(t,{payload:a,points:r,filter:s,shard_key:o,key:c,ordering:f,wait:p=!0}){const h=await this._openApiClient.setPayload({collection_name:t,payload:a,points:r,filter:s,shard_key:o,key:c,wait:p,ordering:f});return se(h.data.result).orThrow("Set payload returned empty")}async overwritePayload(t,{ordering:a,payload:r,points:s,filter:o,shard_key:c,key:f,wait:p=!0}){const h=await this._openApiClient.overwritePayload({collection_name:t,payload:r,points:s,filter:o,shard_key:c,key:f,wait:p,ordering:a});return se(h.data.result).orThrow("Overwrite payload returned empty")}async deletePayload(t,{ordering:a,keys:r,points:s,filter:o,shard_key:c,wait:f=!0}){const p=await this._openApiClient.deletePayload({collection_name:t,keys:r,points:s,filter:o,shard_key:c,wait:f,ordering:a});return se(p.data.result).orThrow("Delete payload returned empty")}async clearPayload(t,{ordering:a,wait:r=!0,...s}){const o=await this._openApiClient.clearPayload({collection_name:t,wait:r,ordering:a,...s});return se(o.data.result).orThrow("Clear payload returned empty")}async updateCollectionAliases({actions:t,timeout:a}){const r=await this._openApiClient.updateAliases({actions:t,timeout:a});return se(r.data.result).orThrow("Update aliases returned empty")}async getCollectionAliases(t){const a=await this._openApiClient.getCollectionAliases({collection_name:t});return se(a.data.result).orThrow("Get collection aliases returned empty")}async getAliases(){const t=await this._openApiClient.getCollectionsAliases({});return se(t.data.result).orThrow("Get aliases returned empty")}async getCollections(){const t=await this._openApiClient.getCollections({});return se(t.data.result).orThrow("Get collections returned empty")}async getCollection(t){const a=await this._openApiClient.getCollection({collection_name:t});return se(a.data.result).orThrow("Get collection returned empty")}async updateCollection(t,a){const r=await this._openApiClient.updateCollection({collection_name:t,...a});return se(r.data.result).orThrow("Update collection returned empty")}async deleteCollection(t,a){const r=await this._openApiClient.deleteCollection({collection_name:t,...a});return se(r.data.result).orThrow("Delete collection returned empty")}async createCollection(t,{timeout:a,vectors:r,hnsw_config:s,init_from:o,on_disk_payload:c,optimizers_config:f,quantization_config:p,replication_factor:h,shard_number:y,sharding_method:_,wal_config:b,write_consistency_factor:w,sparse_vectors:S,strict_mode_config:T}){const R=await this._openApiClient.createCollection({collection_name:t,timeout:a,vectors:r,hnsw_config:s,init_from:o,on_disk_payload:c,optimizers_config:f,quantization_config:p,replication_factor:h,shard_number:y,sharding_method:_,wal_config:b,write_consistency_factor:w,sparse_vectors:S,strict_mode_config:T});return se(R.data.result).orThrow("Create collection returned empty")}async recreateCollection(t,{timeout:a,vectors:r,hnsw_config:s,init_from:o,on_disk_payload:c,optimizers_config:f,quantization_config:p,replication_factor:h,shard_number:y,sharding_method:_,wal_config:b,write_consistency_factor:w,sparse_vectors:S,strict_mode_config:T}){se(await this._openApiClient.deleteCollection({collection_name:t,timeout:a})).get("ok").orThrow("Delete collection returned failed");const R=await this._openApiClient.createCollection({collection_name:t,timeout:a,vectors:r,hnsw_config:s,init_from:o,on_disk_payload:c,optimizers_config:f,quantization_config:p,replication_factor:h,shard_number:y,sharding_method:_,wal_config:b,write_consistency_factor:w,sparse_vectors:S,strict_mode_config:T});return se(R).orThrow("Create collection returned empty")}async createPayloadIndex(t,{wait:a,ordering:r,field_name:s,field_schema:o}){const c=await this._openApiClient.createFieldIndex({collection_name:t,field_name:s,field_schema:o,wait:a,ordering:r});return se(c.data.result).orThrow("Create field index returned empty")}async deletePayloadIndex(t,a,{wait:r=!0,ordering:s}={}){const o=await this._openApiClient.deleteFieldIndex({collection_name:t,field_name:a,wait:r,ordering:s});return se(o.data.result).orThrow("Delete field index returned empty")}async listSnapshots(t){const a=await this._openApiClient.listSnapshots({collection_name:t});return se(a.data.result).orThrow("List snapshots API returned empty")}async createSnapshot(t,a){const r=await this._openApiClient.createSnapshot({collection_name:t,...a});return se(r.data.result).orNull()}async deleteSnapshot(t,a,r){const s=await this._openApiClient.deleteSnapshot({collection_name:t,snapshot_name:a,...r});return se(s.data.result).orThrow("Delete snapshot API returned empty")}async listFullSnapshots(){const t=await this._openApiClient.listFullSnapshots({});return se(t.data.result).orThrow("List full snapshots API returned empty")}async createFullSnapshot(t){const a=await this._openApiClient.createFullSnapshot(t??{});return se(a.data.result).orThrow("Create full snapshot API returned empty")}async deleteFullSnapshot(t,a){const r=await this._openApiClient.deleteFullSnapshot({snapshot_name:t,...a});return se(r.data.result).orThrow("Delete full snapshot API returned empty")}async recoverSnapshot(t,{location:a,priority:r,checksum:s,api_key:o}){const c=await this._openApiClient.recoverFromSnapshot({collection_name:t,location:a,priority:r,checksum:s,api_key:o});return se(c.data.result).orThrow("Recover from snapshot API returned empty")}async lockStorage(t){const a=await this._openApiClient.postLocks({write:!0,error_message:t});return se(a.data.result).orThrow("Lock storage returned empty")}async unlockStorage(){const t=await this._openApiClient.postLocks({write:!1});return se(t.data.result).orThrow("Post locks returned empty")}async getLocks(){const t=await this._openApiClient.getLocks({});return se(t.data.result).orThrow("Get locks returned empty")}async batchUpdate(t,{wait:a=!0,ordering:r,...s}){const o=await this._openApiClient.batchUpdate({collection_name:t,wait:a,ordering:r,...s});return se(o.data.result).orThrow("Batch update returned empty")}async recoverShardFromSnapshot(t,a,{wait:r=!0,...s}){const o=await this._openApiClient.recoverShardFromSnapshot({collection_name:t,shard_id:a,wait:r,...s});return se(o.data.result).orThrow("Recover shard from snapshot returned empty")}async listShardSnapshots(t,a){const r=await this._openApiClient.listShardSnapshots({collection_name:t,shard_id:a});return se(r.data.result).orThrow("List shard snapshots returned empty")}async createShardSnapshot(t,a,{wait:r=!0}){const s=await this._openApiClient.createShardSnapshot({collection_name:t,shard_id:a,wait:r});return se(s.data.result).orThrow("Create shard snapshot returned empty")}async deleteShardSnapshot(t,a,r,{wait:s=!0}){const o=await this._openApiClient.deleteShardSnapshot({collection_name:t,shard_id:a,snapshot_name:r,wait:s});return se(o.data.result).orThrow("Create shard snapshot returned empty")}async createShardKey(t,{shard_key:a,shards_number:r,replication_factor:s,placement:o,timeout:c}){const f=await this._openApiClient.createShardKey({collection_name:t,shard_key:a,shards_number:r,replication_factor:s,placement:o,timeout:c});return se(f.data.result).orThrow("Create shard key returned empty")}async deleteShardKey(t,{shard_key:a,timeout:r}){const s=await this._openApiClient.deleteShardKey({collection_name:t,shard_key:a,timeout:r});return se(s.data.result).orThrow("Create shard key returned empty")}async discoverPoints(t,{consistency:a,timeout:r,shard_key:s,target:o,context:c,params:f,limit:p,offset:h,with_payload:y,with_vector:_,using:b,lookup_from:w}){const S=await this._openApiClient.discoverPoints({collection_name:t,consistency:a,timeout:r,shard_key:s,target:o,context:c,params:f,limit:p,offset:h,with_payload:y,with_vector:_,using:b,lookup_from:w});return se(S.data.result).orThrow("Discover points returned empty")}async discoverBatchPoints(t,{consistency:a,timeout:r,searches:s}){const o=await this._openApiClient.discoverBatchPoints({collection_name:t,consistency:a,timeout:r,searches:s});return se(o.data.result).orThrow("Discover batch points returned empty")}async versionInfo(){const t=await this._openApiClient.root({});return se(t.data).orThrow("Version Info returned empty")}async collectionExists(t){const a=await this._openApiClient.collectionExists({collection_name:t});return se(a.data.result).orThrow("Collection exists returned empty")}async query(t,{consistency:a,timeout:r,shard_key:s,prefetch:o,query:c,using:f,filter:p,params:h,score_threshold:y,limit:_,offset:b,with_vector:w,with_payload:S,lookup_from:T}){const R=await this._openApiClient.queryPoints({collection_name:t,consistency:a,timeout:r,shard_key:s,prefetch:o,query:c,using:f,filter:p,params:h,score_threshold:y,limit:_,offset:b,with_vector:w,with_payload:S,lookup_from:T});return se(R.data.result).orThrow("Query points returned empty")}async queryBatch(t,{consistency:a,timeout:r,searches:s}){const o=await this._openApiClient.queryBatchPoints({collection_name:t,consistency:a,timeout:r,searches:s});return se(o.data.result).orThrow("Query points returned empty")}async queryGroups(t,{consistency:a,timeout:r,shard_key:s,prefetch:o,query:c,using:f,filter:p,params:h,score_threshold:y,with_vector:_,with_payload:b,group_by:w,group_size:S,limit:T,with_lookup:R}){const k=await this._openApiClient.queryPointsGroups({collection_name:t,consistency:a,timeout:r,shard_key:s,prefetch:o,query:c,using:f,filter:p,params:h,score_threshold:y,with_vector:_,with_payload:b,group_by:w,group_size:S,limit:T,with_lookup:R});return se(k.data.result).orThrow("Query groups returned empty")}async facet(t,{consistency:a,timeout:r,shard_key:s,key:o,limit:c,filter:f,exact:p}){const h=await this._openApiClient.facet({collection_name:t,consistency:a,timeout:r,shard_key:s,key:o,limit:c,filter:f,exact:p});return se(h.data.result).orThrow("Facet returned empty")}async searchMatrixPairs(t,{consistency:a,timeout:r,shard_key:s,filter:o,sample:c,limit:f,using:p}){const h=await this._openApiClient.searchMatrixPairs({collection_name:t,consistency:a,timeout:r,shard_key:s,filter:o,sample:c,limit:f,using:p});return se(h.data.result).orThrow("Search points matrix pairs returned empty")}async searchMatrixOffsets(t,{consistency:a,timeout:r,shard_key:s,filter:o,sample:c,limit:f,using:p}){const h=await this._openApiClient.searchMatrixOffsets({collection_name:t,consistency:a,timeout:r,shard_key:s,filter:o,sample:c,limit:f,using:p});return se(h.data.result).orThrow("Search points matrix offsets returned empty")}}const wf=new hT({url:"http://localhost:6333"}),Ki="wiki-embeddings";async function mT(){try{await wf.createCollection(Ki,{vectors:{size:768,distance:"Cosine"}}),console.log(`Coleccin "${Ki}" creada correctamente.`)}catch(u){if(u.message.includes("Conflict")||u.message.includes("already exists"))console.log(`Error de conflicto: La coleccin "${Ki}" ya existe, se usar la existente.`);else throw console.error("Error creando coleccin:",u),u}}async function pT(u){const t=u.map((a,r)=>({id:r+1,vector:a.embedding,payload:{text:a.text}}));await wf.upsert(Ki,{points:t}),console.log("Embeddings guardados en Qdrant")}async function yT(u,t=5){return(await wf.search(Ki,{vector:u,top:t})).map(r=>r.payload)}const gT=u=>{try{return new URL(u).hostname.includes("wikipedia.org")}catch{return!1}};function _T(){const[u,t]=un.useState(""),[a,r]=un.useState(!1),[s,o]=un.useState(""),[c,f]=un.useState([]),[p,h]=un.useState(!1),[y,_]=un.useState([]),[b,w]=un.useState(!1),[S,T]=un.useState(!1),R=un.useRef(null);un.useEffect(()=>{var N;(N=R.current)==null||N.scrollIntoView({behavior:"smooth"})},[c]);const k=async N=>{if(N.key==="Enter")if(gT(u)){r(!0),h(!1),w(!0);try{const Y=await xw(u);console.log("Texto scrapeado: ",Y);const I=await H1(Y);console.log("Chunks a aplicar embedding: ",I);const K=await Cw(I);console.log("Embeddings del artculo: ",K),_(K),await mT(),await pT(K)}catch(Y){console.error("Error generando embeddings:",Y)}finally{w(!1)}}else h(!0)},q=async N=>{if(N.key==="Enter"&&s.trim()!==""){const Y={role:"user",text:s};f(Be=>[...Be,Y]),T(!0);const I=await b_(s);if(!I){const Be={role:"ai",text:"Error generando el embedding de la consulta."};f(Qe=>[...Qe,Be]);return}console.log("queryEmbedding ",I),console.log("queryEmbedding[0] ",I[0]);const K=await yT(I[0],5);console.log("topChunks: ",K);const re=K.map(Be=>Be.text).join(`

`),J=await G1(re,s);console.log("AI Response:",J),T(!1);const Me={role:"ai",text:J};f(Be=>[...Be,Me]),o("")}};return Pe.jsxs("div",{className:"app",children:[Pe.jsxs("header",{className:"header",children:[Pe.jsx("h1",{className:"title",children:"WikiChat AI"}),Pe.jsx("p",{className:"subtitle",children:"Haz preguntas basadas en artculos de Wikipedia"})]}),Pe.jsxs("main",{className:"chat-container",children:[Pe.jsx("div",{className:`fade-section ${a?"fade-out":"fade-in"}`,children:!a&&Pe.jsxs(Pe.Fragment,{children:[Pe.jsx("input",{type:"text",placeholder:"Ingresa un enlace de Wikipedia y presiona Enter",value:u,onChange:N=>t(N.target.value),onKeyDown:k,className:"input"}),p&&Pe.jsx("div",{className:"warning",children:"Por favor ingresa un enlace vlido de Wikipedia."})]})}),Pe.jsx("div",{className:`fade-section ${a?"fade-in":"fade-out"}`,children:a&&Pe.jsx("div",{className:"query-section",children:b?Pe.jsx("div",{className:"loading-spinner",children:Pe.jsx("div",{className:"dot-flashing"})}):Pe.jsxs(Pe.Fragment,{children:[Pe.jsx("input",{type:"text",placeholder:"Escribe tu consulta y presiona Enter",value:s,onChange:N=>o(N.target.value),onKeyDown:q,className:"input",disabled:S,style:{opacity:S?.5:1}}),S&&Pe.jsx("div",{className:"loading-spinner",children:Pe.jsx("div",{className:"dot-flashing"})}),Pe.jsxs("div",{className:"messages",children:[c.map((N,Y)=>Pe.jsxs("div",{className:`message ${N.role==="user"?"user":"ai"}`,children:[Pe.jsxs("strong",{children:[N.role==="user"?"T":"IA",":"]})," ",N.text]},Y)),Pe.jsx("div",{ref:R})]})]})})})]}),Pe.jsx("footer",{className:"footer-warning",children:"Warning: Dependiendo del largo del artculo y de la pregunta, la IA puede demorar en responder. Paciencia. Puedes ver el estado de tu consulta en la consola."})]})}Rw.createRoot(document.getElementById("root")).render(Pe.jsx(un.StrictMode,{children:Pe.jsx(_T,{})}));
